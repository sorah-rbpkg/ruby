commit c55db6aa271df4a689dc8eb0039c929bf6ed43ff
Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-05-31 00:01:41 +0900

    * 2019-05-31

commit f7aa80b3feeddac6a5689f286b3db3728128caa4
Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
Date:   2019-05-31 00:00:26 +0900

    Make the target name unique when BASERUBY=no

commit ab0c8cc021b26712c9af9b1309244b7d930c9dfa
Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
Date:   2019-05-30 22:57:49 +0900

    Touch Unicode headers and the timestamp before packaging
    
    Not to download Unicode data files at building from the packages.

commit f0945176c356cfe615ff6b4e6012e7e8e0911bd6
Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
Date:   2019-05-30 22:27:11 +0900

    Fix missing `gitcmd`

commit 22cd4027349f803efc7ede284376b7a7013f8dfe
Author: NARUSE, Yui <naruse@airemix.jp>
Date:   2019-05-30 22:19:36 +0900

    vcs.rb support non-inplace build

commit 92ecf58b1e8ed15f5ec2bf69e3871de4343f71e0
Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
Date:   2019-05-30 22:03:33 +0900

    parse.y: adjust here-doc error token
    
    * parse.y (here_document): adjust token to the here-doc identifier
      in compile_error when a here-document misses the closing
      identifier.

commit b0e2b7a5ff0df14b3c8062c31ebb526a73a03763
Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
Date:   2019-05-30 21:49:08 +0900

    Include stack elements left after errors

commit 279c8e14d4b079e5b70b0389b82893de42b75c50
Author: aycabta <aycabta@gmail.com>
Date:   2019-05-30 20:54:28 +0900

    Use rebuilt buffer data to rerender all

commit 74a0e3ec235380541db95e18978e4e1aa174b407
Author: aycabta <aycabta@gmail.com>
Date:   2019-05-30 20:06:59 +0900

    Use start_with? for escaped quote too

commit ecd0f1d966209742382e5bd4591bafc88152a697
Author: aycabta <aycabta@gmail.com>
Date:   2019-05-30 18:29:26 +0900

    Use negative lookahead and start_with?

commit fcca39fa73607e6acf2aea00fd8bf746023955dc
Author: aycabta <aycabta@gmail.com>
Date:   2019-05-30 18:20:59 +0900

    Fix strange vertical cursor moving when adding a newline at bottom

commit 106843d839cb5779c7e2761b826aea78bd9a7e63
Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-05-30 17:12:53 +0900

    * expand tabs.

commit 5fc9f0008f824936c667970593df1b6663f0ae24
Author: Koichi Sasada <ko1@atdot.net>
Date:   2019-05-30 17:12:26 +0900

    reorder bitmap clearing.

commit dd63d7da61c472809c5e6a1dba81b7dea5aa1c1b
Author: Koichi Sasada <ko1@atdot.net>
Date:   2019-05-30 16:57:37 +0900

    move pinned_bits[] position in struct heap_page.
    
    pinned_bits are not used frequently (only GC.compact use it) so
    move it at the end of struct heap_page.

commit e15de865837262122cc64705440d00efac4b8c71
Author: Koichi Sasada <ko1@atdot.net>
Date:   2019-05-30 16:52:42 +0900

    introduce `during_compacting` flag.
    
    Usually PINNED_BITS are not needed (only for GC.compact need it)
    so skip updating PINNED_BITS if the marking is not by GC.compact.

commit 70e87d9660af24fb93cac1312b6e1990602c1396
Author: Takashi Kokubun <takashikkbn@gmail.com>
Date:   2019-05-30 15:49:48 +0900

    Do not rely on IRB.conf[:MAIN_CONTEXT] before initialize
    
    so that we can colorize binding.irb source lines.

commit 55c34b994b40db4d9fdbc29d9d8521745a56fdfd
Author: aycabta <aycabta@gmail.com>
Date:   2019-05-30 15:34:41 +0900

    Check the end token of heredoc correctly

commit 5a229b0a88679529a18aa3ef87317bdbd1783c58
Author: aycabta <aycabta@gmail.com>
Date:   2019-05-30 15:19:30 +0900

    Calculate vertical position correctly when rerendering all lines

commit 90014dddec70219c2da800bf0d4d262bfa99c9a8
Author: aycabta <aycabta@gmail.com>
Date:   2019-05-30 15:04:37 +0900

    Fix broken rendering when the last line is auto-wrapped

commit eae953ba9ff3302a698115f34893f17bf458d2ea
Author: aycabta <aycabta@gmail.com>
Date:   2019-05-30 14:19:58 +0900

    Rerender following lines when line number increased

commit 1cf9f79342c517e3f12ba614ad874b1d619af5bc
Author: aycabta <aycabta@gmail.com>
Date:   2019-05-30 14:04:14 +0900

    Clear remaining lines when line number decreased

commit 4a31c1e45d12b7813096948616f8a03224f20ac8
Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
Date:   2019-05-30 12:35:27 +0900

    parse.y: continue after heredoc error
    
    * parse.y: continue parsing the rest of the here-document starting
      line, after the terminator was not found.

commit cb520e76237d3884b768f4f68120beb13fcf1f04
Author: aycabta <aycabta@gmail.com>
Date:   2019-05-30 12:29:38 +0900

    Fix the auto-wrap behabior that was too buggy

commit f0ded366933407cfd0ad2c516b69d2766d1634d2
Author: Jeremy Evans <code@jeremyevans.net>
Date:   2019-05-30 10:40:03 +0900

    Use Regexp#match instead of #match for 1.9 BASERUBY support

commit d2ba80b5df7118383cbcfae934316310c6d81633
Author: Jeremy Evans <code@jeremyevans.net>
Date:   2019-05-30 09:58:18 +0900

    Revert "Fix building with 1.8 BASERUBY"
    
    This reverts commit 05bc14d81a1d7f6af826a92371aeff0c3fb2a67e.
    
    We have decided that the cost of reintroducing support for 1.8
    BASERUBY outweighs the benefit.  If you are still using 1.8 and want
    to build master/trunk, build and install the latest release, and use
    that as BASERUBY.

commit 5867e51e8311d1ed49457e946751cd0c06a306b8
Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-05-30 04:13:37 +0900

    * 2019-05-30

commit 814eaa25e2a54b5997f0d89da1a6e2259d4fc1e9
Author: Takashi Kokubun <takashikkbn@gmail.com>
Date:   2019-05-30 04:12:10 +0900

    Do not use rb_iseq_path() while moving ISeq pointers
    
    in GC.compact.
    
    While `in_jit` is false, GC.compact is allowed to run and it may be
    moving ISeq-related pointers. So calling rb_iseq_path() when `in_jit`
    is true is illegal.

commit 5b64d7ac6e7cbf759b859428f125539e58bac0bd
Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
Date:   2019-05-29 22:03:47 +0900

    Colorize errors more
    
    * lib/irb/color.rb (IRB::Color.colorize_code): colorize
      `compile_error` part as same as `on_parse_error`.

commit 12644e8b0208b01f4f4cea550d161a86e6f25aa8
Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
Date:   2019-05-29 21:59:34 +0900

    Get rid of nested string interpolations
    
    * lib/irb/color.rb (IRB::Color.colorize): get rid of nesting string
      interpolations not to confuse ruby-mode.el

commit 1da5c73932b2dcf2a089f125df1fe7cc4ab9fafd
Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
Date:   2019-05-29 21:39:45 +0900

    parse.y: fix state after ivar/cvar
    
    * parse.y (parse_atmark): return EXPR_END or EXPR_ENDFN, depending
      on the previous state, even incomplete names consistently.

commit 83e905eb4e6d1e8a7ebe88e3b1a6d7efa67ba01c
Author: aycabta <aycabta@gmail.com>
Date:   2019-05-29 20:24:00 +0900

    Revert "Use "require" just for essential"
    
    This reverts commit ab7a6e1a1651d82d327d155b78a8e3af1d976707.

commit ab7a6e1a1651d82d327d155b78a8e3af1d976707
Author: aycabta <aycabta@gmail.com>
Date:   2019-05-29 20:20:48 +0900

    Use "require" just for essential
    
    The 559dca509d2a98584b09c7d9a6d74749ce793ad7 contains an excess range in
    using "require".

commit fafcbe0eb0af0aa25ca1fa6e162e081bb78a8107
Author: aycabta <aycabta@gmail.com>
Date:   2019-05-29 18:52:20 +0900

    Use reversed get_screen_size correctly on Windows

commit 5ceff480c2c1696e9893a1e5e09e39f8425c6c5a
Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
Date:   2019-05-29 16:02:09 +0900

    ripper: Ripper::Lexer#scan
    
    * ext/ripper/lib/ripper/lexer.rb (Ripper::Lexer#scan): parses the
      code and returns the result elements including errors.
      [EXPERIMENTAL]

commit 7c0639f3f83f85557aff87e94da1afd373555bcb
Author: Takashi Kokubun <takashikkbn@gmail.com>
Date:   2019-05-29 16:47:57 +0900

    Never make a method call from MJIT worker
    
    by showing line number only when it's Fixnum.
    
    When it's not Fixnum, we need to call a method to know the line number.

commit ce7b1132c581375dafa6a5b5071e66eaa362b429
Author: Takashi Kokubun <takashikkbn@gmail.com>
Date:   2019-05-29 16:22:26 +0900

    Do not call FIX2INT while GC.compact may be running
    
    because FIX2INT might crash by moving method entry pointer:
    http://ci.rvm.jp/results/trunk-mjit@silicon-docker/2063412

commit 468b475e615e59c0778751051ecda175140c615e
Author: Takashi Kokubun <takashikkbn@gmail.com>
Date:   2019-05-29 16:09:07 +0900

    .travis.yml: Minor reorder for shortening

commit 1a0c3d8dd64eb90f5d74e68458d686c4f9cc1669
Author: Takashi Kokubun <takashikkbn@gmail.com>
Date:   2019-05-29 15:04:31 +0900

    Convert Enumerator to Array for Ruby 1.9.3
    
    String#lines seems to return Enumerator in Ruby 1.9.3, and it does not
    respond to #delete_if https://travis-ci.org/ruby/ruby/jobs/538559919

commit 5379ca92501c529005c0818f3cbbd1ef0798de6d
Author: Takashi Kokubun <takashikkbn@gmail.com>
Date:   2019-05-29 14:56:58 +0900

    Skip spec broken since a66bc2c01194a9c017c874a30db5b3b6bd95e966
    
    This has not worked since the merge https://travis-ci.org/ruby/ruby/jobs/538438184

commit 068d327595814a3448290eeba897fc37a8bb2dfb
Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
Date:   2019-05-29 13:34:19 +0900

    Colorize compile_error as same as on_parse_error

commit cc66272e5061020cac6864bbc2f68f7d327ecfbb
Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
Date:   2019-05-29 12:48:49 +0900

    parse.y: flush invalid char

commit 8552e9d69693b1d3f99a30d846b9dcc30bf590c2
Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
Date:   2019-05-29 13:24:01 +0900

    Fix shorten-64-to-32 warning

commit aee36bf149bedf97007584ac5d6cd5d438be28b5
Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
Date:   2019-05-29 13:12:15 +0900

    Fix Possible Control flow issues (DEADCODE)
    
    Coverity Scan says `Execution cannot reach this statement: "poison_object(v);"`,
    so do nothing when `ptr` is always 0 without address_sanitizer.

commit e04d10b28f47ea4d32f9562aedc4be9749415219
Author: Yusuke Endoh <mame@ruby-lang.org>
Date:   2019-05-29 13:01:53 +0900

    test/rubygems/test_gem_stream_ui.rb (test_ask_for_password): extend the timeout
    
    for Solaris.
    
    https://rubyci.org/logs/rubyci.s3.amazonaws.com/unstable10s/ruby-master/log/20190528T191908Z.fail.html.gz

commit 8187ffa461be6c1ee198c0b8f2c3a22ca2681d9a
Author: Koichi Sasada <ko1@atdot.net>
Date:   2019-05-29 12:30:36 +0900

    Revert "Colorize error part more"
    
    This reverts commit c7f3c222c9b82736c993419daa6bfb643e5c0793.

commit c7f3c222c9b82736c993419daa6bfb643e5c0793
Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
Date:   2019-05-28 18:19:59 +0900

    Colorize error part more
    
    Colorize `compile_error` parts as well as `on_parse_error` parts.

commit 34fe1f7d719d556cd7eda16d4df7cc64ce25dcfa
Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
Date:   2019-05-29 12:09:19 +0900

    Create empty revision.tmp if BASERUBY is not yes

commit 3f132979236f4aa42e3347a920123ce271a1e695
Author: aycabta <aycabta@gmail.com>
Date:   2019-05-29 10:04:39 +0900

    Remove extra items because Reline::HISTORY is a sized queue

commit c86d1fbed5e887ea7b59582510fb26ec912b7898
Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
Date:   2019-05-29 09:46:44 +0900

    Create empty revision.tmp if no BASERUBY

commit f60a59ed20648ddc4784d2dcb172d10c5f3405ed
Author: MSP-Greg <MSP-Greg@users.noreply.github.com>
Date:   2019-05-29 06:03:30 +0900

    appveyor.yml - update for msys2  - pdcurses, force toolchain
    
    Closes: https://github.com/ruby/ruby/pull/2208
    
    Merging the PR for fixing AppVeyor msys2 failure related to GCC 9 like:
    https://ci.appveyor.com/project/ruby/ruby/builds/24877992/job/ned5k4k5rwxnld5j

commit 98ba116d402e7c255dae78ce43b76723a56c4cb7
Author: Takashi Kokubun <takashikkbn@gmail.com>
Date:   2019-05-29 09:02:39 +0900

    Revert 3b7862c8e88cd7838a53ec083ac5733386400956 causing various CI hangs
    
    and dependent commits c67934b1c3b40dda5f170b032423e520511c68dd and
    f0d1dc5cee87dfb023cb43a2db9bcdef5a8dee8f.
    
    RubyCI and ci.rvm.jp are almost dead by timeout since this commit.
    
    ---
    
    Revert "Skip a reline test hanging on Wercker since 3b7862c8e8"
    
    This reverts commit f0d1dc5cee87dfb023cb43a2db9bcdef5a8dee8f.
    
    Revert "Remove extra items because Reline::HISTORY is a sized queue"
    
    This reverts commit c67934b1c3b40dda5f170b032423e520511c68dd.
    
    Revert "Use existing instances for LineEditor and Config"
    
    This reverts commit 3b7862c8e88cd7838a53ec083ac5733386400956.

commit 797d7efde18c5f7acf5264047842fd974f383ca9
Author: Takashi Kokubun <takashikkbn@gmail.com>
Date:   2019-05-29 08:56:26 +0900

    Prevent MJIT compilation from running while moving
    
    pointers.
    
    Instead of 4fe908c1643c3f355edd787bb651aefb53b996c0, just locking the MJIT
    worker may be fine for this case. And also we might have the same issue
    in all `gc_compact_after_gc` calls.

commit 6b5e712361cca8559ed66d5c1106e888c5971d39
Author: Takashi Kokubun <takashikkbn@gmail.com>
Date:   2019-05-29 08:22:02 +0900

    Make tool/vcs.rb compliant to BASERUBY
    
    People seem to consider BASERUBY is either 1.8 or 1.9 now. Since this
    file may be executed by BASERUBY from file2lastrev.rb, I think we should
    not rely on Ruby 2.0 in this file for now.

commit e1f62d7f0e33de81a194f26a2c57e14e38d9de52
Author: Takashi Kokubun <takashikkbn@gmail.com>
Date:   2019-05-29 07:46:44 +0900

    Check the result of file2lastrev.rb if HAVE_BASERUBY
    
    is yes.
    
    We ignored the failure status of file2lastrev.rb on 73da429c36c, but it
    was for an environment without BASERUBY. I think we should skip running
    file2lastrev.rb on HAVE_BASERUBY=no, and run it and check the status on
    HAVE_BASERUBY=yes.
    
    Otherwise we may have an ignored arbitrary error of file2lastrev.rb on
    HAVE_BASERUBY=yes environment.

commit f0d1dc5cee87dfb023cb43a2db9bcdef5a8dee8f
Author: Takashi Kokubun <takashikkbn@gmail.com>
Date:   2019-05-29 08:08:33 +0900

    Skip a reline test hanging on Wercker since 3b7862c8e8
    
    like https://app.wercker.com/ruby/ruby/runs/mjit-test1/5cedad11105780001c4e7001?step=5cedaf6b48fad200076fe77b

commit 67f75d5b4332f6bef2d1ea19803dc6092e6cbf3b
Author: Takashi Kokubun <takashikkbn@gmail.com>
Date:   2019-05-29 08:04:48 +0900

    Add TESTOPTS=-v for Wercker test-all --jit-wait
    
    because it's hard to identify which test causes a hang for now.

commit 8d837431709c004a0fcd0a9f7f811ced04a040d7
Author: aycabta <aycabta@gmail.com>
Date:   2019-05-29 06:53:18 +0900

    Use IO.copy_stream

commit a4a682c450164d1d4371e00a4f83429aa85d29ae
Author: aycabta <aycabta@gmail.com>
Date:   2019-05-29 06:11:24 +0900

    Check RUBY_YES_I_AM_NOT_A_NORMAL_USER env to access RubyVM doc

commit d341bb285768ae70bc8d251e577181c57322968c
Author: aycabta <aycabta@gmail.com>
Date:   2019-05-29 06:08:25 +0900

    IRB never show RubyVM's doc

commit d390af3686d640dd2aa54af51ed5c2a8e581a46e
Author: aycabta <aycabta@gmail.com>
Date:   2019-05-29 06:54:49 +0900

    Encode completed strings corecctly

commit 3e54ff67e6dc1c5882fc05392add09bc59c1afae
Author: Takashi Kokubun <takashikkbn@gmail.com>
Date:   2019-05-29 05:53:09 +0900

    Test BASERUBY: Ruby 1.9.3 on Travis
    
    We have no clear assertion or check of BASERUBY requirement.
    I want to make the current situation more explicit.
    
    I'm NOT saying we should support Ruby 1.9.3 here,
    but I'm just checking the situation as per 05bc14d81a1d7f6af826a92371aeff0c3fb2a67e.
    
    FYI, at this moment Ruby 1.8.7 did not work with this Travis config, like:
    https://travis-ci.org/k0kubun/ruby/builds/538459100

commit 91f5a8db593f9eef739517dc0067dae439934311
Author: Benoit Daloze <eregontp@gmail.com>
Date:   2019-05-29 06:15:57 +0900

    Update to ruby/spec@0c5c5c1

commit c67934b1c3b40dda5f170b032423e520511c68dd
Author: aycabta <aycabta@gmail.com>
Date:   2019-05-29 05:58:33 +0900

    Remove extra items because Reline::HISTORY is a sized queue

commit 3b7862c8e88cd7838a53ec083ac5733386400956
Author: aycabta <aycabta@gmail.com>
Date:   2019-05-29 05:53:14 +0900

    Use existing instances for LineEditor and Config

commit a66bc2c01194a9c017c874a30db5b3b6bd95e966
Author: Benoit Daloze <eregontp@gmail.com>
Date:   2019-05-29 05:41:48 +0900

    Update to ruby/spec@9a501a8

commit d070523e7be4b95914adeef9a10401fba7718c5a
Author: Takashi Kokubun <takashikkbn@gmail.com>
Date:   2019-05-29 05:27:53 +0900

    Drop unused Travis config: universal-darwin17
    
    This has been unused since b7f5c573ef20dbbf5534ee3a45625c7f9d45f2ec.

commit 462a63c39e7aa20253d6256077d298458c9ef7f3
Author: Takashi Kokubun <takashikkbn@gmail.com>
Date:   2019-05-29 05:09:59 +0900

    Drop MJIT debug code from GC.compact
    
    As ko1 added some improvements on GC.compact, I want to check if it
    solved the problem too.

commit abd556958d11321cf0a2991a86dc8b1a714fc79a
Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-05-29 00:07:07 +0900

    * 2019-05-29

commit c730c25354a18e99b9147c30ecc8f986d6a172f1
Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
Date:   2019-05-28 21:39:13 +0900

    parse.y: warn escaped whitespace
    
    * parse.y (warn_space_char_code): warn whitespace characters
      escaped with meta/control prefix.

commit fb568fe724b0c8b2582263ed859ad10f0bd90d38
Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
Date:   2019-05-28 23:46:07 +0900

    Added missing predicate macros

commit 8a2b497e3b8d9c9be27278081526cace50490140
Author: Koichi Sasada <ko1@atdot.net>
Date:   2019-05-28 15:57:20 +0900

    remove obsolete rb_gc_finalize_deferred().
    
    rb_gc_finalize_deferred() is remained for compatibility with
    C-extensions. However, this function is no longer working
    from Ruby 2.4 (crash with SEGV immediately).
    So remove it completely.

commit 2562b7d7cd6621970fed1ad72d87f8d23d50d398
Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
Date:   2019-05-28 11:08:53 +0900

    Unify RELINE_TEST_ENCODING setting

commit d5f408403f805b2ff616b9c43528d9fdffa3bf60
Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
Date:   2019-05-28 11:08:22 +0900

    Set read-only with attrib command

commit 62b3d4c721334108f89cd59407ffd910204e7868
Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
Date:   2019-05-28 14:36:29 +0900

    Skip following all digits after `@@`

commit 40e175b390f39afdddcfbf74afcad96093a158e7
Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
Date:   2019-05-28 14:20:42 +0900

    Clean a garbage [ci skip]

commit 05bc14d81a1d7f6af826a92371aeff0c3fb2a67e
Author: Jeremy Evans <code@jeremyevans.net>
Date:   2019-05-28 12:54:20 +0900

    Fix building with 1.8 BASERUBY

commit f3bddc103d6a9d6e679ab35d1d3e8ab7aa2f3ae4
Author: Koichi Sasada <ko1@atdot.net>
Date:   2019-05-28 11:42:31 +0900

    use malloc() instead of calloc().
    
    Here malloc() is enough because all elements of the page_list
    will be overwrite.

commit f9401d5d44dd4ae69b6a14fcccd41c2810033986
Author: Koichi Sasada <ko1@atdot.net>
Date:   2019-05-28 11:41:49 +0900

    should skip T_ZOMBIE here.

commit 2229acaa54e1011ae77710e10f8c9e7933403127
Author: Koichi Sasada <ko1@atdot.net>
Date:   2019-05-28 11:41:03 +0900

    should use heap_eden->total_pages.
    
    The size of page_list is heap_eden->total_pages, but
    init_cursors() assumes the size of page_list is `heap_allocated_pages`.
    This patch fix it.

commit 72333286c45ac821e227ad62d810a09a0208ecbb
Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
Date:   2019-05-28 11:38:13 +0900

    Fix typos in Ripper::Lexer#inspect and Ripper::Lexer#pretty_print

commit ccfb12d76ca58957cb95692594626169a97224b7
Author: aycabta <aycabta@gmail.com>
Date:   2019-05-28 11:02:44 +0900

    Fix condition..."and" is lowest priority operator, than "="

commit 7f211bfe6c5e4a763412406e5e257ea275ca53da
Author: Koichi Sasada <ko1@atdot.net>
Date:   2019-05-28 10:26:23 +0900

    use only eden_heaps on GC.compact.
    
    `heap_pages_sorted` includes eden and tomb pages, so we should not
    use tomb pages for GC.compact (or we should move all of tomb pages
    into eden pages). Now, I choose only eden pages. If we allow to
    move Zombie objects (objects waiting for finalizers), we should
    use both type of pages (TODO).

commit cfd839c140707852340a840e9e164e0f211fbb42
Author: Koichi Sasada <ko1@atdot.net>
Date:   2019-05-27 17:15:58 +0900

    Suppress warning (uninitialized variable).

commit fa7a768fdfe5223a29db4fa71b3e6101fb02ad51
Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
Date:   2019-05-28 10:23:21 +0900

    Removed inconsistency file from upstream repository of rubygems.
    
      followed up ae2a904ce9bffedee7d110dc60fd51c0a2879a5b

commit 165ddfda20f6db8a3149d14c4f431fc242ddab70
Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-05-28 10:07:55 +0900

    * remove trailing spaces.

commit ae2a904ce9bffedee7d110dc60fd51c0a2879a5b
Author: Yusuke Endoh <mame@ruby-lang.org>
Date:   2019-05-27 23:44:15 +0900

    Update the certificate files to make the test pass on Debian 10
    
    The old certificate files (for example, test/rubygems/ca_cert.pem) were
    signed by SHA1.  This message digest is considered too weak and rejected
    by OpenSSL 1.1.1 or later.  Because of this, the test suite does not
    pass on Debian 10.
    
    https://rubyci.org/logs/rubyci.s3.amazonaws.com/debian/ruby-master/log/20190527T123003Z.fail.html.gz#test%2Frubygems
    
    This change regenerates the files.
    A shell script for the regeneration (util/create_certs.sh) is also
    added.

commit cf904d9f9fb18fd2982651946125db62066c3ff5
Author: Takashi Kokubun <takashikkbn@gmail.com>
Date:   2019-05-28 10:02:30 +0900

    Avoid doubly building Travis and AppVeyor
    
    but on "master" branch.
    
    For Pull Request, I changed the approach from
    d9b338a53f520b2dbb05555f18b8de8072300f40 and
    277e68825a8e4d0e6503a32e41f8b1b6c078b567.

commit 1cdaa17a065c529354fa9bcb4a1f3001783900ef
Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
Date:   2019-05-28 08:44:28 +0900

    parse.y: numbered parameter symbol
    
    * parse.y (parse_atmark): numbered parameter name is not allowed
      as a symbol regardless the context.

commit 57b4df07bc1e863c48a3b0f4c3185de431454695
Author: aycabta <aycabta@gmail.com>
Date:   2019-05-28 08:38:55 +0900

    Use Reline.completer_quote_characters to complete

commit 74c88e7cda8640084077003ec00b004f9dd7ae73
Author: aycabta <aycabta@gmail.com>
Date:   2019-05-28 05:10:49 +0900

    Fix reversed row and column get_screen_size on Windows

commit f6b62d8fe77a474935ef3dee6bb20ca3cc4da602
Author: aycabta <aycabta@gmail.com>
Date:   2019-05-28 04:39:29 +0900

    Use Shift+Enter as Meta+Enter on Windows

commit 8b135cc8752abf89f2c11fb8760febb756348577
Author: aycabta <aycabta@gmail.com>
Date:   2019-05-28 04:25:50 +0900

    Use VK_MENU instead of VK_LMENU to check ALT on Windows

commit d5682eb9396c7813f50a1400f7e801d0058c6c6e
Author: aycabta <aycabta@gmail.com>
Date:   2019-05-28 03:25:31 +0900

    Remove unused variable from IRB::InputCompletor

commit 5e275dd2af4d9d24cdb1cfc0f232f348dae9c2cd
Author: aycabta <aycabta@gmail.com>
Date:   2019-05-28 03:23:52 +0900

    Treat :@1, :@@1, @1, and @@1 correctly to check termination

commit 7447c7b651d9074879429bb84dd73f8821521f27
Author: aycabta <aycabta@gmail.com>
Date:   2019-05-28 01:52:04 +0900

    Join next line if deletes newline at end of line

commit 69c7ad17235319c78766102068402ab9fcc9a5ca
Author: aycabta <aycabta@gmail.com>
Date:   2019-05-28 01:51:01 +0900

    Exit only when blank input

commit b2b5ed14104d2010ceae9fc81823bdcdc84b3bd7
Author: Kazuki Tsujimoto <kazuki@callcc.net>
Date:   2019-05-28 01:30:15 +0900

    Supress duplicated warning

commit 9a68aba79f8a3e144e6409988c2e17a5d3f11f26
Author: aycabta <aycabta@gmail.com>
Date:   2019-05-28 00:15:38 +0900

    Support OSC and treat \1 \2 correctly

commit 70166b3ca3eff9747d8c861b3a30e3ef96ffbb72
Author: aycabta <aycabta@gmail.com>
Date:   2019-05-28 00:20:43 +0900

    Revert "Support OSC and treat \1 \2 correctly"
    
    This reverts commit 77bfebebc44c5e46ebd156d074081846c037f882.

commit 11778fd246a7fe58c3edfa1dbdb87f62b1f36747
Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-05-28 00:20:24 +0900

    * 2019-05-28

commit 77bfebebc44c5e46ebd156d074081846c037f882
Author: aycabta <aycabta@gmail.com>
Date:   2019-05-28 00:15:38 +0900

    Support OSC and treat \1 \2 correctly

commit 8a2a5822caa7a9fc146d7de4db679986603d7a4f
Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
Date:   2019-05-27 19:59:17 +0900

    Colorize error part

commit b4365e75fd70618b79b3a71c1c13f202acd71368
Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
Date:   2019-05-27 19:58:15 +0900

    Do not make an incomplete escape a valid char

commit c40003da25543b0f828911af56108ee16af35236
Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
Date:   2019-05-27 19:20:11 +0900

    Ripper#token
    
    * parse.y (ripper_token): added Ripper#token which returns the
      current token string.  [EXPERIMENTAL]

commit b3602f1d20baa4e5f29b2baff2c265461af78f56
Author: Koichi Sasada <ko1@atdot.net>
Date:   2019-05-27 16:19:30 +0900

    check the object is in tomb_heap.

commit 35146c436820f35733982bac870e409c57888575
Author: Koichi Sasada <ko1@atdot.net>
Date:   2019-05-27 16:12:30 +0900

    add a space between type and others

commit b3a6469e46b3c9c10176b066e5076ddcc5f96939
Author: Koichi Sasada <ko1@atdot.net>
Date:   2019-05-27 16:09:47 +0900

    add a line break for each error message

commit 6c1a07555c7fb37a5cd36f08489d33d779b4d41b
Author: Koichi Sasada <ko1@atdot.net>
Date:   2019-05-27 14:50:26 +0900

    fix GC.verify_internal_consistency.
    
    Fix debug output to dump more useful information on GC.compact
    debugging.
    
    check_rvalue_consistency_force() now accepts `terminate` flag
    to terminate a program with rb_bug() or only print error message.
    GC.verify_internal_consistency use this flag (== FALSE) to dump
    all of debug output.

commit 61da57c76a9e32a4154dac8f24f9b860d65b320d
Author: Koichi Sasada <ko1@atdot.net>
Date:   2019-05-27 14:37:48 +0900

    is_pointer_to_heap() checks also tomb or not.
    
    is_pointer_to_heap(obj) checks this obj belong to a heap page.
    However, this function returns TRUE even if the page is tomb page.
    This is re-commit of [712c027524].
    
    heap_page_add_freeobj() should not use is_pointer_to_heap(), but
    should check more explicitly.

commit ea6e284d86ccbc2d1ed5637acd0940a12b58b672
Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
Date:   2019-05-27 12:22:11 +0900

    parse.y: removed "parser_" prefix from tokadd_utf8

commit af17e111b3f7cb3c5ad7dc194399b44d0e5004d0
Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
Date:   2019-05-27 11:57:48 +0900

    Added #inspect and #pretty_inspect to Ripper::Lexer::Elem

commit 43730256e800dd8e0c5cc482e9861868590ae037
Author: Yusuke Endoh <mame@ruby-lang.org>
Date:   2019-05-27 12:58:08 +0900

    open-uri: Regenerate server certificates for tests
    
    OpenSSL 1.1.1 requires 2048 bits or more.  This change will fix:
    https://rubyci.org/logs/rubyci.s3.amazonaws.com/debian/ruby-master/log/20190527T003004Z.fail.html.gz#test%2Fopen-uri

commit 4c277364a5e70983dcafc9b4d5d990414d61d264
Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
Date:   2019-05-27 11:47:09 +0900

    CSI allows empty digit which equals 0

commit 0aa9b003de353e690f31ba59ca0a2db1df51b8bf
Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
Date:   2019-05-27 11:05:51 +0900

    context.rb: hide wrapping lines
    
    * lib/irb/context.rb (IRB::Context#evaluate): separate the code
      from wrapping lines to propagate the given exception, not to show
      the wrapping lines when SyntaxError.

commit 9840f52c77a928479919e539d2e47ce36b5ede49
Author: aycabta <aycabta@gmail.com>
Date:   2019-05-27 10:18:09 +0900

    Use IRB::InputMethod#eof? to quit

commit 1d301acbe8e9b0df7872d6719d6646ade25630d6
Author: aycabta <aycabta@gmail.com>
Date:   2019-05-27 10:09:21 +0900

    Fix rendering bug of ^D

commit 9c136f3dea0c6052fefb377bf2c445daec1ca0b6
Author: aycabta <aycabta@gmail.com>
Date:   2019-05-27 08:39:39 +0900

    Move to next of last line by ^D

commit 4e2c7783e364f37a748fe0d3a3cd9f96e58287c0
Author: aycabta <aycabta@gmail.com>
Date:   2019-05-27 08:13:48 +0900

    Check blank history

commit 2805c55aa39bf6127e1e684deb0d5a0291cb6479
Author: aycabta <aycabta@gmail.com>
Date:   2019-05-27 07:35:35 +0900

    Move to next of last line by ^C

commit c49796c9301845e17bd2d5b254ce75d40c898d56
Author: aycabta <aycabta@gmail.com>
Date:   2019-05-27 07:00:06 +0900

    Reline should move to next line after finished in Readline mode

commit 29c16b30ce7655bf34ac59b1327ab13f83dc7970
Author: Sutou Kouhei <kou@clear-code.com>
Date:   2019-05-27 06:23:47 +0900

    Add support for history with Reline backend

commit 2c91c5b329796a0c7f3cda0296d7c6d6cd6aa8c6
Author: aycabta <aycabta@gmail.com>
Date:   2019-05-27 06:04:42 +0900

    Move to the other line when press <- at head or -> at tail

commit 716ba4a12732d94a50fb31bcaca4ce07bc4b6870
Author: aycabta <aycabta@gmail.com>
Date:   2019-05-27 05:45:08 +0900

    Implement J to join lines in vi command mode

commit 64dc21830aa60dc757df48c715a73f704eed43e0
Author: aycabta <aycabta@gmail.com>
Date:   2019-05-27 05:01:04 +0900

    Remove \1 and \2 that escape CSI before render

commit c6b7cad5c903fa957c274d233c15fdcb3e4a9623
Author: Takashi Kokubun <takashikkbn@gmail.com>
Date:   2019-05-27 04:19:59 +0900

    .azure-pipelines.yml: Add timeout to install dependencies
    
    to avoid cancelling overall build pipeline when stucking there.

commit 64ee8900c89444692c6a51f0153869cb634bb086
Author: Takashi Kokubun <takashikkbn@gmail.com>
Date:   2019-05-27 03:32:23 +0900

    Highlight global variable on IRB

commit 7597f7ecb18ae537002391f9feb7f0e689d3b87b
Author: Takashi Kokubun <takashikkbn@gmail.com>
Date:   2019-05-27 03:24:52 +0900

    Simplify lexer state matching in #dispatch_seq
    
    for improving readability of the condition. It may be slightly faster, or may not.

commit 5a6c77bbe8acd5929421c359bca57ef559a4f0fe
Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-05-27 03:10:15 +0900

    * expand tabs.

commit 39eadca76b48fc7841da688f6745e40897ec37ff
Author: Jeremy Evans <code@jeremyevans.net>
Date:   2019-04-06 16:02:11 +0900

    Add FrozenError#receiver
    
    Similar to NameError#receiver, this returns the object on which
    the modification was attempted.  This is useful as it can pinpoint
    exactly what is frozen.  In many cases when a FrozenError is
    raised, you cannot determine from the context which object is
    frozen that you attempted to modify.
    
    Users of the current rb_error_frozen C function will have to switch
    to using rb_error_frozen_object or the new rb_frozen_error_raise
    in order to set the receiver of the FrozenError.
    
    To allow the receiver to be set from Ruby, support an optional
    second argument to FrozenError#initialize.
    
    Implements [Feature #15751]

commit 897901283c79e5f5f33656abdd453dc272268748
Author: Takashi Kokubun <takashikkbn@gmail.com>
Date:   2019-05-27 02:29:20 +0900

    Refactor IRB color dispatch
    
    The reason why we were checking lexer state in addition to token was
    that we do not want to colorize local variable, method call, etc., while
    they share the :on_ident token with a name of method definition which
    should be colored as blue.
    
    It means that we're concerned about the lexer state only for :on_ident.
    Thus we can skip checking lexer state for non-:on_ident tokens. This
    refactoring is based on that idea.
    
    Also, now we manage Ripper's lexer state as Integer (use `|` if you
    need to check multiple states). It should be faster than using Array of
    Integer because #any? block call is not needed.

commit e73a68ebc322516a42821f502d6d5de5bfa1eb47
Author: aycabta <aycabta@gmail.com>
Date:   2019-05-27 02:59:21 +0900

    Support op, cvar, iver, gvar and kw that follow on symbeg in IRB

commit 122679136820afc663b854567afd16e49eae5a96
Author: aycabta <aycabta@gmail.com>
Date:   2019-05-27 02:55:37 +0900

    Support :@@cvar and : on colorize

commit e50aa359de2a419c0a04eaee84a095f602e1ccb1
Author: Takashi Kokubun <takashikkbn@gmail.com>
Date:   2019-05-27 02:22:57 +0900

    Make the imaginary color on IRB close to pry
    
    and sorted the token names alphabetically.

commit 60cc03ffe7a4b67300b0b547dfa4ddaaa894ece6
Author: aycabta <aycabta@gmail.com>
Date:   2019-05-27 02:13:27 +0900

    Fix indexes in comments of vi_insert.rb
    
    Previous fix was 2993b361333147f6dfb86a153971c22329ffbaf4.

commit 0f35c79ad6bcf409851049639d7200ce7f9787fb
Author: aycabta <aycabta@gmail.com>
Date:   2019-05-27 01:59:17 +0900

    Fix number literal regexp of IRB completion

commit e39c950c2bcb8f77f12f841a7acc13b12402ee5a
Author: aycabta <aycabta@gmail.com>
Date:   2019-05-27 01:24:03 +0900

    Use correctly RI output in IRB completion

commit 2a7821b28964ba9d71d8714554502a02fabe3781
Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-05-27 00:45:50 +0900

    * 2019-05-27

commit a43c637660cd3c893401e899014d721d2fa2a5b4
Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
Date:   2019-05-27 00:07:05 +0900

    parse.y: broke the terminator condition down
    
    * parse.y (here_document): broke the terminator condition down
      into each piece, the positional condition, resetting the
      dedented here-document indentation, and matching identifier.
      suppress a false warning by icc.

commit 4f2a7b800110346292890e3bed41b37f3f58ab0b
Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
Date:   2019-05-26 23:44:57 +0900

    Colorize imaginary and rational literals

commit 23270f6fee88668a5099fa16eb48739fba2d9dd6
Author: Takashi Kokubun <takashikkbn@gmail.com>
Date:   2019-05-26 22:29:30 +0900

    azure-pipelines.yml: Do not notify vs2017 failure
    
    It has not been stable recently. Let's stop notifying them for now.

commit 2ce6365f9ccd93e8129252429391118f794f5e0b
Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
Date:   2019-05-26 18:45:59 +0900

    parse.y: adjust error indicator
    
    * parse.y (parser_yylex): adjust the error indicator of unexpected
      fraction part.
    
    before:
    ~~~
    1.2.3
    ^~~
    ~~~
    
    after:
    ~~~
    1.2.3
       ^~
    ~~~

commit 58308899151ee3d49f8d9ef5c4e8d108d8822525
Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
Date:   2019-05-26 18:24:06 +0900

    test/ruby/test_notimp.rb: Use EnvUtil.timeout for timeout scale factor

commit 2df2cdcff0b0358ebc98a43181b5271632563a68
Author: Yusuke Endoh <mame@ruby-lang.org>
Date:   2019-05-26 17:25:16 +0900

    test/ruby/test_process.rb: Use EnvUtil.timeout for timeout scale factor
    
    https://rubyci.org/logs/rubyci.s3.amazonaws.com/solaris11s-sunc/ruby-master/log/20190526T052508Z.fail.html.gz

commit 4668a3a9da9f02b073631013e71722868ceafa53
Author: Yusuke Endoh <mame@ruby-lang.org>
Date:   2019-05-26 17:19:46 +0900

    test/lib/envutil.rb (EnvUtil.timeout): added.
    
    It is a wrapper for Timeout.timeout with the scale factor applied.

commit 02b39daef834890981689f1f697c7c25cad55dd6
Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
Date:   2019-05-26 11:33:40 +0900

    Fix scanner event at invalid syntax
    
    * parse.y (parser_yyerror, parser_compile_error): revert
      r67224 (e5d10cda07b23682e5e4e64d1324e4d3247d4785) "Flush erred
      token".

commit f20af9543f278ab602d001dace850dcf4411cfa6
Author: Yusuke Endoh <mame@ruby-lang.org>
Date:   2019-05-26 15:23:21 +0900

    test/rubygems/test_gem_stream_ui.rb (test_ask): extend the timeout
    
    for Solaris.
    
    https://rubyci.org/logs/rubyci.s3.amazonaws.com/unstable10s/ruby-master/log/20190525T211908Z.fail.html.gz

commit aaf6c678d272d4487179b7ae0b03990ac6b2aff5
Author: Takashi Kokubun <takashikkbn@gmail.com>
Date:   2019-05-26 14:32:28 +0900

    Handle keyword symbol in IRB::Color::SymbolState

commit 52b09fcee1b170ad3be7d26b885b8a509c7ba006
Author: Takashi Kokubun <takashikkbn@gmail.com>
Date:   2019-05-26 14:29:16 +0900

    Deal with more syntax highlight edge cases
    
    Please refer to the tests again.

commit 8aba3b7a04738c8cebcf3d4ecacd57199d976ae2
Author: Takashi Kokubun <takashikkbn@gmail.com>
Date:   2019-05-26 13:39:11 +0900

    Fix more unintended syntax highlights
    
    See tests for what kind of things are fixed.

commit 13f58eccdab374ab14d33a6882c52e048cb52e3c
Author: Takashi Kokubun <takashikkbn@gmail.com>
Date:   2019-05-26 12:47:29 +0900

    Always color Symbol as Yellow on IRB::Color
    
    Symbol color was made blue as a workaround because it was hard to
    distinguish `foo`s in `:foo` and `def foo; end` (both are :on_ident).
    But I wanted to make it yellow like pry.
    
    `:Struct` had the same problem in :on_const. Because the :on_const was
    also blue (but underlined and bold), it was not a big issue.
    
    While they're not so problematic since we got a workaround, we also had
    a more serious issue for highlighting a symbol like `:"a#{b}c"`.
    The first half was considered as Symbol and the last half was considered
    as String, because the colorizer did not have a state like a parser.
    
    To approach the last issue, I introduced `IRB::Color::SymbolState` which
    is a thin state manager knowing only "the token is Symbol or not". Having
    this module magically solves the first two problems as well. So now we
    can highlight Symbol as yellow in the perfect manner.

commit a516834b47de810b53241c66f677fafd4485bebd
Author: Yusuke Endoh <mame@ruby-lang.org>
Date:   2019-05-26 09:48:38 +0900

    test/ruby/test_rubyoptions.rb (test_script_from_stdin): scale timeout
    
    for Solaris.
    
    https://rubyci.org/logs/rubyci.s3.amazonaws.com/unstable10s/ruby-master/log/20190525T131909Z.fail.html.gz

commit 208ed56e575b83c47d5cc2e48efd6807bb661bdd
Author: Takashi Kokubun <takashikkbn@gmail.com>
Date:   2019-05-26 05:54:03 +0900

    Colorize empty embexpr more on IRB::Color

commit ec759011201ce16db7079dbc26ae9c085c2608ba
Author: aycabta <aycabta@gmail.com>
Date:   2019-05-26 01:32:12 +0900

    Fix completion menu state calculation

commit 2993b361333147f6dfb86a153971c22329ffbaf4
Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
Date:   2019-05-26 00:48:26 +0900

    Fix indexes in comments

commit 98be203704e98c53b2d3b939b10a0d765c76d53d
Author: Takashi Kokubun <takashikkbn@gmail.com>
Date:   2019-05-26 00:01:51 +0900

    Support some unhandled syntax highlight
    
    Heredoc, %i, :Foo, { 'a': ... }, ...
    
    :'a' is still half-broken.

commit a4d44b08ec5139f91617f0fc5786494c5076aaa1
Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-05-26 00:00:56 +0900

    * 2019-05-26

commit d9c41f2dec7af7f44b4545f4111498c8af3569fe
Author: aycabta <aycabta@gmail.com>
Date:   2019-05-26 00:00:03 +0900

    Use Reline.completer_word_break_characters to complete

commit ada64aa9e7f1e087b9fd536d9bc512de401f42a0
Author: Takashi Kokubun <takashikkbn@gmail.com>
Date:   2019-05-25 23:48:58 +0900

    Clear IRB::Color escape sequence before newline
    
    because otherwise prompt and other things could be polluted.

commit 7c507345a73afe3f599e407e851b9c0d708adeb0
Author: Takashi Kokubun <takashikkbn@gmail.com>
Date:   2019-05-25 23:21:37 +0900

    Build trunk branch too to trigger AppVeyor on PR

commit be851692cec43470aceed23ff40c198deb4d4680
Author: Takashi Kokubun <takashikkbn@gmail.com>
Date:   2019-05-25 23:21:45 +0900

    Build trunk branch too to trigger Travis on PR

commit e2db9f4cc35dacdca1c0d1f1ae79772dae093c34
Author: Takashi Kokubun <takashikkbn@gmail.com>
Date:   2019-05-25 22:52:10 +0900

    Add and use Reline::Unicode.escape_for_print

commit e691b4da5d1d70216be3e8853d18bcb6a62a617c
Author: Takashi Kokubun <takashikkbn@gmail.com>
Date:   2019-05-25 22:31:13 +0900

    Respect --nocolorize on REPL source highlight

commit 65ce14e7b5f66a92f452136290357eb3df147e5b
Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
Date:   2019-05-25 17:20:31 +0900

    Added --with-rdoc option
    
    New option to direct formats of RDoc to install.

commit 4fae3c3fb0847ba8eccb61b3c0cc0ae874c17cf0
Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
Date:   2019-05-25 16:56:26 +0900

    Show doc list to install
    
    Show document format list to install, not only enabled or disable.

commit 8fd3b9fc5f0f0ef031c54982236b6da327b81458
Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
Date:   2019-05-25 16:53:20 +0900

    Force update all RDoc at install
    
    RDoc needs to parse all files at once for the cross-reference.

commit 061c781a09de68c7e34e45732081aac337c4facc
Author: Takashi Kokubun <takashikkbn@gmail.com>
Date:   2019-05-25 16:38:18 +0900

    Drop method obsoleted by b83119be9e9a8611063142541993e4823a025622
    
    We might need to do the same thing in IRB::Color now, but I'm not doing
    that as I assume ANSI escape sequence does not come from a user input
    though Reline.

commit b83119be9e9a8611063142541993e4823a025622
Author: Takashi Kokubun <takashikkbn@gmail.com>
Date:   2019-05-25 13:21:22 +0900

    Incremental syntax highlight for IRB source lines
    
    Closes: https://github.com/ruby/ruby/pull/2202

commit 3c6e1a8cf911d312edeb9dfcc9153be68867ca4f
Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
Date:   2019-05-25 11:28:07 +0900

    Avoid to show warning message with unused variable.

commit 7686e33ee453d43210afcf90fef8fc613dede31c
Author: aycabta <aycabta@gmail.com>
Date:   2019-05-25 10:36:30 +0900

    JSON like label ends by differs from the start
    
    pp Ripper.lex('{ "a": 3 }')
     =>
    [[[1, 0], :on_lbrace, "{", EXPR_BEG|EXPR_LABEL],
     [[1, 1], :on_sp, " ", EXPR_BEG|EXPR_LABEL],
     [[1, 2], :on_tstring_beg, "\"", EXPR_BEG|EXPR_LABEL],
     [[1, 3], :on_tstring_content, "a", EXPR_BEG|EXPR_LABEL],
     [[1, 4], :on_label_end, "\":", EXPR_BEG|EXPR_LABEL],
     [[1, 6], :on_sp, " ", EXPR_BEG|EXPR_LABEL],
     [[1, 7], :on_int, "3", EXPR_END],
     [[1, 8], :on_sp, " ", EXPR_END],
     [[1, 9], :on_rbrace, "}", EXPR_END]]

commit 809ac9f2eaa0b9cf818f571f6febcee6785cc8e2
Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-05-25 09:51:27 +0900

    * expand tabs.

commit 1ef39d8d099f145222b9352423af16a2bab6e05b
Author: Jeremy Evans <code@jeremyevans.net>
Date:   2019-05-25 08:34:34 +0900

    Fix process not waking up on signals on OpenBSD
    
    When using UBF_TIMER_PTHREAD (the UBF handler on OpenBSD), the
    timer_pthread_fn function will not signal the main thread with
    SIGVTALRM in cases where timer_pthread is armed before
    consume_communication_pipe is called.  This is because
    consume_communication_pipe will unarm the timer.
    
    Fix this by checking the return value of consume_communication_pipe.
    If it returns TRUE and the timer_pthread is disarmed, then signal
    the main thread with SIGVTALRM.
    
    On OpenBSD, this fixes TestThread#test_thread_timer_and_interrupt, and
    fixes hangs in TestProcess#test_execopts_redirect_open_fifo_interrupt_raise
    and TestProcess#test_execopts_redirect_open_fifo_interrupt_print.
    It also fixes the use of Ctrl+C/SIGINT in irb on OpenBSD. It does not
    cause any test failures on Linux when UBF_TIMER_PTHREAD is forced as
    the UBF handler.
    
    Fixes [Bug #15798]

commit 19430b776c3ebae1adfdc5cbe6cdf69a92e37253
Author: aycabta <aycabta@gmail.com>
Date:   2019-05-25 08:24:41 +0900

    Fix wrong variable name

commit 822468307b1a54eccd2711300008a3974c15141e
Author: aycabta <aycabta@gmail.com>
Date:   2019-05-25 08:08:54 +0900

    Add round-robin variable

commit 559dca509d2a98584b09c7d9a6d74749ce793ad7
Author: aycabta <aycabta@gmail.com>
Date:   2019-04-28 07:47:33 +0900

    Show documents when completion

commit 260235ce871c3e7718af8d612f1a8ed400b56070
Author: aycabta <aycabta@gmail.com>
Date:   2019-04-28 06:37:39 +0900

    Use Reline as Reidline multiline editor in IRB

commit ff43b2262702e828e2008ba65e68b331d263e3d0
Author: aycabta <aycabta@gmail.com>
Date:   2019-05-25 02:13:14 +0900

    Enter key always means evaluate in Reline#readmultiline

commit 637ee7ee3853387b4f34aa350471692f1778693d
Author: aycabta <aycabta@gmail.com>
Date:   2019-05-25 01:13:02 +0900

    Fix C-v C-j

commit 27bab6a569389e743f09dd52c58d8d127eaa7772
Author: aycabta <aycabta@gmail.com>
Date:   2019-05-25 00:44:09 +0900

    Revert "Change Reline's version with "Reline 0.0.0""
    
    This reverts commit 481ccf73d88797914f700e6e27711bf1ce997eb0.

commit 481ccf73d88797914f700e6e27711bf1ce997eb0
Author: aycabta <aycabta@gmail.com>
Date:   2019-05-25 00:40:14 +0900

    Change Reline's version with "Reline 0.0.0"

commit 4b012c23b282f48161718392cde8dc637f734623
Author: aycabta <aycabta@gmail.com>
Date:   2019-05-25 00:38:57 +0900

    Check block in #readmultiline

commit b2150548001c412ad424251904d6ece1a80e55f4
Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-05-25 00:25:42 +0900

    * 2019-05-25

commit eb4e774711b17b8a25a7b16c4f0b6044da3dc261
Author: aycabta <aycabta@gmail.com>
Date:   2019-05-24 23:38:40 +0900

    Support Meta key in Reline

commit 2d34087a38ac680c5576a56fbf4104c3561b0204
Author: Benoit Daloze <eregontp@gmail.com>
Date:   2019-05-24 21:48:10 +0900

    Add notes for the Process#clock_getres spec

commit 4541d2effe1f32e74d27602b44aff12cbf6937aa
Author: Benoit Daloze <eregontp@gmail.com>
Date:   2019-05-24 21:29:47 +0900

    Only exclude the failing clocks for Process.clock_getres specs on AIX
    
    * https://rubyci.org/logs/rubyci.s3.amazonaws.com/aix71_ppc/ruby-trunk/log/20190522T103301Z.fail.html.gz

commit 706c816ad270d981c37894b78ac49cdf1d7cf350
Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
Date:   2019-05-24 19:01:39 +0900

    Escape dots in regexp

commit a4da223c9a37e2384086f4306571ff0a753fa844
Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-05-24 19:00:50 +0900

    * expand tabs.

commit 6ae9d5c85f3a2a7002b8fc0525e3aca645ec1709
Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
Date:   2019-05-24 18:59:58 +0900

    Revert "check it in eden or tomb."
    
    This reverts commit 712c027524e3a03500b3098d950fc2f0608ce897.

commit c06f9e1d24e0e164506c6b5946a02814319485cc
Author: Martin Dürst <duerst@it.aoyama.ac.jp>
Date:   2019-05-24 18:22:36 +0900

    switch UNICODE_BETA to NO (one more try, first try didn't work)
    
        Unicode version 12.1.0 was officially released on May 7th, 2019.
        There were no changes at all from the "real" beta
        published shortly after the new era name "Reiwa" was announced.
        So we can switch UNICODE_BETA back to NO.
    
        common.mk: switch UNICODE_BETA back to NO
        tool/downloader.rb: add additional conditions to avoid an error
                            when moving from beta to final

commit b0a4d81fc3c9195f7462a096a50e857669c47918
Author: Koichi Sasada <ko1@atdot.net>
Date:   2019-05-24 17:52:58 +0900

    check RVALUE on verifier.
    
    GC.verify_internal_consistency() checks health of each RVALUE with
    check_rvalue_consistency(). However, this function is enabled
    only on debug environment (RGENGC_CHECK_MODE>1). So introduce
    new function check_rvalue_consistency_force() and use it
    in GC.verify_internal_consistency.

commit 712c027524e3a03500b3098d950fc2f0608ce897
Author: Koichi Sasada <ko1@atdot.net>
Date:   2019-05-24 17:35:22 +0900

    check it in eden or tomb.
    
    is_pointer_to_heap() checks if it is in valid pointer to the
    RVALUE in any heap_page_body. However, it returns true if it
    points tomb pages. This patch check it points to eden pages.

commit 10927b59256aeb196d164e8a8e75180a72768e97
Author: Koichi Sasada <ko1@atdot.net>
Date:   2019-05-24 17:06:43 +0900

    add separation char on rb_obj_info(imemo obj)

commit 2893550452f6f3cadb17c670da185813d7d0a835
Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
Date:   2019-05-24 16:10:59 +0900

    Mixed encoding error can continue to parse

commit 45ad375acccca2bb0852613b1e809a7af556f5e6
Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
Date:   2019-05-24 16:10:10 +0900

    [DOC] Use Rational literals than to_r in examples

commit 1a4080cb0ade6c700ce763d4290e5b56635d1bc8
Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
Date:   2019-05-24 15:07:38 +0900

    Hoisted out ndigits_denominator
    
    * time.c (ndigits_denominator): calculate the denominator for
      digits.

commit 54d5b599e850c08f92581645c56e4f5ccf20eb45
Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
Date:   2019-05-24 14:31:53 +0900

    Fix typos [ci skip]

commit 25415780964f2a104523318f3ceef389bfae6e94
Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
Date:   2019-05-24 00:47:03 +0900

    Add leaked-globals to .travis.yml

commit 491d2b8063d1f4e1c9e8fe0a57ff66fbfdf7d622
Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
Date:   2019-05-24 14:25:46 +0900

    Removed symlinks by in-place build [Bug #15870]

commit 14778125b12b80f1ebb0474f0360204f6b3abae5
Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
Date:   2019-05-24 14:24:38 +0900

    Removed and ignore symlinks by in-place build [Bug #15870]

commit e713c2bde8117f3aaf39d827d3fc504cd5866976
Author: Martin Dürst <duerst@it.aoyama.ac.jp>
Date:   2019-05-12 16:21:24 +0900

    switch UNICODE_BETA to NO
    
    Unicode version 12.1.0 was officially released on May 7th, 2019.
    There were no changes at all from the "real" beta published shortly
    after the new era name "Reiwa" was announced. So we can switch
    UNICODE_BETA back to NO.
    
    common.mk: switch UNICODE_BETA back to NO
    tool/downloader.rb: add additional conditions to avoid an error
                        when moving from beta to final

commit 35caedc828667363413c7fbe4a4cc60758c426a2
Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
Date:   2019-05-24 14:11:00 +0900

    --autostash is since Git 2.6 [Bug #15871]

commit dfc21a0467d39af00666aec5098530529924cf48
Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
Date:   2019-05-24 12:23:26 +0900

    Ignore generated files by in-place build [Bug #15870]

commit 7f2f56b2f51269f42f822ecf346375b040267595
Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
Date:   2019-05-24 12:22:17 +0900

    Define GITPULLOPTION to rebase [Bug #15871]

commit 50e993d4e347bd3e821c4996cc745fa0aa74bd64
Author: Yusuke Endoh <mame@ruby-lang.org>
Date:   2019-05-24 12:17:05 +0900

    Skip the Process.clock_getres spec on AIX
    
    https://rubyci.org/logs/rubyci.s3.amazonaws.com/aix71_ppc/ruby-trunk/log/20190522T103301Z.fail.html.gz

commit 498113d5d39a4227c2b9a9c11bea895fe316e6b9
Author: Yusuke Endoh <mame@ruby-lang.org>
Date:   2019-05-24 11:20:12 +0900

    test/ruby/test_gc.rb (test_gc_stress_at_startup): extend time timeout
    
    It fails on some CI environments.
    https://rubyci.org/logs/rubyci.s3.amazonaws.com/debian8/ruby-trunk/log/20190524T003006Z.fail.html.gz
    https://rubyci.org/logs/rubyci.s3.amazonaws.com/unstable11s/ruby-trunk/log/20190523T002505Z.fail.html.gz

commit 1ee1e8fccdec8de86799db02d6f62ba3d064ba1e
Author: Takashi Kokubun <takashikkbn@gmail.com>
Date:   2019-05-24 01:03:23 +0900

    Test GC.compact with MJIT again

commit dde8ceaf709abca1e3af63739de65d2809691878
Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-05-24 00:42:54 +0900

    * 2019-05-24

commit 187ef00a41ca28a26ffa0a9399c48335578590bb
Author: Takashi Kokubun <takashikkbn@gmail.com>
Date:   2019-05-24 00:41:18 +0900

    wercker.yml: Commit MJIT debug logs to another repository
    
    because too-large Wercker output is truncated.
    
    ruby/mjit-debug is a private repository for now, because the person
    fixing it is likely to be me or another committer.

commit 4fe908c1643c3f355edd787bb651aefb53b996c0
Author: Takashi Kokubun <takashikkbn@gmail.com>
Date:   2019-05-23 23:53:41 +0900

    gc.c: Try pausing MJIT worker during GC.verify_compaction_references
    
    for debugging
    http://ci.rvm.jp/results/trunk-mjit-wait@silicon-docker/2048247

commit c04ef141d2edd71f90f0707889b4adfd94e5be43
Author: Yusuke Endoh <mame@ruby-lang.org>
Date:   2019-05-23 23:34:18 +0900

    enum.c (enum_tally): better example in rdoc

commit e72769ef81a933959f4a85ee09eec66bedcbf022
Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
Date:   2019-05-23 23:24:22 +0900

    Enumerable#filter_map in NEWS

commit ccb165292962f42edbfc72cbf6b49a9ea8a319c9
Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
Date:   2019-05-23 22:47:55 +0900

    New Time methods in NEWS

commit 0b4d51b055ad2806719b1f4a3eca5c1bbce64631
Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-05-23 22:39:54 +0900

    * expand tabs.

commit f5415a95ce1d393a3fd1d7f657ba85d85171356a
Author: manga_osyo <manga.osyo@gmail.com>
Date:   2019-03-16 14:42:24 +0900

    Add `Time#ceil`.
    
    Closes: https://github.com/ruby/ruby/pull/2133

commit fe3ff5afb07e171fd950623c69abfbabbb2762a3
Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
Date:   2019-05-23 17:27:24 +0900

    Suppress paranoid warnings for external/3rd-party libraries
    
    [Feature #15665]

commit dc95b57a68da6999ce6a1542b3ad81c51429cc99
Author: Koichi Sasada <ko1@atdot.net>
Date:   2019-05-23 17:30:53 +0900

    add verifier before compact

commit 878a06efecbd2d71bf1a852a6367fbcd3e8edf93
Author: Urabe, Shyouhei <shyouhei@ruby-lang.org>
Date:   2019-05-23 17:24:15 +0900

    add comments [ci skip]
    
    Also requested by Ko1.

commit 763989c6c5a553fa072208e53707813fbde916d0
Author: Urabe, Shyouhei <shyouhei@ruby-lang.org>
Date:   2019-05-23 17:02:07 +0900

    prefix ASAN related inline functions asan_
    
    requested by Ko1.

commit 8fce83339b6a862001c4fbad6bcd72dc3efee136
Author: Urabe, Shyouhei <shyouhei@ruby-lang.org>
Date:   2019-05-23 16:55:20 +0900

    disable _FORTIFY_SOURCE
    
    Sanitizers and fortifications do not interface, and there is currently
    no plan for them to work together.
    
    See also https://github.com/google/sanitizers/issues/247

commit 6be0ab73c3f2cc95d76ca21203adf6a73c8705e7
Author: Koichi Sasada <ko1@atdot.net>
Date:   2019-05-23 16:52:14 +0900

    gc_pin() doesn't check is_markable_object().
    
    Caller of gc_pin() should check it is a mark-able object.
    So gc_pin() doesn't need to check it. With this fix,
    we can refactoring around it.

commit 65637dae30bda83b72f185bbcf01d7bad80926c7
Author: Takashi Kokubun <takashikkbn@gmail.com>
Date:   2019-05-23 16:07:16 +0900

    Test GC.compact on MJIT again

commit c5cbabf8a8aa42b7dcf943c64274489286174108
Author: NAKAMURA Usaku <usa@ruby-lang.org>
Date:   2019-05-23 15:33:40 +0900

    Use colorized IRB on Windows without checking `TERM`

commit 0acbdd1ed0d2302743525a5188cc5a0d6251680c
Author: Alfonso Jiménez <me@alfie.cat>
Date:   2018-11-20 19:51:08 +0900

    Adding Enumerable#filter_map
    
    [Feature #15323]
    Closes: https://github.com/ruby/ruby/pull/2017

commit 1ccc2eeba08c370d84474357771f0bd7c5fe7f16
Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
Date:   2019-05-19 16:24:33 +0900

    Pretend to update all Unicode files

commit c05eaa93258ddc01e685b6cc3a0da82998a2af48
Author: Jeremy Evans <code@jeremyevans.net>
Date:   2019-05-15 14:04:46 +0900

    Fix mixed encoding in heredoc
    
    Heredocs are parsed line-by-line, so we need to keep track of the
    temporary encoding of the string.  Previously, a heredoc would
    only detect mixed encoding errors if they were on the same line,
    this changes things so they will be caught on different lines.
    
    Fixes [Bug #15839]

commit f91b1ab33d397fdcdf452d563d7f59469a078d88
Author: Jeremy Evans <code@jeremyevans.net>
Date:   2019-05-16 13:08:49 +0900

    Skip assertion in readline test if Readline version is 4.3
    
    Previously, the entire method was not run for Readline 4.3, probably
    because it was known to fail. Commit
    c754e979d3eeca51f1b13778f19f347df3da656e removed the check for
    Readline 4.3.  Other than this one assertion, which also doesn't
    work when using Reline, the method runs correctly when using
    Readline 4.3.
    
    Fixes [Bug #15853].

commit 4814f173615f8f9f2f3429fe788089479490fe10
Author: Koichi Sasada <ko1@atdot.net>
Date:   2019-05-23 13:21:40 +0900

    skip zombies.
    
    rb_gc() no longer invokes finalizers, so there are T_ZOMBE objects.

commit 02973d3ba8020f494ad2d627284f9bc45db48f9c
Author: Koichi Sasada <ko1@atdot.net>
Date:   2019-05-23 11:42:15 +0900

    pin `maybe` pointers.
    
    Objects pointed by "maybe" pointers because of conservative marking
    should be pinned down.

commit 136ae55892ae120bb94e4ff2d025c745fdaa1091
Author: Koichi Sasada <ko1@atdot.net>
Date:   2019-05-23 11:21:16 +0900

    Do not kick finalizers on rb_gc().
    
    rb_gc() kicks gc_finalize_deferred(), which invokes finalizers.
    This means that any Ruby program can be run this point and
    it may be thread switching points and so on.
    
    However, it is difficult to think it invokes any Ruby programs.
    For example, `GC.compact` use `rb_gc()` to implement it, howver,
    any Ruby program must not be run on this timing.
    
    For this reason (it is difficult to image it run any Ruby program),
    I removed `gc_finalize_deferred()` line in rb_gc().
    
    This patch solves GC.compact issue.
    [Bug #15809] and re-enable GC.compact test.

commit 0eff21af8d03a9d2b881b9cce963262da3d952dc
Author: Koichi Sasada <ko1@atdot.net>
Date:   2019-05-23 11:19:23 +0900

    update Array's length correctly.
    
    ARRAY_ASET() does not change the length of array, so
    use rb_ary_push() instead of ARRAY_ASET(). It prevents
    updating reference on GC.compact.

commit bb29ed6e336d26f25722f356e83a027394008443
Author: aycabta <aycabta@gmail.com>
Date:   2019-05-23 08:33:20 +0900

    C-v C-j means an newline insertion

commit da3fabc976fb88c77e8b3446f2f0bc005e64056f
Author: aycabta <aycabta@gmail.com>
Date:   2019-05-23 08:23:22 +0900

    Change behavior to confirm multiline termination
    
    Always checks termination if you press Enter at last line.

commit c210c68d393b76149f02dc1f8b610269a53d94bc
Author: Takashi Kokubun <takashikkbn@gmail.com>
Date:   2019-05-23 03:14:54 +0900

    Revert "Revert CI deduplication on Wercker / Azure for debugging"
    
    This reverts commit 1ebe9a2f82fef5190454e68d430004282f5da172.
    
    because it did not help.

commit 1ebe9a2f82fef5190454e68d430004282f5da172
Author: Takashi Kokubun <takashikkbn@gmail.com>
Date:   2019-05-23 01:58:57 +0900

    Revert CI deduplication on Wercker / Azure for debugging
    
    CI seems to have a weired behavior now. Debugging.
    
    Revert "azure-pipelines.yml: Fix typo"
    
    This reverts commit f69d28fbca1eec8b9722cea1f989ee9554e8dad5.
    
    Revert "azure-pipelines.yml: Use simpler trigger syntax"
    
    This reverts commit 709756d89747bd36664593eda4156a7bf5ad7631.
    
    Revert "azure-pipelines.yml: Do not run CI on trunk"
    
    This reverts commit bec877b46fd4d0f621a75591b519a7e266eaa89b.
    
    Revert "appveyor.yml: Do not doubly run CI on trunk"
    
    This reverts commit d9b338a53f520b2dbb05555f18b8de8072300f40.

commit 00f7e424516a6c5ea58ddb3cc821d3cabe9c496c
Author: Yusuke Endoh <mame@ruby-lang.org>
Date:   2019-05-23 01:46:21 +0900

    spec/ruby/core/hash/constructor_spec.rb: add "ruby_version_is" guard
    
    follow up for d3f1c615c5

commit a093c98ddc92d8b0a341233630aea8f778188c7e
Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
Date:   2019-05-23 01:39:04 +0900

    Fallback RUBY_FULL_REVISION if not defined

commit f69d28fbca1eec8b9722cea1f989ee9554e8dad5
Author: Takashi Kokubun <takashikkbn@gmail.com>
Date:   2019-05-23 01:18:30 +0900

    azure-pipelines.yml: Fix typo

commit 709756d89747bd36664593eda4156a7bf5ad7631
Author: Takashi Kokubun <takashikkbn@gmail.com>
Date:   2019-05-23 01:17:26 +0900

    azure-pipelines.yml: Use simpler trigger syntax

commit bec877b46fd4d0f621a75591b519a7e266eaa89b
Author: Takashi Kokubun <takashikkbn@gmail.com>
Date:   2019-05-23 01:13:13 +0900

    azure-pipelines.yml: Do not run CI on trunk

commit b80adde359f82085db9065a9c06af5ee8f937c34
Author: Takashi Kokubun <takashikkbn@gmail.com>
Date:   2019-05-23 01:07:16 +0900

    wercker.yml: Notify master branch instead of trunk

commit 9d39eb6b40966deeeaa23c28f0be640c56545644
Author: Yusuke Endoh <mame@ruby-lang.org>
Date:   2019-05-23 00:45:30 +0900

    range.c (inspect_range): omit beginless "nil"
    
    except the special case `(nil..nil)`.
    
    ```
    (1..).inspect      #=> "1.."
    (..5).inspect      #=> "..5"
    (nil..nil).inspect #=> "nil..nil"
    ```
    
    [Bug #15745]

commit d9b338a53f520b2dbb05555f18b8de8072300f40
Author: Takashi Kokubun <takashikkbn@gmail.com>
Date:   2019-05-23 00:40:09 +0900

    appveyor.yml: Do not doubly run CI on trunk

commit 277e68825a8e4d0e6503a32e41f8b1b6c078b567
Author: Takashi Kokubun <takashikkbn@gmail.com>
Date:   2019-05-23 00:33:44 +0900

    .travis.yml: Test master branch instead of trunk

commit d3f1c615c5b81319e422e9c92e1cb8ba82209fba
Author: Yusuke Endoh <mame@ruby-lang.org>
Date:   2019-05-23 00:15:55 +0900

    hash.c (rb_hash_s_create): Reject `Hash[[nil]]`
    
    The behavior of `Hash[[nil]] #=> {}` was a bug until 1.9.3, but had been
    remained with a warning because some programs depended upon it.
    Now, six years passed.  We can remove the compatibility behavior.
    [Bug #7300]

commit 4d62296948c36615e73b99d592253256d0ea0d4a
Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-05-23 00:15:54 +0900

    * 2019-05-23

commit a205e24747497391390ef7c004293a8a7934dd96
Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
Date:   2019-05-22 23:18:37 +0900

    Make RUBY_REVISION full length

commit d819d97cf02fd0a5b5b1f6ee69c9fdb83276e6c2
Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
Date:   2019-05-22 23:18:09 +0900

    Default to the current branch
    
    * tool/make-snapshot: default to the current branch if no branch
      but srcdir is given.

commit 8fb77acac70bab6924c063020b6fe3e93fece242
Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
Date:   2019-05-22 23:50:07 +0900

    Fix revision name
    
    * tool/make-snapshot (package): dump to stringize GIT revisions
      properly.

commit 24684a81d2ed3ae32ad67659a8b18acd052727b5
Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
Date:   2019-05-22 22:15:55 +0900

    Fix revision name
    
    * tool/make-snapshot (package): use the last revision of the whole
      tree as the revision name, not a single file.
    
    * tool/file2lastrev.rb: ditto.  dump without unnecessary subrange
      and literal quotes, to stringize SVN revisions properly.

commit 658f17b8ec56e3f8bbd70afdb92c6e7aa156e5be
Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
Date:   2019-05-22 21:14:12 +0900

    Fixed the method to delegate
    
    * tool/vcs.rb (VCS::GITSVN.revision_name): should delegate to the
      same method of SVN, not an undefined method.

commit 2fb69b32968e4c18c8b6fe0a9a33b454feccba32
Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-05-22 16:54:47 +0900

    * expand tabs.

commit 32dd1a798a6d042dbf91e24e9c9f44d94e68f721
Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
Date:   2019-05-22 16:52:19 +0900

    gc.c: revert b00f280d4b "Eagerly name modules and classes"
    
    * gc.c (rb_raw_obj_info): new string objects cannot allocate to
      create new class path name during GC.

commit 4d93340d3836bc454cee0c74715a412d090ff178
Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
Date:   2019-05-22 16:33:03 +0900

    ast.c: update inspect results in the documents

commit 48f3dc3cce74f459a690f8434d191140a1c0d8a2
Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
Date:   2019-04-19 06:37:01 +0900

    Set namespace tree
    
    * variable.c (set_namespace_path): set path to the whole namespace
      tree.  [Feature #15765]

commit 1b20d6a6c6b0f72804fb25f90e78fe8efdcbed56
Author: Alan Wu <XrXr@users.noreply.github.com>
Date:   2019-04-12 12:46:28 +0900

    Extract build_const_pathname
    
    * variable.c (build_const_pathname): build constant path from
      name as a string.  [Feature #15765]

commit b00f280d4b9569e7153365d7e1c522b3d6b3c6cf
Author: Alan Wu <XrXr@users.noreply.github.com>
Date:   2019-04-12 12:46:28 +0900

    Eagerly name modules and classes
    
    * variable.c: make the hidden ivars `classpath` and `tmp_classpath` the source
      of truth for module and constant names. Assign to them when modules are bind
      to constants.
    
    * variable.c: remove references to module name cache, as what used to be the cache
      is now the source of truth. Remove rb_class_path_no_cache().
    
    * variable.c: remove the hidden ivar `classid`. This existed for the purposes of
      module name search, which is now replaced. Also, remove the associated
      rb_name_class().
    
    * class.c: use rb_set_class_path_string to set the name of Object during boot.
      Must use a fstring as this runs before rb_cString is initialized and
      creating a normal string leads to a VALUE without a class.
    
    * spec/ruby/core/module/name_spec.rb: add a few specs to specify what happens
      to Module#name across multiple operations. These specs pass without other
      code changes in this commit.
    
    [Feature #15765]

commit a829be209fc5866f07adc93e8b2f1ddf7131ebfd
Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
Date:   2019-05-22 08:57:20 +0900

    Ripper: no documents of fallback methods

commit c48d9139d4a979e534c1522d2a09ec2a440a8e9a
Author: aycabta <aycabta@gmail.com>
Date:   2019-05-22 07:03:29 +0900

    Remove unnecessary variable in LineEditor

commit c00d8056729b72724b86b0f0412c6f2ca9fd1318
Author: aycabta <aycabta@gmail.com>
Date:   2019-05-22 06:48:27 +0900

    Support CSI sequences in prompt

commit ca435ed04ae15607c598808473c59dd7c83debc1
Author: aycabta <aycabta@gmail.com>
Date:   2019-05-22 03:12:37 +0900

    Use Reline.test_mode in Reline's test too

commit f8732bd4d65cf0b776348907b56bd58f4f79ca9c
Author: aycabta <aycabta@gmail.com>
Date:   2019-05-22 02:52:29 +0900

    Reline#reset should initalize @rest_height and @screen_size eveytime

commit 232f1117e8aa83ed315d2f0c5ebaaa68e722d204
Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-05-22 02:14:35 +0900

    * 2019-05-22

commit be86e71c674a6eb3221019cc9e988b3e999b2220
Author: aycabta <aycabta@gmail.com>
Date:   2019-05-22 02:13:57 +0900

    Reopen $stderr with specified fd by RELINE_STDERR_TTY

commit b508b623ee1cc526cfd674218f6e6e7fa6b10f26
Author: Takashi Kokubun <takashikkbn@gmail.com>
Date:   2019-05-21 21:00:17 +0900

    Use conssitent documentation about repository [ci skip]
    
    This unifies our explanation with
    https://github.com/ruby/www.ruby-lang.org/pull/2069
    
    Co-authored-by: OKURA Masafumi <masafumi.o1988@gmail.com>

commit 2ecee730a577ece99d16792c12d6662578ac5a85
Author: aycabta <aycabta@gmail.com>
Date:   2019-05-21 20:52:11 +0900

    Remove ~/.inputrc not found error message

commit 32ed85f601d2102990b62102c5f3b322306b1928
Author: Takashi Kokubun <takashikkbn@gmail.com>
Date:   2019-05-21 20:32:15 +0900

    Copy config to make IRB::Context#use_colorize? functional
    
    on initialize
    
    This fixes https://github.com/ruby/ruby/pull/2188

commit 4613c4bd5c22acb675ec385f4e0fa27ec7ad59ab
Author: aycabta <aycabta@gmail.com>
Date:   2019-05-21 18:55:31 +0900

    Symbol beginning token may take a constant token

commit bb5b4f9044b583e192d56c7feda4d1084542efd3
Author: aycabta <aycabta@gmail.com>
Date:   2019-05-21 18:45:00 +0900

    Cursor should be at line head after line breaking

commit fd95ab44c66ce6b756f66210640cf8e8ffd1bd32
Author: aycabta <aycabta@gmail.com>
Date:   2019-05-21 18:36:10 +0900

    IRB should eval and show an error when only `.` is inputted

commit 3f6b5f447caf8f8ca06d5c170e9266ef20945834
Author: Koichi Sasada <ko1@atdot.net>
Date:   2019-05-21 18:34:29 +0900

    re-skip tests of GC.compact.

commit 6d93baaedd0e9819d4ddb6637b2d3d539f1fa210
Author: aycabta <aycabta@gmail.com>
Date:   2019-05-21 17:46:31 +0900

    Support DEL key

commit 8c004c71235c5ee8b2d4846672788d3089f3e884
Author: Koichi Sasada <ko1@atdot.net>
Date:   2019-05-21 17:45:28 +0900

    enable test for GC.compact to reproduce an issue on CI

commit 7ff4abe650038ec4a9fa5fa9e0fbc16ceff7714e
Author: Koichi Sasada <ko1@atdot.net>
Date:   2019-05-21 15:45:21 +0900

    unify normal and verify ver.

commit 0b9a7b35287e7c4db37e0f49612faeff29752108
Author: Koichi Sasada <ko1@atdot.net>
Date:   2019-05-21 14:58:39 +0900

    do not use RARRAY_SET() directly in array.c.

commit 44e9b1e3a6ba464a8ecc22cd7779af64ea01e2e8
Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
Date:   2019-05-21 14:23:42 +0900

    Fix typo

commit ac00bdc8a8ac2c62a94dd36a7784d15bbcb7df19
Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
Date:   2019-05-20 18:10:35 +0900

    Do not modify shared array
    
    [Bug #15821]

commit f9696ca6cbfe827b7ce7199e511fa7431f9333b1
Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
Date:   2019-05-21 10:30:13 +0900

    Simplified the guard against old versions

commit be0d9c0d26adcf8017d0ce4adf782c1bea2b7240
Author: aycabta <aycabta@gmail.com>
Date:   2019-05-21 09:24:09 +0900

    Add "require 'irb'" to use IRB.conf

commit 29c81265c1637245aa331f8d47c5060f4dc79ab0
Author: aycabta <aycabta@gmail.com>
Date:   2019-05-21 09:14:08 +0900

    Check whether IRB.conf is nil in IRB::WorkSpace#code_around_binding

commit 3a9008b9845db544d0788851f9527ce9f9f6bf4a
Author: aycabta <aycabta@gmail.com>
Date:   2019-05-15 16:36:33 +0900

    Add --colorize and --nocolorize options to IRB

commit df6a673ca55d26a768ead23466c7e055a8596d7a
Author: aycabta <aycabta@gmail.com>
Date:   2019-05-21 08:10:36 +0900

    Fix vertical cursor moving when splitting line

commit 34d7ec4e9b0a24b3ce89009927738f1dac38e6d3
Author: aycabta <aycabta@gmail.com>
Date:   2019-05-21 01:18:19 +0900

    Finish only when buffer contains non-blank line

commit b69dfdb4b3d9dfce18123d1814087fc49b390ea9
Author: aycabta <aycabta@gmail.com>
Date:   2019-05-21 01:14:53 +0900

    Cursor up should reduce 1 than editing height

commit 8023b3ce9d654c1a58e1f4952b666e2c412938ca
Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-05-21 01:10:47 +0900

    * 2019-05-21

commit 6592f5fcc8e7c6130eba5acf71d2763e7a6d58cf
Author: aycabta <aycabta@gmail.com>
Date:   2019-05-21 00:59:43 +0900

    Check bytesize in vi command mode last char back

commit 583ecd5fc5d96a6a8135776db6e92b8565789fb0
Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-05-20 22:08:27 +0900

    * expand tabs.

commit e83f10b36865c7fc3f3e09deab679c4270310021
Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
Date:   2019-05-20 21:58:06 +0900

    Get rid of undefined behavior that source and destination buffers overlap

commit 8c8f2d97cf51103b6f3d40bf7239a40899e380f6
Author: Benoit Daloze <eregontp@gmail.com>
Date:   2019-05-20 17:41:57 +0900

    Remove redundant ignore rule for Process#clock_getres specs

commit 2a34543e11299146db688e636e0b95c22990e302
Author: Benoit Daloze <eregontp@gmail.com>
Date:   2019-05-20 17:40:34 +0900

    Move exclusion for Hyper-V next to other skipped constants

commit ab0f2deab11a3203f9af3af1a27dfea1f4a882f3
Author: Koichi Sasada <ko1@atdot.net>
Date:   2019-05-20 14:39:46 +0900

    skip a test for CLOCK_MONOTONIC_RAW.
    
    On my Linux guest machine on Hyper-V, I got an error.
    Process.clock_gettime(CLOCK_MONOTONIC_RAW, :nanosecond) returns like:
    
      ...
      875573945119100
      875573945119600
      ...
    
    even if `Process.clock_getres(value, :nanosecond)` returns 1.
    So I simply skip this test for CLOCK_MONOTONIC_RAW.

commit 7ef548c0acf2f8b62db234e39a0f1030902a305c
Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
Date:   2019-05-20 12:43:52 +0900

    Mixed encoding error can continue to parse

commit 9f49ff4965da8b05887912506dff7d0d20388550
Author: aycabta <aycabta@gmail.com>
Date:   2019-05-20 07:45:36 +0900

    Cursor can't move to eol when vi command mode

commit f659e2f9bf0c7d0351a80dc284a384a948bd67dd
Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-05-20 04:52:41 +0900

    * 2019-05-20

commit 075e1acb4c920edf0b5d20a5cb5004a4f88fbcd8
Author: aycabta <aycabta@gmail.com>
Date:   2019-05-20 04:47:43 +0900

    Readline.completion_proc accepts US-ASCII

commit 4d7ada10b1d8d6eba79d845aa9ecffb890f593d4
Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
Date:   2019-05-19 16:47:53 +0900

    Update test-unit

commit cc764e5d37a8424949af0e83a8bb5661a1d6e8a6
Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-05-19 05:45:50 +0900

    * 2019-05-19

commit af1502175b5a3415949b8daa6f70a1cfaa7d1975
Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
Date:   2019-05-19 05:42:13 +0900

    Touch the timestamp file for Unicode files

commit 60de17258ba0be6c113e60ce237c3b8608457da7
Author: Marcus Stollsteimer <sto.mar@web.de>
Date:   2019-05-18 20:06:49 +0900

    [DOC] Shorten examples for Time#{round,floor}

commit cc0e460bccbf005d23616be1ea2624a161a4ecdd
Author: Marcus Stollsteimer <sto.mar@web.de>
Date:   2019-05-18 20:06:10 +0900

    [DOC] Improve documentation for Time#floor
    
    Use numbers that are more illustrative for #floor.

commit f782e5bdcf91f2885519e20e3aa53eec063faea8
Author: Marcus Stollsteimer <sto.mar@web.de>
Date:   2019-05-18 20:05:26 +0900

    [DOC] Use '&&' instead of 'and' in boolean expression

commit acf6689a8c77b5730274e2c9ec1d49423674da15
Author: Marcus Stollsteimer <sto.mar@web.de>
Date:   2019-05-18 20:04:04 +0900

    [DOC] Improve documentation for Enumerator::Lazy

commit 154a67f140a8397df77d82cdc80e13b291b8aedd
Author: Aaron Patterson <tenderlove@ruby-lang.org>
Date:   2019-05-18 18:23:47 +0900

    Rename rb_gc_new_location to rb_gc_location
    
    The function will return new or existing locations depending on whether
    or not the object actually moved, so give it a more appropriate name.

commit bbb84a16fab8e715a108c318e9e0e019339eb972
Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
Date:   2019-05-18 14:20:33 +0900

    Add fall through comment for Coverity Scan

commit 16917cc3cb27277d04b9c35fb7fc10f72a9b6dfa
Author: aycabta <aycabta@gmail.com>
Date:   2019-05-18 03:12:53 +0900

    Add Reline.test_mode to use with special I/O

commit b165bedcbd41d791a85fc1ce90b57a0d0525f319
Author: Koichi Sasada <ko1@atdot.net>
Date:   2019-05-18 12:17:02 +0900

    skip a test to pass CIs.
    
    I'm debugging [Bug #15821] but my patch introduces another issue.
    So I simply skip this test and re-enable it later.

commit 6ae1c596f0b179f1b1b2b115ca75eab1631230fe
Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
Date:   2019-05-18 09:40:52 +0900

    Add test for UNTIL

commit 4d9c3a8c2362b7d5973057435258e447ce733741
Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
Date:   2019-05-18 01:17:47 +0900

    Update include files on msys2 too

commit 719ebbec303967aacbf5122219d67b34aae9351e
Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
Date:   2019-05-17 23:46:22 +0900

    Get rid of always updating Unicode files
    
    [Misc #15859]

commit c4bad9f74e432572b80c24c7f1c519c5cc4c59a2
Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
Date:   2019-05-18 09:35:40 +0900

    Distinguish pre-condition and post-condition loops

commit 39336a4210557d8677a2e07094efd785af0711ca
Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-05-18 02:41:28 +0900

    * 2019-05-18

commit 9858d74a128c1126f0d05ebe5c05a2e6b34ce0af
Author: aycabta <aycabta@gmail.com>
Date:   2019-05-18 02:32:25 +0900

    Remove parent namespace from Readline test classes
    
    The namespace "Readline" doesn't exist when running tests if readline.so
    doesn't exist and Reline exists. So test classes shouldn't be at nested
    namespaces under "Readline".

commit ea3e7e268546599883b25d9a33d26e042461ac25
Author: Aaron Patterson <tenderlove@ruby-lang.org>
Date:   2019-05-17 23:08:31 +0900

    Prevent Dynamic -> Static symbols from moving
    
    If a dynamic symbol has been converted to a static symbol, it gets added
    to the global ID list and should no longer move.  C extensions can pass
    symbols to rb_sym2id and those symbols should no longer be movable.
    When the symbol is passed to rb_sym2id, the `id` member is set, so we
    can use its existence to prevent movement.

commit 0723c107f4fb39f60113b44dd21d875c90da5456
Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
Date:   2019-05-17 13:55:59 +0900

    Do not export InitVM functions

commit e29a85a96c47be3b4ff77b1e6d2235ea935a35bc
Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
Date:   2019-05-17 10:49:25 +0900

    Make COROUTINE_XMM_REGISTERS compile-time only too

commit b1b385465e4fc1cab84b2a3fa112a33a3e5ab076
Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
Date:   2019-05-17 10:25:34 +0900

    Do not call memcpy if copying nothing
    
    c.f.
    * e7b18ca6d9b45b7e71694557b9fab8152c62c1ed
    * 34e1079aef81d108890fb167d7df69960e994ff5

commit 32e8b42852fc59a7064ec9ad642774c562b69c21
Author: Koichi Sasada <ko1@atdot.net>
Date:   2019-05-17 12:59:49 +0900

    skip tests for GC.compact to pass CI.
    
    Now, GC.compact has issues which makes rubyci RED, so I skip this test
    and debug soon.

commit f1f402946023573d3d17410d0de19c653f53f96e
Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-05-17 10:10:39 +0900

    * 2019-05-17

commit 0971cab4d0cb730292461d16ac72c430aa23cc10
Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
Date:   2019-05-17 09:53:47 +0900

    Test to disable ASCII-only optimization
    
    Examples why ASCII-only optimization cannot apply multi-byte
    encodings which have 7-bit trailing bytes.
    
    Suggested by @duerst at https://github.com/ruby/ruby/pull/2187#issuecomment-492949218

commit 23751a2681abd50e9081bdbb00f818942570c872
Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
Date:   2019-05-16 23:26:57 +0900

    leaked-globals: check if un-prefixed symbols leak externally

commit e0f0ab959e9a0fa3db8dfdb2a493b057d6e7541b
Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
Date:   2019-05-16 18:58:17 +0900

    Remove unused symbols

commit 0ed9bdfc13082b6d19712738ca69fbbe2a36f106
Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
Date:   2019-05-16 18:24:12 +0900

    Pack struct rb_strterm_heredoc_struct on 32-bit platforms

commit 88449100bc6d23a00dbf3addb97665f4f606f2b8
Author: Koichi Sasada <ko1@cookpad.com>
Date:   2019-05-16 16:44:30 +0900

    don't need to sweep rest.
    
    `transient_heap_evacuate()` disables GC using `rb_gc_disable()`
    to prohibt GC invocation because of new allocation for evacuated
    memory. However, `rb_gc_disable()` sweep all rest of unswept pages.
    We don't need to cancel lazy sweep so this patch introduce
    `rb_gc_disable_no_rest()` which doesn't cancel lazy sweep.

commit a160b2f56716f70fa3e485ae89875da48baefc1d
Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
Date:   2019-05-16 15:51:37 +0900

    Make COROUTINE_REGISTERS compile-time only not to be a global symbol

commit 7069f64c419ebb9a7fd3e48d81454148ed4b2fba
Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
Date:   2019-05-16 15:43:16 +0900

    Prefix global_symbols with `ruby_`

commit 973431c059ab2719e97d1ec051d21aa63a43a005
Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
Date:   2019-05-16 15:36:58 +0900

    Make internal functions static

commit 82332c7d8b17b610a347f7c804219c7fcb702d23
Author: Takashi Kokubun <takashikkbn@gmail.com>
Date:   2019-05-16 15:13:36 +0900

    Rename mjit_gc_finish_hook to mjit_gc_exit_hook
    
    because @ko1 said "gc_finish" is confusing like a finish of entire GC
    process

commit 18e43e823106f15c8aaceb1f56874bdf67bc36a3
Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
Date:   2019-05-16 14:58:57 +0900

    Fix fd leak
    
    merged https://github.com/rubygems/rubygems/pull/2765

commit fadab0f9fb18448c9146fce0fd87f4285f647516
Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-05-16 14:43:49 +0900

    * 2019-05-16

commit e970ab3339109b89b4251887e39412af20348156
Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
Date:   2019-05-15 23:17:18 +0900

    Suppress unused-but-set-variable warning

commit 214e2f93aa6b0810353b67f320dab6aa63a97169
Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
Date:   2019-05-15 18:18:44 +0900

    Fix the warning in 456586bb234915107da255d2944f620a7dd7048b

commit 3cf767ee35060d7d261f47399a7d717256d0f237
Author: Aaron Patterson <tenderlove@ruby-lang.org>
Date:   2019-05-10 06:36:30 +0900

    unpin finalizers and update references

commit c9b28fd7ae5c5a79a74afebd5b191cfd2f31a65f
Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
Date:   2019-05-15 17:22:25 +0900

    Allow --enable/--disable options to take an argument
    
    [Bug #15850]

commit f54aa6c5b286b2b44bcdb1958fc9b1ebfce3559e
Author: aycabta <aycabta@gmail.com>
Date:   2019-05-15 15:52:12 +0900

    Rename confuzed name Reline::IO with Reline::IOGate

commit 0cc893d01d1c4a6b36f01a25587a121261601697
Author: Aaron Patterson <tenderlove@ruby-lang.org>
Date:   2019-05-15 12:41:31 +0900

    Static symbols can't be moved (they are not RValue)
    
    This is my mistake, I thought they were regular objects, but apparently
    they are not.  We don't need to pin them.
    
    Revert "Symbols can move so only cache IDs"
    
    This reverts commit 672ee5f6ed5a6840a3be9150b6721a5ee8f8766b.

commit 672ee5f6ed5a6840a3be9150b6721a5ee8f8766b
Author: Aaron Patterson <tenderlove@ruby-lang.org>
Date:   2019-05-14 09:24:19 +0900

    Symbols can move so only cache IDs
    
    IDs can't move, we need to use them to look up the symbol objects later.

commit e8b929b9df3a686ab4e5e0a07fb813d0bedf508f
Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-05-15 12:21:53 +0900

    * expand tabs.

commit c70ceb59928aa2c37befd6b03d73657ba5ece61c
Author: Aaron Patterson <tenderlove@ruby-lang.org>
Date:   2019-05-10 05:13:56 +0900

    Add object packing strategies for compaction
    
    This commit adds an alternative packing strategy for compaction.
    Instead of packing towards "most pinned" pages, we can pack towards
    "most empty" pages.  The idea is that we can double the heap size, then
    pack all objects towards the empty side of the heap.  This will ensure
    maximum chaos for testing / verification.

commit 46a479889cb5be2a7a24d6adbe54e822899d96cc
Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-05-15 00:19:31 +0900

    * 2019-05-15

commit 2ca537ba4b620d0a657b7da433df92f876974015
Author: Aaron Patterson <tenderlove@ruby-lang.org>
Date:   2019-05-15 00:18:43 +0900

    Fixing function name
    
    This function is used for marking / pinning vm stack values, so it
    should have "vm" in the function name to be more clear.

commit b5a3ec7f18761cbe30a90aa585b59ab05d926d2d
Author: aycabta <aycabta@gmail.com>
Date:   2019-05-14 17:15:49 +0900

    Remove useless use of a variable in Reline::ANSI

commit 80c968c571a65d140aefab4774fa87bf39966723
Author: aycabta <aycabta@gmail.com>
Date:   2019-05-14 17:05:36 +0900

    Rename Reline's test file name because of typo

commit 4fe0961dca71406816e136a76f742adb1f0b9bb5
Author: Takashi Kokubun <takashikkbn@gmail.com>
Date:   2019-05-14 16:45:18 +0900

    Fix typo in debugged C source name
    
    I failed to collect any debug info in
    https://app.wercker.com/ruby/ruby/runs/mjit-test1/5cda57fcab79a30008f195f6?step=5cda6a4e1090c4000800772e
    
    It seems that it's due to this typo.

commit c754e979d3eeca51f1b13778f19f347df3da656e
Author: aycabta <aycabta@gmail.com>
Date:   2019-05-14 07:00:03 +0900

    Test ext/readline and lib/reline by test/readline

commit 07e7ae9ed78d0891a1c4755e2faf3c8d15d95102
Author: aycabta <aycabta@gmail.com>
Date:   2019-05-14 05:34:20 +0900

    Add an assertion message to test of Readline's class variables

commit 1e65196b54644c5a8fe53c98643ab7e87dfb87c0
Author: aycabta <aycabta@gmail.com>
Date:   2019-05-14 04:08:23 +0900

    Check encoding when Readline completion

commit 29dde62605d50a55933ec5d92bcb6f5f738c390b
Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
Date:   2019-05-14 14:47:54 +0900

    io/console: rb_str_cat_conv_enc_opts is not exported

commit c1746708233bf90270dca1f698ca3616cc16922c
Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
Date:   2019-05-14 14:39:08 +0900

    io/console: fix up timeout on Windows

commit 456586bb234915107da255d2944f620a7dd7048b
Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
Date:   2019-05-14 14:21:46 +0900

    io/console: support getch timeout on Windows

commit 6d733565c2df1b34c7f0b7d43d97f80f714a64b9
Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
Date:   2019-05-14 14:19:15 +0900

    io/console: support wide character input on Windows

commit 602ef62ae693344aea70a85bb664bbbe93f20465
Author: aycabta <aycabta@gmail.com>
Date:   2019-05-14 02:39:40 +0900

    Rescue CompatibilityError for Readline's completion

commit 5bab1304af25a843728dbcd2f3594913740aecb0
Author: Urabe, Shyouhei <shyouhei@ruby-lang.org>
Date:   2019-05-14 11:44:20 +0900

    fix visibility of SecureRandom.gen_random
    
    Aliasing a method preserves its visibility.  These aliases turn
    formerly-public methods into private.  Should make them public
    again.  [Bug #15847]

commit af1f3f131f6a82f5f06fe5b3adeb6f80cf86b941
Author: aycabta <aycabta@gmail.com>
Date:   2019-05-14 01:10:15 +0900

    Readline's class vars should be encoded as default_external

commit 741321704fa1e4f180c853684a8ceaa6eff3b469
Author: aycabta <aycabta@gmail.com>
Date:   2019-05-14 00:03:15 +0900

    Remove unused variable in LineEditor

commit 79ead821dd4880725c9c6bb9645b3fad71715c5b
Author: Aaron Patterson <tenderlove@ruby-lang.org>
Date:   2019-05-14 06:27:54 +0900

    Add NaN / Infinity / MinusInfinity to mark list
    
    This prevents the constants from moving.

commit a1ecf07dff7530f8f53fb456b2e38a8a039cb561
Author: Aaron Patterson <tenderlove@ruby-lang.org>
Date:   2019-05-10 07:04:35 +0900

    turn T_MOVED in to a linked list

commit 66a7c92938638e3afceb1d92ae877376902a71a0
Author: Aaron Patterson <tenderlove@ruby-lang.org>
Date:   2019-05-14 04:59:30 +0900

    Don't run the compactor if GC is disabled
    
    GC is required for pinning / marking objects.  If the compactor runs
    without pinning everything, then it will blow up, so just return early
    if the GC is disabled.

commit 0215520beaa2be7a7bfb9aeb79bfc8c7ea7936b0
Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-05-14 00:32:58 +0900

    * 2019-05-14

commit d2003a6d392b3b0054d7528e2e731584196aefad
Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
Date:   2019-05-14 00:30:08 +0900

    Symbol just represents a name

commit 3b3b4a44e57dfe03ce3913009d69a33d6f6100be
Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
Date:   2019-05-13 23:53:46 +0900

    Update dependencies

commit 082bbdc92e5d704c9fb2811d7c038f92aee77484
Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
Date:   2019-05-13 21:26:01 +0900

    Update the canonical repository for racc.

commit b42303b151534b4d0f2b7ccf7d4beeb27b0c2874
Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
Date:   2019-05-13 21:14:52 +0900

    Fix typos

commit 2dc613815d2c4a69bfbcbf78d1b99aa52fbabf60
Author: Étienne Barrié <etienne.barrie@gmail.com>
Date:   2016-08-31 02:29:07 +0900

    delegate.rb: don't look for methods on Kernel
    
    Instead, look for instance methods of Kernel.
    Otherwise, instance methods of Module (which are methods of Kernel
    itself) are mistakenly believed to exist, and it fails when calling
    Kernel.instance_method().
    
    Closes: https://github.com/ruby/ruby/pull/1422

commit 24964fff92cd89925d2169ad97a357a5bc57e3e1
Author: aycabta <aycabta@gmail.com>
Date:   2019-05-13 04:22:08 +0900

    Check that Reline exists on test

commit 75f196ce75f35ecbab8186c9ada2f3a91160f8f9
Author: aycabta <aycabta@gmail.com>
Date:   2019-05-13 03:29:18 +0900

    Skip tests depend on Readline's special behaviors

commit caef2ddaaf4a121272ad5c11d046ff4511c0f560
Author: aycabta <aycabta@gmail.com>
Date:   2019-05-13 03:26:10 +0900

    Implement Reline::HISTORY as an expanded Array

commit c48778d64294c7871e2be09b0138d74e4d9d8551
Author: aycabta <aycabta@gmail.com>
Date:   2019-05-13 03:24:15 +0900

    Add attr_accessor for Reline's Config attrs

commit ebb15cc6c17e33b030b511fff8b5722a8238ace5
Author: aycabta <aycabta@gmail.com>
Date:   2019-05-13 02:33:29 +0900

    Reline.completion_proc= should raise ArgumentError
    
    When the value is not Proc.

commit 130ced9fb025da05bc97346e30f1e3a6c86ead2e
Author: aycabta <aycabta@gmail.com>
Date:   2019-05-13 02:31:42 +0900

    Reline.completion_append_character= should be nil
    
    When unknown value comes.

commit e467f920a38cabad9568ebd5cfd46d11de04afa8
Author: aycabta <aycabta@gmail.com>
Date:   2019-05-13 02:30:53 +0900

    Add Reline.special_prefixes as stub

commit 5837290af1216eaadbee3204e40ef16931da2fdb
Author: aycabta <aycabta@gmail.com>
Date:   2019-05-13 02:26:31 +0900

    Implement Reline's class methods for compatibility
    
    - insert_text
    - redisplay
    - line_buffer
    - point
    - point=
    - vi_editing_mode
    - emacs_editing_mode
    - vi_editing_mode?
    - emacs_editing_mode?
    - get_screen_size

commit c137f015ab2283e885168f983e36e4bd2c1aa29e
Author: aycabta <aycabta@gmail.com>
Date:   2019-05-13 02:20:20 +0900

    Add Reline.pre_input_hook interface

commit 9cb821b02486de87b322089302fec3a63cda7b81
Author: aycabta <aycabta@gmail.com>
Date:   2019-05-13 02:14:48 +0900

    Implement Reline.input= and Reline.output=

commit bb56b899009828d567062fa5b9dd0af9f927cd32
Author: aycabta <aycabta@gmail.com>
Date:   2019-05-13 01:51:05 +0900

    Add ed_search_prev_history to Reline

commit 559cad9f2d87721fda1ffbf2e39ce4b328a5b17f
Author: okuramasafumi <masafumi.o1988@gmail.com>
Date:   2019-05-04 21:54:25 +0900

    Improve doc for Enumerable#include? and member?
    
    Existing doc for Enumerable#include? and member? has some problems.
    * `IO.constants` is not commonly used, and only some know
        that `SEEK_SET` is actually included in constants.
    * `IO.constants` is actually an Array, not the example is not
        appropriate for `Enumerable` module.
    So in this commit, the old example is replaced with new one.
    New example uses integer range, which is much simpler and easier to
    understand.
    
    Closes: https://github.com/ruby/ruby/pull/2168

commit 33bce2585ffacd8cf762972da7ca7a99d804989f
Author: aycabta <aycabta@gmail.com>
Date:   2019-05-13 00:30:39 +0900

    Use LineEditor#reset on test

commit d3a702a3f1568f33e1c681bc40bae396a2f46d17
Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-05-13 00:23:03 +0900

    * 2019-05-13

commit 0f45bd0584f1550e153babc339ad7671e2424d20
Author: aycabta <aycabta@gmail.com>
Date:   2019-05-13 00:22:27 +0900

    Split namespace of env-dependent I/O classes

commit 11476e9902405b90b7493fed43f9fc2e6db9a32c
Author: aycabta <aycabta@gmail.com>
Date:   2019-05-12 23:20:51 +0900

    Check INPUTRC env in Reline::Config

commit aaaede8bcff278bd304092e1c74d39e8fbd4cef8
Author: aycabta <aycabta@gmail.com>
Date:   2019-05-12 21:22:04 +0900

    Change LineEditor instance in Reline to class var

commit fc57e10569614caf5efc5b7fe18e6c76fafbb2e9
Author: aycabta <aycabta@gmail.com>
Date:   2019-05-12 20:43:38 +0900

    Revert "Add a test for em_capitol_case of Reline"
    
    This reverts commit b1767e56b158d8307412a0928a7ac2366541429d.

commit b1767e56b158d8307412a0928a7ac2366541429d
Author: aycabta <aycabta@gmail.com>
Date:   2019-05-12 17:25:28 +0900

    Add a test for em_capitol_case of Reline

commit 3211a0a1e87d7ad622906b84de27f49a7d0d7578
Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-05-12 00:52:17 +0900

    * 2019-05-12

commit e9bb30d47e5f07774cfbc69f0c8824ec921f6cda
Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
Date:   2019-05-12 00:03:19 +0900

    Expect no conflict in the parser

commit 79931dddba67ad68886f65ba8562eb99507cee3a
Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
Date:   2019-05-10 16:40:34 +0900

    Propagate parser_params to rb_yytnamerr

commit dc65e75101de94c0f88851d7d3eab56cb7232c7a
Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
Date:   2019-05-10 17:28:20 +0900

    Adjust indent

commit aa52464efd558010f4fa5ef5de68d8f684b637aa
Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
Date:   2019-05-10 21:45:15 +0900

    15f45ae4d1 and 56528da3e broke the darwin environment.
    
    Revert "Propagate parser_params to rb_yytnamerr"
    
    This reverts commit 15f45ae4d12f14714ab3021b60887d8c7bf4b095.

commit d4c8577a14fa272bc9a3e68d4748fdf2f2cf7dee
Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
Date:   2019-05-10 21:45:04 +0900

    Revert "Fix for bison 2.3"
    
    This reverts commit 56528da3efb32bb773b22740c24450246b861e58.

commit 56528da3efb32bb773b22740c24450246b861e58
Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
Date:   2019-05-10 16:58:51 +0900

    Fix for bison 2.3

commit 15f45ae4d12f14714ab3021b60887d8c7bf4b095
Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
Date:   2019-05-10 16:40:34 +0900

    Propagate parser_params to rb_yytnamerr

commit 9a4d39b95ed60a00aec2ee3447931015254eb794
Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
Date:   2019-05-10 15:22:54 +0900

    No longer svn & git-svn are used

commit dbcc224f3883c810049ef620fac8a1b59bde2e69
Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
Date:   2019-05-10 09:01:08 +0900

    Removed old names of internal methods

commit a7b68e63c5dd9d366b0ddc17b16650560800f03a
Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
Date:   2019-05-10 12:48:43 +0900

    Suppress a warning in Psych&YAML with verbose mode

commit c8a891d1aa2fd54172d313441811aef2838b7797
Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
Date:   2019-05-10 12:21:25 +0900

    Fix missing `\A`

commit bef5829482ab410111911f2472442ff0dfbd3838
Author: Takashi Kokubun <takashikkbn@gmail.com>
Date:   2019-05-10 11:54:15 +0900

    Add one more retry for win32ole event matcher
    
    to fix
    https://ci.appveyor.com/project/ruby/ruby/builds/24438615/job/yld1utsltxag9dr2

commit a85ed43294700ed0dd11d22b5c3d5d37d2b1809c
Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
Date:   2019-05-10 08:59:08 +0900

    Do not access the internal member

commit c4d49749fbbb922f6102d3bf0729c861f9436a00
Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-05-10 04:28:19 +0900

    * 2019-05-10

commit 5f05851ae37050c7031a080e405f8773089d7c14
Author: Aaron Patterson <tenderlove@ruby-lang.org>
Date:   2019-05-10 04:27:44 +0900

    add FROZEN to lldb debug output

commit 025206d0dd29266771f166eb4f59609af602213a
Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
Date:   2019-05-09 14:11:43 +0900

    Fallback to an invalid branch name if no branch found

commit eb84b33c86280a72aaeedae1e582045528c534b2
Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
Date:   2019-05-09 14:02:01 +0900

    Search a branch name at a detached head

commit c06ddfee878524168e4af07443217ed2f8d0954b
Author: Alan Wu <XrXr@users.noreply.github.com>
Date:   2019-05-08 22:44:41 +0900

    str_duplicate: Don't share with a frozen shared string
    
    This is a follow up for 3f9562015e651735bfc2fdd14e8f6963b673e22a.
    Before this commit, it was possible to create a shared string which
    shares with another shared string by passing a frozen shared string
    to `str_duplicate`.
    
    Such string looks like:
    
    ```
     --------                    -----------------
     | root | ------ owns -----> | root's buffer |
     --------                    -----------------
         ^                             ^   ^
     -----------                       |   |
     | shared1 | ------ references -----   |
     -----------                           |
         ^                                 |
     -----------                           |
     | shared2 | ------ references ---------
     -----------
    ```
    
    This is bad news because `rb_fstring(shared2)` can make `shared1`
    independent, which severs the reference from `shared1` to `root`:
    
    ```c
    /* from fstr_update_callback() */
    str = str_new_frozen(rb_cString, shared2);  /* can return shared1 */
    if (STR_SHARED_P(str)) { /* shared1 is also a shared string */
        str_make_independent(str);  /* no frozen check */
    }
    ```
    
    If `shared1` was the only reference to `root`, then `root` can be
    reclaimed by the GC, leaving `shared2` in a corrupted state:
    
    ```
     -----------                         --------------------
     | shared1 | -------- owns --------> | shared1's buffer |
     -----------                         --------------------
          ^
          |
     -----------                         -------------------------
     | shared2 | ------ references ----> | root's buffer (freed) |
     -----------                         -------------------------
    ```
    
    Here is a reproduction script for the situation this commit fixes.
    
    ```ruby
    a = ('a' * 24).strip.freeze.strip
    -a
    p a
    4.times { GC.start }
    p a
    ```
    
     - string.c (str_duplicate): always share with the root string when
       the original is a shared string.
     - test_rb_str_dup.rb: specifically test `rb_str_dup` to make
       sure it does not try to share with a shared string.
    
    [Bug #15792]
    
    Closes: https://github.com/ruby/ruby/pull/2159

commit d802698d3e27a3cf091a56556df3562cc6ff996c
Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
Date:   2019-05-09 10:01:31 +0900

    Push the current (topic) branch to the remote upstream

commit 4fabb744718ddbb2eb8f5f4a6ca3d47d8e770547
Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
Date:   2019-05-09 09:59:27 +0900

    Show the commit command if dryrun

commit f1486fea46cf36f1c936f5074a7251f29f9c1c5d
Author: NARUSE, Yui <naruse@airemix.jp>
Date:   2019-05-09 09:23:44 +0900

    require 'stringio'

commit 10723dd6cefb84e6a7d69b3bc3c1a74c345e4306
Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
Date:   2019-05-09 08:54:38 +0900

    dryrun option is for `push`, not `git`

commit dc405eb737c178016167c8e64bdf32d27c5455f0
Author: Aaron Patterson <tenderlove@ruby-lang.org>
Date:   2019-05-09 07:55:35 +0900

    Pin finalizer table
    
    Objects in the finalizer table stay pinned for now.  In some cases, the
    key could move which would cause a miss when removing the object from
    the table (leading to a T_MOVED reference staying in the table).

commit 4ff0911c796e80ad3740b1aea0199da698f4910b
Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-05-09 07:26:32 +0900

    * 2019-05-09

commit 8b12db6e197a5f4d57fb208b3f03b4b17733f1e4
Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-05-09 07:26:29 +0900

    * expand tabs.

commit c53f87943e53c96b86d50b496d2a410ff1245b4c
Author: Aaron Patterson <tenderlove@ruby-lang.org>
Date:   2019-05-09 07:19:59 +0900

    Calling `obj_info` during sweep is unsafe
    
    `obj_info` will look at references of objects in some cases (for example
    it will try to access path information on ISeq objects).  But during the
    sweep phase, if the referenced object is collected before `obj_info` is
    called, then it could be a bad ref and a segv will occur.
    
    For example:
    
    A -> B
    
    Sweep phase:
    
    1. obj_info(B)
    2. Sweep and free B
    3. obj_info(A); A tries to read B
    4. SEGV
    
    This commit simply removes the call to `obj_info` during the sweep
    phase.

commit a95ca6d5e9c1c7371f7324159840ac1e8c013125
Author: Takashi Kokubun <takashikkbn@gmail.com>
Date:   2019-05-08 17:30:11 +0900

    Trim MJIT output from TestHideSkip
    
    to prevent failure like
    https://app.wercker.com/ruby/ruby/runs/mjit-test1/5cd28aa6ab79a30008ee819b?step=5cd28b2403f44600070db083
    with --jit-verbose=1.

commit 29fcb37a8319c70a8524c13b525087ff63431676
Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
Date:   2019-05-08 16:59:37 +0900

    Fixed a typo

commit c54d5872fbd95c04ab77b4c1d6f95974ddac0090
Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
Date:   2019-05-08 16:55:59 +0900

    Configure directories for headers and libraries automatically
    
    [EXPERIMENTAL]

commit a1bab3d1a3bf36e113267c212d7fb36710859674
Author: Takashi Kokubun <takashikkbn@gmail.com>
Date:   2019-05-08 16:51:37 +0900

    Escape $@ in mjit-debug-on-fail

commit e8e415b5347197666f4dd11d25df08881ddaa36f
Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
Date:   2019-05-08 16:44:08 +0900

    Add workaround for `Permission denied` of `cp`
    
    see r67347
    recent log: https://travis-ci.org/ruby/ruby/jobs/529640417

commit b0965cc2d6fe284e0bf3154ed7a282a29287a20c
Author: Takashi Kokubun <takashikkbn@gmail.com>
Date:   2019-05-08 16:26:53 +0900

    Add missing chmod for mjit-debug-on-fail

commit 60869ebd005dc21e03e5f3cf9b517ff761781e80
Author: Takashi Kokubun <takashikkbn@gmail.com>
Date:   2019-05-08 16:25:25 +0900

    Wrap mjit-debug-on-fail for Wercker failure
    
    for debugging failure like
    https://app.wercker.com/ruby/ruby/runs/mjit-test1/5cc98936ab79a30008eb86fa?step=5cc990d73d81fb0007bb04c3
    https://app.wercker.com/ruby/ruby/runs/mjit-test1/5cd18efa23fcb70008ddfd45?step=5cd1908603f4460007076c5a

commit d736080c8b8731fe8e7be99893eea35b67cbbc0e
Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
Date:   2019-05-08 15:45:13 +0900

    Use ruby_bug guard

commit a7cbb659566b4b9114cc2a00f036e7a88300b30d
Author: Takashi Kokubun <takashikkbn@gmail.com>
Date:   2019-05-08 15:13:33 +0900

    Do not break rubyspec for old Ruby
    
    Fixing 7d805e67f3275aef066d77aa9c32bef715c362ed

commit 229e5053a1ea9633489e296faafc34c9c51e7391
Author: Takashi Kokubun <takashikkbn@gmail.com>
Date:   2019-05-08 14:59:18 +0900

    Drop -fs from rubyspec to see test results easily
    
    Recently `ruby/spec on Ruby 2.4` seems stable.

commit 6ec43d3d049f4736e6d0196497bfc9562001dd28
Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-05-08 11:18:20 +0900

    * 2019-05-08

commit d56b0cb554dd75190b1d308e20f3f49f5f12571b
Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
Date:   2019-05-08 11:14:21 +0900

    Use `start_with?(quoted)` instead of `[0] == char literal`

commit efda52ba62361a0262d3775b8210fff85fb42247
Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
Date:   2019-05-07 23:30:39 +0900

    Use cgit instead of svn.

commit 45b125eca76e60482113575f1e71574fcbcc3b4c
Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
Date:   2019-05-07 23:16:26 +0900

    Update the canonical repository url.

commit 5eb5613fef1c8a72df6843ffce9fc339f145948e
Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
Date:   2019-05-07 22:53:45 +0900

    Recent commits of trunk do not have svn revision

commit a47f598d77ac97f9fe89fe16aa8bcab4fd262c16
Author: Lourens Naudé <lourens@bearmetal.eu>
Date:   2019-04-20 08:44:51 +0900

    Reduce ONIG_NREGION from 10 to 4: power of 2 and testing revealed most pattern matches are less than or equal to 4 results
    
    Closes: https://github.com/ruby/ruby/pull/2135

commit 7d805e67f3275aef066d77aa9c32bef715c362ed
Author: Jean Boussier <jean.boussier@gmail.com>
Date:   2019-05-07 19:00:57 +0900

    Avoid triggering autoload in Module#const_defined?(String)
    
    [Bug #15780]

commit 6786fe44dcbb560d896bb9bb5baa9dc74677ce17
Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-05-07 17:36:10 +0900

    * 2019-05-07

commit 4dc5d3c5dd43b4cc54517e604c16ecfc808e5481
Author: Koichi Sasada <ko1@atdot.net>
Date:   2019-05-07 14:06:25 +0900

    add new debug_counters about is_pointer_to_heap().
    
    is_pointer_to_heap() is used for conservative marking. To analyze
    this function's behavior, introduce some debug_counters.

commit 7e72ce0f734113e3e215a74b440092443e957d45
Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
Date:   2019-05-06 15:30:44 +0900

    Load OptionParser defaults from XDG and Haiku standards

commit 970a25b10415bc3735e6e3c165e167e6abc3d7f4
Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-05-06 11:08:03 +0900

    * 2019-05-06

commit f1b0db2c70aa3120a557fd7553b98f96ecc62ade
Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
Date:   2019-05-06 11:02:12 +0900

    Revert "UTF-8 is one of byte based encodings"
    
    This reverts commit 5776ae347540ac19c40d146a3566a806cd176bf1.
    
    Mistaken `max` as `min`.

commit 594a033ff0f6a22693b7b82b060e922c58dac8d0
Author: Marcus Stollsteimer <sto.mar@web.de>
Date:   2019-05-05 16:52:34 +0900

    Improve description of Ruby in README
    
    Use improved description as suggested by Olivier Lacan (@olivierlacan),
    see https://github.com/ruby/www.ruby-lang.org/pull/1888.

commit 35ff4ed47fcdc14bbdd19540622cb04f86536c95
Author: Marcus Stollsteimer <sto.mar@web.de>
Date:   2019-05-05 16:51:40 +0900

    Improve documentation for String#{dump,undump}

commit bb4ac7a6506971dc34b5656f1a69aadc7299fcab
Author: Jeremy Evans <code@jeremyevans.net>
Date:   2019-05-05 13:43:22 +0900

    Fix use of numbered parameter inside proc that is default value of optarg
    
    This allows cases such as:
    
    ```ruby
    m ->(a = ->{@1}) {a}
    m.call.call(1)
    
    m2 ->(a: ->{@1}) {a}
    m2.call.call(2)
    ```
    
    Previously, this would cause a syntax error.
    
    [Bug#15789]

commit 0c0ed1cee8aa8c538cc81f0daef26737eb2d5d0d
Author: Jeremy Evans <code@jeremyevans.net>
Date:   2019-05-05 13:43:22 +0900

    Fix use of numbered parameter inside proc that is default value of optarg
    
    This allows cases such as:
    
    ```ruby
    m ->(a = ->{@1}) {a}
    m.call.call(1)
    
    m2 ->(a: ->{@1}) {a}
    m2.call.call(2)
    ```
    
    Previously, this would cause a syntax error.
    
    [Bug#15789]

commit b8f3be295b694964e88960c0228459b8aadd114a
Author: Jeremy Evans <code@jeremyevans.net>
Date:   2019-05-05 13:33:58 +0900

    Fix a case where numbered parameters should not be allowed
    
    Because `proc{|| @1}` is a syntax error, the following should
    also be syntax errors:
    
    ```ruby
    proc { |
    | @1}
    ```
    
    ```ruby
    proc { |; a| @1 }
    ```
    
    This fixes both cases.
    
    [Bug #15825]

commit 374c8f4ebab1a740990330c732b9de965c5e8d10
Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
Date:   2019-05-05 14:32:45 +0900

    Fixed about ARGF.lineno
    
    [Bug #15823]

commit 84e71e9fc1965d00013fea1bea1ce22aa7e7e619
Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-05-05 11:13:58 +0900

    * 2019-05-05

commit f1b52d3a8889dbffddadd3e3ccf05fb9a90b18ee
Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-05-05 11:13:54 +0900

    * expand tabs.

commit ff21e75d32e27a2b362ed53fb471828876b54418
Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
Date:   2018-07-28 00:07:56 +0900

    parse.y: duplicated when clause warning
    
    * parse.y (case_args): moved "duplicated when clause" warning from
      compile phase, so that `ruby -wc` shows them.

commit 848edb03f8d3e5f5e97d3ea45fec592d87d73b05
Author: Masatoshi SEKI <m_seki@mva.biglobe.ne.jp>
Date:   2019-05-04 22:52:25 +0900

    ignore test_RangeError

commit a380f4c2b7310c85635958c751ac78d7796bc8d2
Author: Marcus Stollsteimer <sto.mar@web.de>
Date:   2019-05-04 22:31:21 +0900

    Fix typos, grammar, and style

commit 8bf3040e301ffe82ab02df58c89bd1e55bb0980b
Author: Marcus Stollsteimer <sto.mar@web.de>
Date:   2019-05-04 22:02:20 +0900

    Fix grammar

commit b9e52db28398c5a792ae16730243af764c869bcd
Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
Date:   2019-05-04 22:00:22 +0900

    Add a pathologic check

commit 7d30cd47c4e9e27461d3906e5740daa02dac22ca
Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-05-04 19:29:14 +0900

    * remove trailing spaces.

commit 8980b53a48b1f55e09c5223008225e6bfa765405
Author: Masatoshi SEKI <m_seki@mva.biglobe.ne.jp>
Date:   2019-05-04 19:28:57 +0900

    add DRb::WeakIdConv (Bug #15711)

commit b72623012d74abdb06210153ed48c9e2fa075bbd
Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
Date:   2019-05-04 06:23:25 +0900

    Update broken URL in Float documentation.
    
      [Misc #15775][ruby-core:92332]

commit a3cbce7822c680e62d000817c36fbdb5f62997d8
Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-05-04 00:00:01 +0900

    * 2019-05-04

commit 04fd98d5963d45f69ff8239bd02392e550d67191
Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-05-03 23:59:58 +0900

    * expand tabs.

commit 77440e949bd69e6ed86d70026d238521adb8319a
Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
Date:   2019-05-03 22:37:51 +0900

    Improve performance of case-conversion methods

commit 1f349ea297738f3a2c4914166746cea0e5ada031
Author: Marcus Stollsteimer <sto.mar@web.de>
Date:   2019-05-03 23:12:22 +0900

    Fix typo

commit 5776ae347540ac19c40d146a3566a806cd176bf1
Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
Date:   2019-05-03 15:33:59 +0900

    UTF-8 is one of byte based encodings

commit 58cd4b7bde1f03ddce41fdc8f30ebe3c75706e75
Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-05-03 06:26:18 +0900

    * 2019-05-03

commit 7d02bab0b080bbf5f7dd3f29de57a52677e39a51
Author: NAKAMURA Usaku <usa@ruby-lang.org>
Date:   2019-05-03 06:24:57 +0900

    Nil cannot and should not convert to a string

commit 5c87bb3b90a6d77089314ed0e62e31654621efa9
Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-05-02 22:44:43 +0900

    * expand tabs.

commit 5e23b1138f16af0defb184d7deeffadfd2ce3c04
Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
Date:   2019-05-02 22:44:20 +0900

    Fix potential memory leak

commit d6efb386bab9ee3839cf17945ad810b03f28f129
Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-05-02 14:47:26 +0900

    * 2019-05-02

commit a1ae478a31ffe4fd21c17f785f1827c031281be8
Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
Date:   2019-05-02 14:44:47 +0900

    Fix a typo

commit 71952440adcbdd1ff51aea519bc14e8965b84ebf
Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
Date:   2019-05-01 20:55:08 +0900

    Silence a (probable) debug print

commit 474af9ee9a4804d052e1e40503e1b6491d00a969
Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
Date:   2019-05-01 20:47:00 +0900

    No last commit when up-to-date
    
    Get the last commit title from the upstream to the head, so that
    no `last_commit` line will be shown when the branch is up to date
    with the upstream.

commit 2f0f9115d314d0fecbd0a9f5b5a6c59c611fa5e7
Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
Date:   2019-05-01 20:26:35 +0900

    Ignore ChangeLog

commit dcb6a6ae3e2b8a3e298e7f0d4a3e7f8ff102a30e
Author: NAKAMURA Usaku <usa@ruby-lang.org>
Date:   2019-05-01 17:38:09 +0900

    Windows simply causes an error to open invalid path

commit fc3e80cf6d8847fd5a2313dd7e2079d268f1ec84
Author: NARUSE, Yui <naruse@airemix.jp>
Date:   2019-05-01 01:06:13 +0900

    guard include with has_feature
    
    clang's sanitizer/msan_interface.h has fallback macros.
    It causes redefinition of __msan_unpoison().

commit 3de03544ff9fba80039460f2e2cd864010bf8cba
Author: aycabta <aycabta@gmail.com>
Date:   2019-05-01 00:45:54 +0900

    Add Reline.delete_text that raises NotImplementedError

commit c06821161ae9dcfebeabd30ec7ab598ee70c89ce
Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-05-01 00:03:58 +0900

    * 2019-05-01

commit 4e88e8692844a2a317bc19481f0f2601b6f00955
Author: manga_osyo <manga.osyo@gmail.com>
Date:   2019-04-30 23:18:44 +0900

    Add exception support in `Range#first`.
    
    Closes: https://github.com/ruby/ruby/pull/2163

commit 0eedec68673fa74960dec80b26659263ec3b6a9a
Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
Date:   2019-04-30 22:35:38 +0900

    Change Accept-Encoding from `*` to `identity`
    
    When `Accept-Encoding` is `*`,
    http://www.unicode.org/Public/12.1.0/ucd/ returns gzipped content now.
    So set `identity`.

commit dd942cd5b31947f6a514d4a916971011fbabc089
Author: NAKAMURA Usaku <usa@ruby-lang.org>
Date:   2019-04-30 22:24:45 +0900

    Use redirect keyword arguments instead of ">"

commit 50872f4a15a2070fa007c1d85fcf44802e4bcc0b
Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
Date:   2019-04-30 22:23:20 +0900

    Use array mode of `system` instead of `shellescape`
    
    `&.` is not available in ruby 2.0.

commit df3de409325d1e95d375a736d2bc9c45d47ec317
Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
Date:   2019-04-30 22:13:47 +0900

    String#[] with index to extract matched substring safely

commit 1dd94dfba3ed3ffd087d1ba93154cb922033a37c
Author: NAKAMURA Usaku <usa@ruby-lang.org>
Date:   2019-04-30 21:51:03 +0900

    Must use IO::NULL instead of platform dependent filename

commit 830e40ee05681a9230d523c1ca8b4bd3238fcfbf
Author: NAKAMURA Usaku <usa@ruby-lang.org>
Date:   2019-04-30 19:45:44 +0900

    Skip on Windows now when using reline because it causes hang of whole tests

commit 5a83a1d55454d42cbf5b0bcc9df9c9c83e3a39d7
Author: NAKAMURA Usaku <usa@ruby-lang.org>
Date:   2019-04-30 18:01:17 +0900

    **Must** use IO::NULL for null device

commit c222f4d31fc5f0566fa969d8fbb948f8841daf94
Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
Date:   2019-04-30 16:18:45 +0900

    `from` is not nil but `""` on shallow clone [ci skip]

commit 151b7d72bd26f9676c92b69f6b4710af3cb7ea65
Author: NAKAMURA Usaku <usa@ruby-lang.org>
Date:   2019-04-30 15:02:03 +0900

    Forgotten to remove

commit 94b740b2499242e1aca67f7bbf595e75e63abc40
Author: aycabta <aycabta@gmail.com>
Date:   2019-04-28 03:41:06 +0900

    Use Ripper for IRB
    
    The debug option of IRB is deleted because it's just for IRB's pure Ruby
    parser.

commit 567cb1ae1d25b837bed6e91af1418c6a4f25cc90
Author: aycabta <aycabta@gmail.com>
Date:   2019-04-30 12:52:48 +0900

    Use Encoding::UTF_8 if RELINE_TEST_ENCODING doesn't exist

commit 3be5907e734f9c88af577bb0b0e8ec2d66b7b2f7
Author: aycabta <aycabta@gmail.com>
Date:   2019-04-30 12:47:40 +0900

    Move Win32API to Reline::Win32API

commit 319eee0f4a13d29a82eeffa348b8a3b5685e2f6e
Author: aycabta <aycabta@gmail.com>
Date:   2019-04-30 12:27:23 +0900

    Use Encoding::UTF_8 if Encoding.default_external is Encoding::IBM437

commit 17350c7e5534c8678097d70698fe08614a6c3997
Author: aycabta <aycabta@gmail.com>
Date:   2019-04-27 14:53:09 +0900

    Add Reline as a fallback library for Readline
    
    * lib/reine.rb, lib/reline/*: Reline is a readline stdlib compatible
      library.
    * lib/readline.rb: Readline uses a fallback to Reline when ext/readline
      doesn't exist.
    * tool/sync_default_gems.rb: add ruby/reline as a default gem.
    * appveyor.yml: add "set RELINE_TEST_ENCODING=Windows-31J" for test suit
      of Reline, and add "--exclude readline" to "nmake test-all" on Visual
      Studio builds because of strange behavior.
    * spec/ruby/library/readline/spec_helper.rb: skip Reline as with
      RbReadline.

commit eb45ba61160dbae412407f232fe9b3252eb99362
Author: NAKAMURA Usaku <usa@ruby-lang.org>
Date:   2019-04-30 04:09:25 +0900

    Skip the spec on Windows because RUBY_EXE is RUNRUBY and it calls ruby as grandchild

commit 320f0aba49d17737ef965fc8c5f565dad96f514c
Author: NAKAMURA Usaku <usa@ruby-lang.org>
Date:   2019-04-30 04:09:07 +0900

    Revert previous commit; it was meaningless

commit ae3a9862048135f846f694b98031cf264889580f
Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-30 03:33:51 +0900

    * expand tabs.

commit 09022b6d70ad16737964e58db039aac00a1488ea
Author: NAKAMURA Usaku <usa@ruby-lang.org>
Date:   2019-04-30 03:32:41 +0900

    Use CreateToolhelp32Snapshot instead of NtQueryInformationProcess to get ppid on Windows
    
    Try to get rid of a spec error.

commit b7d9ec8caa4fb9d279df22f82fe28777a98fa37e
Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-30 00:28:44 +0900

    * 2019-04-30

commit 7a34d8902ad93c0e487623cd99e6c23296a7a768
Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
Date:   2019-04-30 00:28:00 +0900

    Merge .time

commit 040b37f8b4b8d0a4931ee9b7c15b57f9f918639a
Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
Date:   2019-04-29 23:02:18 +0900

    Use 10 chars as RUBY_REVISION in snapshot too

commit f95f07dad30a80b7e3eb4b2838ca4311d2822764
Author: Urabe, Shyouhei <shyouhei@ruby-lang.org>
Date:   2019-04-26 18:59:26 +0900

    avoid passing NULL to memset
    
    `GC::Profiler.enable; GC::Profiler.clear` tries to clear
    objspace->profile.records but it has never been allocated before.
    Thus the MEMCPY took NULL argument before this changeset.
    
    The objspace->profile.records is allocated appropriately elsewhere.
    Why not juts free it if any?  That should work.

commit 34e1079aef81d108890fb167d7df69960e994ff5
Author: Urabe, Shyouhei <shyouhei@ruby-lang.org>
Date:   2019-04-26 18:37:21 +0900

    glibc says memcpy cannot take NULL
    
    At least since 2004, glibc's <string.h> annotates memcpy as
    __attribute__((__nonnull__)).  This basedir is passed to it.  When
    LOAD_RELATIVE is not defined and MJIT_SEARCH_BUILD_DIR is not set,
    this variable is never updated.  Should initialize with meaningful
    default value.

commit e7b18ca6d9b45b7e71694557b9fab8152c62c1ed
Author: Urabe, Shyouhei <shyouhei@ruby-lang.org>
Date:   2019-04-26 18:01:24 +0900

    glibc says memcpy cannot take NULL
    
    At least since 2004, glibc's <string.h> annotates memcpy as
    __attribute__((__nonnull__)).  On the other hand the argv here,
    which is passed from rb_funcallv, may be NULL.  Practically this
    should never be a serious problem but for maximum safety, let's
    avoid passing NULL here.

commit a116f04ccabe8ce7d0e7312ef0f55f6a2cdd178e
Author: Urabe, Shyouhei <shyouhei@ruby-lang.org>
Date:   2019-04-26 17:28:43 +0900

    suppress some UBSAN sanitizers
    
    They are not "undefined".  UBSAN reports them because it thinks
    they are "often unintentional".  We see the report rather annoying.

commit f4c68640d679c3786c19f3503c76112312636c37
Author: Urabe, Shyouhei <shyouhei@ruby-lang.org>
Date:   2019-04-26 17:01:20 +0900

    this variable is not guaranteed aligned
    
    No problem for unaligned-ness because we never dereference.

commit 7c0f513e97828dd8274695a49bde92c326b208cb
Author: Urabe, Shyouhei <shyouhei@ruby-lang.org>
Date:   2019-04-26 17:00:58 +0900

    fix typo

commit 6a3165e19dfa21babfb2ef1f1c20c9930410b0ec
Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
Date:   2019-04-29 18:32:21 +0900

    Fixed HERETERM_LENGTH_MAX on IL32LLP64

commit c7f780c155ac553aa026e6caf4b1c88ff988adde
Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
Date:   2019-04-29 15:57:40 +0900

    Refactored rb_strterm_heredoc_t

commit 1432471a759dc0cbc80c53766894dba45e6da887
Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
Date:   2019-04-29 13:45:32 +0900

    Disallow also CR in here-doc identifier
    
    * parse.y (heredoc_identifier): CR in here-document identifier
      might or might not result in a syntax error, by the EOL code.
      make a syntax error regardless of the EOL code.

commit 23375c8b81e07644517e5ad985b2fbf5e1b5d545
Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
Date:   2019-04-29 13:42:50 +0900

    Make only `mesg` can be assigned with default `fname`

commit 330b376133e00ae418bcf01e641e127df01fbc28
Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
Date:   2019-04-29 00:24:26 +0900

    parse.y: fix here-doc identifier with newline
    
    * parse.y (heredoc_identifier): quoted here-document identifier
      must end within the same line.
    
      the only corner case that here-document identifier can contain a
      newline is that the closing qoute is placed at the beginning of
      the next line, and has been warned since 2.4.
    
      ```ruby
      <<"EOS
      " # warning: here document identifier ends with a newline
      EOS
      ```

commit 69cad44facc4dedfe181c6a669b63fb9da2aa673
Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
Date:   2019-04-29 12:19:07 +0900

    Reduce debug output
    
    because I found machine clock problem
    see r67347
    https://travis-ci.org/ruby/ruby/jobs/525784924
    https://travis-ci.community/t/mtime-of-source-codes-are-sometimes-newer-than-build-time-clock-skew/3215

commit 812a438145a604e1361d4bf07cc3d81452cfb0ec
Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
Date:   2019-04-29 11:31:18 +0900

    iseq.c: removed unnecessary zero-fills

commit 6033423d6882546e132a450ab9efc66507879594
Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
Date:   2019-04-29 10:11:44 +0900

    NEWS: Moved "Integer#[] with range" to "Core classes updates"

commit daa0874056f602cbc99cab5ddfe3e590194f9bca
Author: Benoit Daloze <eregontp@gmail.com>
Date:   2019-04-29 06:29:10 +0900

    CLOCK_MONOTONIC_RAW_APPROX seems less precise than advertised on macOS
    
    * https://travis-ci.org/ruby/ruby/builds/525651487

commit 79671ec57e59091260a0bc3d40a31d31d9c72a94
Author: Benoit Daloze <eregontp@gmail.com>
Date:   2019-04-29 06:20:11 +0900

    Update to ruby/spec@7de852d

commit 994833085ae06afbe94d30ab183d80e0234fbe14
Author: Benoit Daloze <eregontp@gmail.com>
Date:   2019-04-29 06:20:09 +0900

    Update to ruby/mspec@c25d63d

commit bbb93608a385242da93bc5256a90a6376981d86f
Author: Benoit Daloze <eregontp@gmail.com>
Date:   2019-04-29 06:16:03 +0900

    Move the check for CentOS CLOCK_MONOTONIC_RAW next to others
    
    * Fixes "No behavior expectation was found in the example"
    * https://rubyci.org/logs/rubyci.s3.amazonaws.com/centos6/ruby-trunk/log/20190428T093004Z.fail.html.gz

commit dfc0eeb0cfb22efde6369f275d3a28c29144d9a6
Author: Takashi Kokubun <takashikkbn@gmail.com>
Date:   2019-04-29 01:22:28 +0900

    Fully support Git in tool/merger.rb
    
    as both backport source repository and backport destination repository.

commit f0776e3203b55b698971a2d2b0acc48cb3a0940e
Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
Date:   2019-04-29 01:23:09 +0900

    Add more debug print for random CI failure on osx Travis
    
    and remove `git status` with noisy rvm trace log
    
    see r67347

commit 50cbb21ba533f67e29d7da0975ba186f9e3da93f
Author: Yusuke Endoh <mame@ruby-lang.org>
Date:   2019-04-29 01:17:27 +0900

    Add "Integer#[] with range" to NEWS

commit 75260d36b591a6c9c6f183648434b3c1026e1cd8
Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-29 01:00:20 +0900

    * remove trailing spaces.

commit 991e32681eac3c675ef796f5691a6786e99c3fb0
Author: Takashi Kokubun <takashikkbn@gmail.com>
Date:   2019-04-29 00:57:34 +0900

    tool/merger.rb: Avoid making too-deep indentation
    
    because it's hard to understand what's going on when indentation depth
    is too deep.
    
    Sorry for polluting git blame, but most of the Merger's lines are
    updated recently anyway.

commit 2dddd370a17a33177f0898986ea2b37eabd07f31
Author: Takashi Kokubun <takashikkbn@gmail.com>
Date:   2019-04-29 00:53:06 +0900

    Support `tool/merger.rb removetag` under Git
    
    repository.

commit bbad0d05b3e42909da297db06d632d2102122f65
Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-29 00:22:48 +0900

    * 2019-04-29

commit fad2825e42d80145ca7047f840b9b0cea00d0ca9
Author: Takashi Kokubun <takashikkbn@gmail.com>
Date:   2019-04-28 23:51:43 +0900

    Support `tool/merger.rb tag` under Git repository

commit 555d1dda71a3cd1ac954c4d41d523562721cde8d
Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-28 23:42:46 +0900

    * expand tabs.

commit 6bedbf462544a7917fdc8d8c44276079a6e156cf
Author: Yusuke Endoh <mame@ruby-lang.org>
Date:   2019-04-28 23:24:09 +0900

    numeric.c: Extend Integer#[] to support range arguments
    
    ````
    0b01001101[2, 4]  #=> 0b0011
    0b01001100[2..5]  #=> 0b0011
    0b01001100[2...6] #=> 0b0011
        ^^^^
    ````
    
    [Feature #8842]

commit cb550246136b90a63b4f75f5e7cfaccb9da08eda
Author: Yusuke Endoh <mame@ruby-lang.org>
Date:   2019-04-28 23:23:00 +0900

    test/ruby/test_integer.rb: Add a sane test for Integer#[]

commit 3bc810334c776bb68bddeeced9bd91f918c8581f
Author: Takashi Kokubun <takashikkbn@gmail.com>
Date:   2019-04-28 22:36:23 +0900

    Support `tool/merger.rb up` under Git repository
    
    updating indentation (and slightly changing styles) for areas already
    supporting Git.

commit d906dd87b049e84fc9a17b89a74fdd52d40c5fbb
Author: Benoit Daloze <eregontp@gmail.com>
Date:   2019-04-28 22:23:12 +0900

    Skip CLOCK_UPTIME_RAW_APPROX since it seems less precise than advertised on macOS
    
    * See https://travis-ci.org/ruby/ruby/jobs/525595997

commit 392d84b4900eb954fdfcf11c2a63dd4c029996f4
Author: Takashi Kokubun <takashikkbn@gmail.com>
Date:   2019-04-28 22:14:55 +0900

    Fix wrong svn options
    
    for SVN as a backport source.
    
    This was a mistake in de5378233b2ff5434f024ac66285e699794a321d...

commit 1c8cefca310d12cf4ae475eeacec73bf1f5ae7c3
Author: Takashi Kokubun <takashikkbn@gmail.com>
Date:   2019-04-28 22:02:09 +0900

    Stop using global variable for repos
    
    to avoid having impact from other places.

commit 9426da83c60eca84197e9fcf67dc9c7c12ad3d2e
Author: Benoit Daloze <eregontp@gmail.com>
Date:   2019-04-28 21:59:14 +0900

    Exclude failing Process.clock_getres specs on AIX

commit a27f7e499c66e5f09d5159c33c72834f14ec5aac
Author: Benoit Daloze <eregontp@gmail.com>
Date:   2019-04-28 21:54:42 +0900

    Add missing platform guard

commit 9a0dbb341442fc0d203a5cd6fb46250e429e9188
Author: Benoit Daloze <eregontp@gmail.com>
Date:   2019-04-28 21:52:55 +0900

    Skip problematic Process.clock_getres specs on ARM
    
    * https://rubyci.org/logs/rubyci.s3.amazonaws.com/scw-9d6766/ruby-trunk/log/20190428T051708Z.fail.html.gz
    * https://rubyci.org/logs/rubyci.s3.amazonaws.com/scw-ad7f67/ruby-trunk/log/20190428T045405Z.fail.html.gz

commit cb8eb37377289a3874742af290bcd32dd09910bf
Author: Takashi Kokubun <takashikkbn@gmail.com>
Date:   2019-04-28 21:53:57 +0900

    Now tool/merger.rb may use Git [ci skip]

commit f2d7ba6a7473b408002c90b77b021fc837f93561
Author: Takashi Kokubun <takashikkbn@gmail.com>
Date:   2019-04-28 21:51:35 +0900

    make sync-default-gems GEM=irb
    
    from https://github.com/ruby/irb/commit/e8e79d569ed59fe4ed4fbca968917ce799f02a5e.
    
    This colorizes Range object on IRB inspect.

commit 13abf5519a8c00ac2b05409e667c58f05c75123a
Author: Benoit Daloze <eregontp@gmail.com>
Date:   2019-04-28 21:39:37 +0900

    Workaround a CentOS bug in Process.clock_getres specs

commit 14965c5f4b0160d22febd94f258b2ba1491a585e
Author: Takashi Kokubun <takashikkbn@gmail.com>
Date:   2019-04-28 21:40:37 +0900

    Drop SVN-specific method from Merger module
    
    to clarify it's not needed for Git support.

commit fcb18755135982320900c45baa45bd4ba0029e07
Author: Takashi Kokubun <takashikkbn@gmail.com>
Date:   2019-04-28 21:16:20 +0900

    Make Merger.version private to the module
    
    because it's not used outside the Module.

commit 16695af0ef13c709846a18ae9d186642445fae5f
Author: Benoit Daloze <eregontp@gmail.com>
Date:   2019-04-28 21:36:03 +0900

    Refactor logic in Process.clock_gettime spec

commit fc37a045a0b2cf02a77109eb87b01d8b82d5c15d
Author: Benoit Daloze <eregontp@gmail.com>
Date:   2019-04-28 21:35:17 +0900

    Fix typo in spec

commit d835ed4df1ae2bf317db41a8009b1fad143c94f1
Author: Takashi Kokubun <takashikkbn@gmail.com>
Date:   2019-04-28 21:02:01 +0900

    Define merger.rb's methods under Merger namespace
    
    so that we do not monkey-patch all classes by defining methods on
    top-level (Object class).
    
    Not arranging indentation in it to keep `git blame` for now.

commit 8711f77a26078b80eb954e0bc873418cf733eff5
Author: Takashi Kokubun <takashikkbn@gmail.com>
Date:   2019-04-28 20:33:12 +0900

    make sync-default-gems GEM=irb
    
    from https://github.com/ruby/irb/commit/96f05e726879e9858eb015c8d043c9f52b864ff9.
    
    Just syncing newer test changes so that conflicts do not happen when trunk is
    modified and we need to backport that to ruby/irb.

commit 588f212c2665555f76c68e0954332619bff60418
Author: Takashi Kokubun <takashikkbn@gmail.com>
Date:   2019-04-28 20:18:44 +0900

    make sync-default-gems GEM=irb
    
    from https://github.com/ruby/irb/commit/44301d382794d91e2caa16dd4efe62439e0041d8.
    
    This includes some fixes for string interpolation highlight fixes.

commit 4d8ad48f7dc610f58150daf92a859ed53fdd3a6c
Author: Takashi Kokubun <takashikkbn@gmail.com>
Date:   2019-04-28 19:33:41 +0900

    Support git as redmine-backporter's done destination

commit 5d24fba544352a32fdd4e06fa25dc0625c6860f1
Author: Benoit Daloze <eregontp@gmail.com>
Date:   2019-04-28 19:37:29 +0900

    Skip the entire Process.clock_getres spec on FreeBSD
    
    * Clocks don't match the reported precision.
    * https://rubyci.org/logs/rubyci.s3.amazonaws.com/freebsd11zfs/ruby-trunk/log/20190428T093003Z.fail.html.gz

commit f40458e9dda3298df12f5b602f02afd4dfae334b
Author: Takashi Kokubun <takashikkbn@gmail.com>
Date:   2019-04-28 14:10:08 +0900

    Specify VM_CHECK_MODE explicitly
    
    In my understanding, `VM_CHECK_MODE` should be Integer and I'm not sure
    how `-DVM_CHECK_MODE` would behave. To make the matters simple, let me
    pass the mode explicitly.

commit 766293fc490b6812739e837554dd5d8e703d352c
Author: Takashi Kokubun <takashikkbn@gmail.com>
Date:   2019-04-28 14:04:48 +0900

    Ruby 2.3 is EOL

commit 4c8f1078985613ea1015fe1a1cdbe9944528cb35
Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
Date:   2019-04-28 12:16:40 +0900

    Make the range to export as changelog optional
    
    * `from` is defaulted to the beginning of the branch inclusively,
      otherwise the given revision is excluded as the previous.
    
    * `to` is defaulted to the head.

commit d72bd190a80e6b8258ca923b606175754a210b6d
Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
Date:   2019-04-28 12:11:59 +0900

    Added VCS::SVN#branch_beginning

commit b7669705270478f14d02f15b51b74eeec52a49da
Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
Date:   2019-04-28 12:04:15 +0900

    Search the beginning revision more strictly a bit

commit fdcd640507ab2600dfa96f4962eba2702acfc264
Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
Date:   2019-04-28 11:35:14 +0900

    Makefiles need to be indented by tabs

commit 5a53682d6dede337b81f944edc76b1a5e1243adc
Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
Date:   2019-04-28 11:31:36 +0900

    Removed `--reverse` option
    
    It is nonsense with `-n1` option.

commit d0a54673202458455244f79ed212a97727f0c7c7
Author: David Rodríguez <deivid.rodriguez@riseup.net>
Date:   2019-04-26 20:26:21 +0900

    Update rubygems with latest upstream changes
    
    Closes: https://github.com/ruby/ruby/pull/2154

commit a15f7dd1fb1148c3d586238ee6907875f2e40379
Author: Jeremy Evans <code@jeremyevans.net>
Date:   2019-04-28 02:05:26 +0900

    Always mark the string returned by File.realpath as tainted
    
    This string can include elements that were not in either string
    passed to File.realpath, even if one of the strings is an
    absolute path, due to symlinks:
    
    ```ruby
    Dir.mkdir('b') unless File.directory?('b')
    File.write('b/a', '') unless File.file?('b/a')
    File.symlink('b', 'c') unless File.symlink?('c')
    path = File.realpath('c/a'.untaint, Dir.pwd.untaint)
    path # "/home/testr/ruby/b/a"
    path.tainted? # should be true, as 'b' comes from file system
    ```
    
    [Bug #15803]

commit d47cd75b4fead0cfc5fdb59c48d5d822ffe3382d
Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
Date:   2019-04-28 10:41:11 +0900

    Chomp a newline from the branch name

commit 7790b610b8c11ae987e0f9a936418a7a34a8af0b
Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
Date:   2019-04-28 02:00:39 +0900

    Shorten git revision name without "r" prefix in snapshot

commit 2c283655a650a7e97aaf36992d1d60c314403b7a
Author: Benoit Daloze <eregontp@gmail.com>
Date:   2019-04-28 06:43:58 +0900

    Some Solaris versions seem to only provide millisecond accuracy for CLOCK_REALTIME
    
    * https://rubyci.org/logs/rubyci.s3.amazonaws.com/unstable11x/ruby-trunk/log/20190427T182404Z.fail.html.gz

commit b7c301569df2eaee3a2785e5ec56f8c53fbc9fea
Author: Benoit Daloze <eregontp@gmail.com>
Date:   2019-04-28 06:42:31 +0900

    Skip clock_getres spec on BSD
    
    * clock_getres() seems to be incorrect on BSD:
      https://rubyci.org/logs/rubyci.s3.amazonaws.com/freebsd11zfs/ruby-trunk/log/20190427T183003Z.fail.html.gz

commit 0d227d1ce6aa01b0f6db06bbbf828acb962d4734
Author: Benoit Daloze <eregontp@gmail.com>
Date:   2019-04-28 02:42:54 +0900

    Try to more accurately reflect MRI's logic in specs for finding the home if $HOME is unset

commit 5b93321064e83ea180492469071189372e8289e8
Author: Benoit Daloze <eregontp@gmail.com>
Date:   2019-04-28 02:23:45 +0900

    Update to ruby/spec@14e6148

commit 14f004d3962f799ae2caca7d6a82f508e51270bc
Author: Takashi Kokubun <takashikkbn@gmail.com>
Date:   2019-04-28 02:17:49 +0900

    Isolate test_gc_compact on AppVeyor mswin as well
    
    because it makes the CI unstable
    https://ci.appveyor.com/project/ruby/ruby/builds/24143365/job/yrx7b8ce2qg9wro2

commit ed4f33187976ebbbe4d3eb83dceea1992e9f6a16
Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-28 02:02:30 +0900

    * remove trailing spaces.

commit cae0b73214d721539e335babf02283799198a983
Author: Takashi Kokubun <takashikkbn@gmail.com>
Date:   2019-04-28 02:01:01 +0900

    make sync-default-gems GEM=irb
    
    from https://github.com/ruby/irb/commit/89e9add06da3fd5f9ce91a2f5fa0b0190aa5d42f.
    
    This adds syntax highlight support for Module on inspect.
    
    In addition to that, I'm adding a trailing space in test_color.rb for
    testing ruby-commit-hook's auto-style.

commit a1b4816759418ca8fe510e8739622fc5d77ab0f0
Author: Benoit Daloze <eregontp@gmail.com>
Date:   2019-04-28 01:53:23 +0900

    Update to ruby/spec@15c9619

commit 00c33d9c232ed1a79eda17acd7231ac93caa162b
Author: Benoit Daloze <eregontp@gmail.com>
Date:   2019-04-28 01:53:20 +0900

    Update to ruby/mspec@18c5a7d

commit 80be9e986b81d1e50433005f6b91f4cd0c1c0939
Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-28 01:25:10 +0900

    * 2019-04-28

commit bb6036946ef7337c8bef6380ba394c082d5452cb
Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
Date:   2019-04-28 00:30:16 +0900

    Reduce matz's work, let git do it instead

commit 87d2a2df1b40016401a2f6dfc98e46880bbd18fd
Author: Benoit Daloze <eregontp@gmail.com>
Date:   2019-04-27 23:43:28 +0900

    Improve documentation of Array.try_convert
    
    * Mostly to try the new git repository.

commit 429fdf3de22690371b98590c4c1d6a53adbbfc26
Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
Date:   2019-04-27 23:27:12 +0900

    Added ChangeLog marker for the beginning of 2.7.0

commit db614dbf6d8c7f6e9ed315cd979500b131a5cc26
Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
Date:   2019-04-27 23:25:48 +0900

    Support git-log format ChangeLog

commit 2a4625115a2020dd55f952bdb176ab30405e19b9
Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
Date:   2019-04-27 23:14:59 +0900

    Separate format_changelog
    
    VCS::GITSVN#format_changelog generates previous format, similar to
    svn-log, and VCS::GIT#format_changelog stores just git-log as-is
    for now.

commit 7875c42f64e8656eb18262da65816a72375bf5f2
Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
Date:   2019-04-27 23:13:03 +0900

    Override log format to parse for ChangeLog

commit 6f8ac2cb28f99a4b2588c59ec44eff6ed38c4d3b
Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
Date:   2019-04-27 23:08:50 +0900

    Include the beginning commit in ChangeLog

commit af1e487e9bb763b939dc6704c9a343c9eafa1637
Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
Date:   2019-04-27 23:05:05 +0900

    Updated marked commits for ChangeLog

commit 3067370f611b16955a8064116092e5f0f9f126a7
Author: Takashi Kokubun <takashikkbn@gmail.com>
Date:   2019-04-27 22:21:34 +0900

    Retry downloads more for unicode outage
    
    like https://ci.appveyor.com/project/ruby/ruby/builds/24142523/job/v6aq4srj7c3hgt86

commit 9348643575d7a744f3e404d9069a0d29f97960a0
Author: Takashi Kokubun <takashikkbn@gmail.com>
Date:   2019-04-27 22:01:10 +0900

    make sync-default-gems GEM=irb
    
    Synced from https://github.com/ruby/irb/commit/5feb361ed80736efa5b2c2b629837ec2a5fc2cdb.
    This includes a support to colorize named Class instance on IRB inspect.

commit 3f9562015e651735bfc2fdd14e8f6963b673e22a
Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
Date:   2019-04-27 21:21:55 +0900

    Get rid of indirect sharing
    
    * string.c (str_duplicate): share the root shared string if the
      original string is already sharing, so that all shared strings
      refer the root shared string directly.  indirect sharing can
      cause a dangling pointer.
    
    [Bug #15792]

commit afb361dfd0811f96f601d8d6492f9e1a0321ea01
Author: Takashi Kokubun <takashikkbn@gmail.com>
Date:   2019-04-27 20:15:07 +0900

    Isolate test_gc_compact on msys2 AppVeyor
    
    as it's unstable on the environment
    https://ci.appveyor.com/project/ruby/ruby/builds/24138134/job/i7e441u7se11w7ey

commit bc01f7b7211b96b258fc6586789ce9875c079a7d
Author: Kazuki Tsujimoto <kazuki@callcc.net>
Date:   2019-04-27 12:55:32 +0900

    Fix description of NODE_IN

commit 7fe04850d21db1e17508fb8c05fd78fc079a71c6
Author: okuramasafumi <masafumi.o1988@gmail.com>
Date:   2019-04-27 11:18:25 +0900

    Add class ref to `UnboundMethod#owner` doc
    
    It refers to `Method#receiver` in the doc, but
    there's no class reference in current doc.
    Some tools automatically make it a link so it's useful.
    
    Closes: https://github.com/ruby/ruby/pull/2156

commit ecf660e438320f501ce4e05e92a5d6c79fe4d54d
Author: James Clarke <jrtc27@jrtc27.com>
Date:   2019-04-27 07:32:46 +0900

    ia64: Don't clear register_stack_start
    
    r59829 stopped clearing stack_start and enabled the code for
    !FIBER_USE_NATIVE, but we need to do the same for register_stack_start
    on ia64, otherwise we end up with NULL in cont_save_machine_stack.
    
    Closes: https://github.com/ruby/ruby/pull/2155

commit 5f6ba669ff79819e0e2cf006ed22f960d4565543
Author: Takashi Kokubun <takashikkbn@gmail.com>
Date:   2019-04-27 12:28:00 +0900

    Isolate TestGCCompact from JIT testing
    
    Wercker seems to randomly fail
    https://app.wercker.com/ruby/ruby/runs/mjit-test1/5cc3c1c423fcb70008db9b64?step=5cc3c46a03f4460007da0659
    
    To help debugging, let me isolate the impact from GC.compact in the JIT
    testing on Wercker.

commit 48313f129abd464c69853a66af22adbad260b82e
Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
Date:   2019-04-27 12:21:35 +0900

    Add `or nil` to call-seq of `Enumerator::ArithmeticSequence#begin`
    
    ```
    % ruby -ve 'p (nil..).first'
    ruby 2.6.3p62 (2019-04-16 revision 67580) [x86_64-darwin18]
    nil
    % ruby -ve 'p (nil..).begin'
    ruby 2.6.3p62 (2019-04-16 revision 67580) [x86_64-darwin18]
    nil
    ```

commit be8cf0d4f672c6061c38c06a7d5d1ee909fc124b
Author: Kazuki Tsujimoto <kazuki@callcc.net>
Date:   2019-04-27 12:09:48 +0900

    Update NEWS for pattern matching [ci skip]

commit baad9e8a1c5b54d5728ce48d36726ed78754285f
Author: Takashi Kokubun <takashikkbn@gmail.com>
Date:   2019-04-27 12:08:48 +0900

    NEWS: Note about $TERM requirement [ci skip]

commit 569c1ef6f17ad12012ba85c443c6806b9d0a9da5
Author: Takashi Kokubun <takashikkbn@gmail.com>
Date:   2019-04-27 11:42:38 +0900

    make sync-default-gems GEM=irb
    
    Backport changes from ruby/irb.

commit 782e48726082ee130b6ce27f2a21d33257f09d71
Author: naruse <naruse@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-21 14:48:35 +0900

    suppress warning in test/irb
    
    https://rubyci.org/logs/rubyci.s3.amazonaws.com/centos7/ruby-trunk/log/20190421T040003Z.fail.html.gz
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67678 b2dd03c8-39d4-4d8f-98ff-823fe69b080e
    
    Re-committing https://github.com/ruby/ruby/commit/7f09b5e9da8f83f84c5b6ae7a644a562811fec73

commit a2219e687e07fb7e3b9b6dce8e68210fd3a516f9
Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-27 09:17:50 +0900

    * 2019-04-27

commit c8b675adb902a67bf62a1a9945bade7c8becc4e8
Author: naruse <naruse@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-21 14:48:35 +0900

    suppress redefinition warnings
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67679 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 8990779d3693b106fbca014518726ba53224f731
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-01-18 18:52:50 +0900

    Prefer block_given? to iterator?
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66866 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit e804fcb42c56d5a4ff31df0391accaf5ede8c26e
Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
Date:   2019-04-26 18:53:36 +0900

    Fix rdoc in 52cfb17086

commit a429b3601f5dea7e3f7019733afffe64df583f34
Author: Takashi Kokubun <takashikkbn@gmail.com>
Date:   2019-04-26 18:46:43 +0900

    Revert "Class instance should be also colorable on IRB"
    
    This reverts commit 6669c966d2744f21315047d1725ad4494d15b8ba.
    
    It seems to make tests fail... let me fix this later.

commit 6669c966d2744f21315047d1725ad4494d15b8ba
Author: Takashi Kokubun <takashikkbn@gmail.com>
Date:   2019-04-26 18:42:50 +0900

    Class instance should be also colorable on IRB
    
    inspect.
    
    Change is made with: `$ make -C .ruby sync-default-gems GEM=irb`

commit 52cfb17086998b9434c9c786bfcf827197216c9a
Author: Takashi Kokubun <takashikkbn@gmail.com>
Date:   2019-04-26 18:28:54 +0900

    make sync-default-gems GEM=irb
    
    from https://github.com/ruby/irb/commit/e6739d8c66dc78562930adb0b96935c9b38acf74

commit a6805771ec202a8b8586d6624b05342029cace0d
Author: Takashi Kokubun <takashikkbn@gmail.com>
Date:   2019-04-26 18:25:54 +0900

    Define `make sync-default-gems`
    
    to run tool/sync_default_gems.rb

commit a93f55569950b714a3d1235e59ad0a7d5b88f938
Author: Takashi Kokubun <takashikkbn@gmail.com>
Date:   2019-04-26 18:18:09 +0900

    tool/sync_default_gems.rb: Check prerequisites

commit 1cef6a0c0c996ab87ef41dfeede3203ee3c811dc
Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
Date:   2019-04-26 17:47:09 +0900

    Add more debug print for random CI failure on osx Travis
    
    see r67347

commit 0523b02f481150d60fc0803689d0919ee22923e9
Author: Urabe, Shyouhei <shyouhei@ruby-lang.org>
Date:   2019-04-26 14:33:44 +0900

    yaml cannot deep-merge arrays
    
    The configuration cannot but be written here and there....

commit 267ac0624dad6be5c3f4760f691258ae7dc83861
Author: Urabe, Shyouhei <shyouhei@ruby-lang.org>
Date:   2019-04-26 13:35:08 +0900

    make test needs no gems

commit d700a8a0eb5f0a17d689216b5944ab6e39f1d55e
Author: Urabe, Shyouhei <shyouhei@ruby-lang.org>
Date:   2019-04-26 13:32:55 +0900

    update travis clang
    
    Seems clang-7 has false-positives around memory sanitizer.
    
    This line should not be reported because the memory region is
    correctly unpoisoned beforehand:
    https://travis-ci.org/ruby/ruby/jobs/524766381
    
    Clang 8 seems to fix it.

commit 3175c54cb6d0684cf5a9346838a91756db33e54e
Author: Urabe, Shyouhei <shyouhei@ruby-lang.org>
Date:   2019-04-26 11:58:43 +0900

    new travis setting to enable assertions

commit 2a49a4795679e17613435544766b127ebe31b6d3
Author: Urabe, Shyouhei <shyouhei@ruby-lang.org>
Date:   2019-04-26 11:33:40 +0900

    sanitizer compiler flag update

commit 7b7043e5da8589e01b94575d4ed647e909e5c875
Author: Urabe, Shyouhei <shyouhei@ruby-lang.org>
Date:   2019-04-25 15:50:47 +0900

    eliminate use of freed memory
    
    rb_io_fptr_finalize_internal frees the memory region.
    
    =================================================================
    ==85264==ERROR: AddressSanitizer: heap-use-after-free on address 0x610000000d8c at pc 0x5608e38077f7 bp 0x7ffee12d5440 sp 0x7ffee12d5438
    READ of size 4 at 0x610000000d8c thread T0
        #0 0x5608e38077f6 in rb_io_memsize io.c:4749:24
        #1 0x5608e37a0481 in obj_memsize_of gc.c:3547:14
        #2 0x5608e37a4f30 in check_rvalue_consistency gc.c:1107:2
        #3 0x5608e37a2624 in RVALUE_OLD_P gc.c:1218:5
        #4 0x5608e37a5bae in rb_gc_force_recycle gc.c:6652:18
        #5 0x5608e38191f9 in rb_f_backquote io.c:9021:5
        #6 0x5608e3d8aa14 in call_cfunc_1 vm_insnhelper.c:2058:12
        #7 0x5608e3d6e23d in vm_call_cfunc_with_frame vm_insnhelper.c:2211:11
        #8 0x5608e3d54a35 in vm_call_cfunc vm_insnhelper.c:2229:12
        #9 0x5608e3d5253b in vm_call_method_each_type vm_insnhelper.c:2564:9
        #10 0x5608e3d51f50 in vm_call_method vm_insnhelper.c:2701:13
        #11 0x5608e3cf2de4 in vm_call_general vm_insnhelper.c:2734:12
        #12 0x5608e3d79918 in vm_sendish vm_insnhelper.c:3627:11
        #13 0x5608e3d06cf5 in vm_exec_core insns.def:789:11
        #14 0x5608e3d43700 in rb_vm_exec vm.c:1892:22
        #15 0x5608e3d47cbf in rb_iseq_eval_main vm.c:2151:11
        #16 0x5608e37620ca in ruby_exec_internal eval.c:262:2
        #17 0x5608e376198b in ruby_exec_node eval.c:326:12
        #18 0x5608e37617d0 in ruby_run_node eval.c:318:25
        #19 0x5608e35c9486 in main main.c:42:9
        #20 0x7f62e9421b96 in __libc_start_main /build/glibc-OTsEL5/glibc-2.27/csu/../csu/libc-start.c:310
        #21 0x5608e3522289 in _start (miniruby+0x15f289)
    
    0x610000000d8c is located 76 bytes inside of 192-byte region [0x610000000d40,0x610000000e00)
    freed by thread T0 here:
        #0 0x5608e359a2ed in free (miniruby+0x1d72ed)
        #1 0x5608e37af421 in objspace_xfree gc.c:9591:5
        #2 0x5608e37af3da in ruby_sized_xfree gc.c:9687:2
        #3 0x5608e3799ac8 in ruby_xfree gc.c:9694:5
        #4 0x5608e380746d in rb_io_fptr_finalize_internal io.c:4728:5
        #5 0x5608e38191ed in rb_f_backquote io.c:9020:5
        #6 0x5608e3d8aa14 in call_cfunc_1 vm_insnhelper.c:2058:12
        #7 0x5608e3d6e23d in vm_call_cfunc_with_frame vm_insnhelper.c:2211:11
        #8 0x5608e3d54a35 in vm_call_cfunc vm_insnhelper.c:2229:12
        #9 0x5608e3d5253b in vm_call_method_each_type vm_insnhelper.c:2564:9
        #10 0x5608e3d51f50 in vm_call_method vm_insnhelper.c:2701:13
        #11 0x5608e3cf2de4 in vm_call_general vm_insnhelper.c:2734:12
        #12 0x5608e3d79918 in vm_sendish vm_insnhelper.c:3627:11
        #13 0x5608e3d06cf5 in vm_exec_core insns.def:789:11
        #14 0x5608e3d43700 in rb_vm_exec vm.c:1892:22
        #15 0x5608e3d47cbf in rb_iseq_eval_main vm.c:2151:11
        #16 0x5608e37620ca in ruby_exec_internal eval.c:262:2
        #17 0x5608e376198b in ruby_exec_node eval.c:326:12
        #18 0x5608e37617d0 in ruby_run_node eval.c:318:25
        #19 0x5608e35c9486 in main main.c:42:9
        #20 0x7f62e9421b96 in __libc_start_main
    /build/glibc-OTsEL5/glibc-2.27/csu/../csu/libc-start.c:310
    
    previously allocated by thread T0 here:
        #0 0x5608e359a56d in malloc (miniruby+0x1d756d)
        #1 0x5608e37aed12 in objspace_xmalloc0 gc.c:9416:5
        #2 0x5608e37aebe7 in ruby_xmalloc0 gc.c:9600:12
        #3 0x5608e37aea8b in ruby_xmalloc_body gc.c:9609:12
        #4 0x5608e37a6d64 in ruby_xmalloc gc.c:11469:12
        #5 0x5608e380e4b4 in rb_io_fptr_new io.c:8040:19
        #6 0x5608e380e446 in rb_io_make_open_file io.c:8077:10
        #7 0x5608e3850ea0 in pipe_open io.c:6707:5
        #8 0x5608e384edb4 in pipe_open_s io.c:6772:12
        #9 0x5608e381910b in rb_f_backquote io.c:9014:12
        #10 0x5608e3d8aa14 in call_cfunc_1 vm_insnhelper.c:2058:12
        #11 0x5608e3d6e23d in vm_call_cfunc_with_frame vm_insnhelper.c:2211:11
        #12 0x5608e3d54a35 in vm_call_cfunc vm_insnhelper.c:2229:12
        #13 0x5608e3d5253b in vm_call_method_each_type vm_insnhelper.c:2564:9
        #14 0x5608e3d51f50 in vm_call_method vm_insnhelper.c:2701:13
        #15 0x5608e3cf2de4 in vm_call_general vm_insnhelper.c:2734:12
        #16 0x5608e3d79918 in vm_sendish vm_insnhelper.c:3627:11
        #17 0x5608e3d06cf5 in vm_exec_core insns.def:789:11
        #18 0x5608e3d43700 in rb_vm_exec vm.c:1892:22
        #19 0x5608e3d47cbf in rb_iseq_eval_main vm.c:2151:11
        #20 0x5608e37620ca in ruby_exec_internal eval.c:262:2
        #21 0x5608e376198b in ruby_exec_node eval.c:326:12
        #22 0x5608e37617d0 in ruby_run_node eval.c:318:25
        #23 0x5608e35c9486 in main main.c:42:9
        #24 0x7f62e9421b96 in __libc_start_main /build/glibc-OTsEL5/glibc-2.27/csu/../csu/libc-start.c:310
    
    SUMMARY: AddressSanitizer: heap-use-after-free io.c:4749:24 in
    rb_io_memsize
    Shadow bytes around the buggy address:
      0x0c207fff8160: fa fa fa fa fa fa fa fa 00 00 00 00 00 00 00 00
      0x0c207fff8170: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
      0x0c207fff8180: fa fa fa fa fa fa fa fa 00 00 00 00 00 00 00 00
      0x0c207fff8190: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
      0x0c207fff81a0: fa fa fa fa fa fa fa fa fd fd fd fd fd fd fd fd
    =>0x0c207fff81b0: fd[fd]fd fd fd fd fd fd fd fd fd fd fd fd fd fd
      0x0c207fff81c0: fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa
      0x0c207fff81d0: fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa
      0x0c207fff81e0: fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa
      0x0c207fff81f0: fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa
      0x0c207fff8200: fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa
    Shadow byte legend (one shadow byte represents 8 application bytes):
      Addressable:           00
      Partially addressable: 01 02 03 04 05 06 07
      Heap left redzone:       fa
      Freed heap region:       fd
      Stack left redzone:      f1
      Stack mid redzone:       f2
      Stack right redzone:     f3
      Stack after return:      f5
      Stack use after scope:   f8
      Global redzone:          f9
      Global init order:       f6
      Poisoned by user:        f7
      Container overflow:      fc
      Array cookie:            ac
      Intra object redzone:    bb
      ASan internal:           fe
      Left alloca redzone:     ca
      Right alloca redzone:    cb
      Shadow gap:              cc
    ==85264==ABORTING

commit 2a863d4babed062dd91d2fe519d5018651c6378e
Author: Urabe, Shyouhei <shyouhei@ruby-lang.org>
Date:   2019-04-25 15:03:18 +0900

    avoid buffer overflow in vm_check_canary
    
    ec->cfp->iseq might not exist at the very beginning of a thread.
    
    =================================================================
    ==82954==ERROR: AddressSanitizer: heap-buffer-overflow on address 0x7fc86f334810 at pc 0x55ceaf013125 bp 0x7ffe2eddbbf0 sp 0x7ffe2eddbbe8
    READ of size 8 at 0x7fc86f334810 thread T0
        #0 0x55ceaf013124 in vm_check_canary vm_insnhelper.c:217:24
        #1 0x55ceaefb4796 in vm_push_frame vm_insnhelper.c:276:5
        #2 0x55ceaf0124bd in th_init vm.c:2661:5
        #3 0x55ceaf00d5eb in ruby_thread_init vm.c:2690:5
        #4 0x55ceaf00d4b1 in rb_thread_alloc vm.c:2703:5
        #5 0x55ceaef0038b in thread_s_new thread.c:872:20
        #6 0x55ceaf04d8c1 in call_cfunc_m1 vm_insnhelper.c:2041:12
        #7 0x55ceaf03118d in vm_call_cfunc_with_frame vm_insnhelper.c:2207:11
        #8 0x55ceaf017985 in vm_call_cfunc vm_insnhelper.c:2225:12
        #9 0x55ceaf01548b in vm_call_method_each_type vm_insnhelper.c:2560:9
        #10 0x55ceaf014c96 in vm_call_method vm_insnhelper.c:2686:13
        #11 0x55ceaefb5de4 in vm_call_general vm_insnhelper.c:2730:12
        #12 0x55ceaf03c868 in vm_sendish vm_insnhelper.c:3623:11
        #13 0x55ceaefc95bb in vm_exec_core insns.def:771:11
        #14 0x55ceaf006700 in rb_vm_exec vm.c:1892:22
        #15 0x55ceaf00acbf in rb_iseq_eval_main vm.c:2151:11
        #16 0x55ceaea250ca in ruby_exec_internal eval.c:262:2
        #17 0x55ceaea2498b in ruby_exec_node eval.c:326:12
        #18 0x55ceaea247d0 in ruby_run_node eval.c:318:25
        #19 0x55ceae88c486 in main main.c:42:9
        #20 0x7fc874330b96 in __libc_start_main /build/glibc-OTsEL5/glibc-2.27/csu/../csu/libc-start.c:310
        #21 0x55ceae7e5289 in _start (miniruby+0x15f289)
    
    0x7fc86f334810 is located 16 bytes to the right of 1048576-byte region [0x7fc86f234800,0x7fc86f334800)
    allocated by thread T0 here:
        #0 0x55ceae85d56d in malloc (miniruby+0x1d756d)
        #1 0x55ceaea71d12 in objspace_xmalloc0 gc.c:9416:5
        #2 0x55ceaea71cd2 in ruby_xmalloc2_body gc.c:9623:12
        #3 0x55ceaea7d09c in ruby_xmalloc2 gc.c:11479:12
        #4 0x55ceaf00c3b7 in rb_thread_recycle_stack vm.c:2462:12
        #5 0x55ceaf012256 in th_init vm.c:2656:29
        #6 0x55ceaf00d5eb in ruby_thread_init vm.c:2690:5
        #7 0x55ceaf00d4b1 in rb_thread_alloc vm.c:2703:5
        #8 0x55ceaef0038b in thread_s_new thread.c:872:20
        #9 0x55ceaf04d8c1 in call_cfunc_m1 vm_insnhelper.c:2041:12
        #10 0x55ceaf03118d in vm_call_cfunc_with_frame vm_insnhelper.c:2207:11
        #11 0x55ceaf017985 in vm_call_cfunc vm_insnhelper.c:2225:12
        #12 0x55ceaf01548b in vm_call_method_each_type vm_insnhelper.c:2560:9
        #13 0x55ceaf014c96 in vm_call_method vm_insnhelper.c:2686:13
        #14 0x55ceaefb5de4 in vm_call_general vm_insnhelper.c:2730:12
        #15 0x55ceaf03c868 in vm_sendish vm_insnhelper.c:3623:11
        #16 0x55ceaefc95bb in vm_exec_core insns.def:771:11
        #17 0x55ceaf006700 in rb_vm_exec vm.c:1892:22
        #18 0x55ceaf00acbf in rb_iseq_eval_main vm.c:2151:11
        #19 0x55ceaea250ca in ruby_exec_internal eval.c:262:2
        #20 0x55ceaea2498b in ruby_exec_node eval.c:326:12
        #21 0x55ceaea247d0 in ruby_run_node eval.c:318:25
        #22 0x55ceae88c486 in main main.c:42:9
        #23 0x7fc874330b96 in __libc_start_main /build/glibc-OTsEL5/glibc-2.27/csu/../csu/libc-start.c:310
    
    SUMMARY: AddressSanitizer: heap-buffer-overflow vm_insnhelper.c:217:24 in vm_check_canary
    Shadow bytes around the buggy address:
      0x0ff98de5e8b0: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
      0x0ff98de5e8c0: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
      0x0ff98de5e8d0: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
      0x0ff98de5e8e0: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
      0x0ff98de5e8f0: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
    =>0x0ff98de5e900: fa fa[fa]fa fa fa fa fa fa fa fa fa fa fa fa fa
      0x0ff98de5e910: fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa
      0x0ff98de5e920: fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa
      0x0ff98de5e930: fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa
      0x0ff98de5e940: fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa
      0x0ff98de5e950: fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa
    Shadow byte legend (one shadow byte represents 8 application bytes):
      Addressable:           00
      Partially addressable: 01 02 03 04 05 06 07
      Heap left redzone:       fa
      Freed heap region:       fd
      Stack left redzone:      f1
      Stack mid redzone:       f2
      Stack right redzone:     f3
      Stack after return:      f5
      Stack use after scope:   f8
      Global redzone:          f9
      Global init order:       f6
      Poisoned by user:        f7
      Container overflow:      fc
      Array cookie:            ac
      Intra object redzone:    bb
      ASan internal:           fe
      Left alloca redzone:     ca
      Right alloca redzone:    cb
      Shadow gap:              cc
    ==82954==ABORTING

commit aa190abe207c9cdbd75a5f8670a4e613565ee6bf
Author: Urabe, Shyouhei <shyouhei@ruby-lang.org>
Date:   2019-04-25 13:10:29 +0900

    newptr should not be NULL
    
    obj_ivar_heap_alloc already handles that situation.

commit 1aa05fddd81846bfa2833dff5e0aaccc1e707c81
Author: Urabe, Shyouhei <shyouhei@ruby-lang.org>
Date:   2019-04-24 16:47:09 +0900

    unpoison header before touching
    
    This header is poisoned to detect unintentional buffer overrun.
    However in this (and forthcoming) function, we are intentionally
    looking at the header.  We have to unpoison before anything.

commit 40b5f2b85dc5c50d7757c3b2522a767188b0e0b3
Author: Urabe, Shyouhei <shyouhei@ruby-lang.org>
Date:   2019-04-24 16:15:46 +0900

    memo.c might not always be initialized
    
    memo.float_value might change inside of hash_sum.  In case it
    flipped from false to true there, and the calculated sum is Inf,
    memo.c might not be initialized at all.  This is bad.
    
    Found using memory sanitizer:
    
    ==55293==WARNING: MemorySanitizer: use-of-uninitialized-value
        #0 0x55dfb8d6c529 in rb_float_new_inline internal.h:1814:53
        #1 0x55dfb8d1b30c in enum_sum enum.c:4017:18
        #2 0x55dfb86d75ad in call_cfunc_m1 vm_insnhelper.c:2041:12
        #3 0x55dfb864b141 in vm_call_cfunc_with_frame vm_insnhelper.c:2207:11
        #4 0x55dfb85e843d in vm_call_cfunc vm_insnhelper.c:2225:12
        #5 0x55dfb85e08f3 in vm_call_method_each_type vm_insnhelper.c:2560:9
        #6 0x55dfb85de9c7 in vm_call_method vm_insnhelper.c:2686:13
        #7 0x55dfb849eac6 in vm_call_general vm_insnhelper.c:2730:12
        #8 0x55dfb8686103 in vm_sendish vm_insnhelper.c:3623:11
        #9 0x55dfb84dc29e in vm_exec_core insns.def:789:11

commit f02760fc0a455f376ad1a855fd1a5e9252c8267c
Author: Urabe, Shyouhei <shyouhei@ruby-lang.org>
Date:   2019-04-24 15:30:25 +0900

    avoid reading uninitialized variable
    
    autoload_reset() can read this state.result.  Because autoload_reset
    is a function passed to rb_ensure, there is a chance when an
    execption raises before actually filling this memory region.
    
    test/ruby/test_defined.rb:test_autoload_noload is one of such case.
    
    Found using memory sanitizer.
    
    ==54014==WARNING: MemorySanitizer: use-of-uninitialized-value
        #0 0x557a683f3e5a in autoload_reset variable.c:2372:9
        #1 0x557a6707a93b in rb_ensure eval.c:1084:5
        #2 0x557a683efbf5 in rb_autoload_load variable.c:2475:14
        #3 0x557a685fc460 in vm_get_ev_const vm_insnhelper.c:938:4
        #4 0x557a68448e0a in vm_exec_core insns.def:267:11

commit 3ba485c0bfcfc0be351ef8278cd27187f4c11906
Author: Urabe, Shyouhei <shyouhei@ruby-lang.org>
Date:   2019-04-23 18:02:24 +0900

    zero-fill before GC mark
    
    Depending on architectures, setjmp might not fully fill a jmp_buf.
    On such machines the union can contain wobbly bits. They are then
    scanned during mark_locations_array().  This is bad.

commit 504ce460d240b5b726e77c0b0915677892a19e58
Author: Urabe, Shyouhei <shyouhei@ruby-lang.org>
Date:   2019-04-24 14:53:47 +0900

    give up sanitizing BSD_vfprintf
    
    Sanitizers report something inside of this function but it is
    beyond my brain capacity.  Also the code is proven to work.
    Let me ignore.

commit b11b26bcaf711ad01d1a81943cca42f7ff40bfee
Author: Urabe, Shyouhei <shyouhei@ruby-lang.org>
Date:   2019-04-24 12:24:44 +0900

    fix size of allocated memory
    
    The size of `ptr` here is not the same as the variable `size`.
    We were counting the size of header twice.

commit 6201a89b38afb6bb2a548aeba0ca77090851713b
Author: Urabe, Shyouhei <shyouhei@ruby-lang.org>
Date:   2019-04-24 11:23:13 +0900

    mark verify functions non-sanitizable
    
    These functions purposefully read from memory regions potentially
    not handled well.  Should let sanitizers avoid checking them.

commit 572f2ddff64ddf12f2331ad77b72d2b0c9d9883c
Author: Urabe, Shyouhei <shyouhei@ruby-lang.org>
Date:   2019-04-23 18:36:20 +0900

    use __attribute__((__no_sanitize__("memory")))

commit fa09acafde3b7dbb23edadc6eddcce27f7395880
Author: Urabe, Shyouhei <shyouhei@ruby-lang.org>
Date:   2019-04-24 18:22:33 +0900

    extend machine stacks when sanitizers are there
    
    It seems sanitizers require extra amount of machine stacks.  Without
    extending them the process tends to stack overflow.

commit 1f4204a762b2ddcc2f235b1a2b6a10071ef90d3b
Author: Urabe, Shyouhei <shyouhei@ruby-lang.org>
Date:   2019-04-23 17:55:15 +0900

    disable assertion when MSAN is active
    
    These assertions check if a newly allocated object (which is marked
    as an uninitialized memory region in MSAN) is in fact a T_NONE.
    
    Thus they intentionally read uninitialized memory regions, which do
    not interface well with MSAN.  Just disalbe them.

commit bdd1b300f8bf540c8f237cce50e42991f94101e3
Author: Urabe, Shyouhei <shyouhei@ruby-lang.org>
Date:   2019-04-23 17:47:49 +0900

    __asan_region_is_poisoned takes void *
    
    while heap->obj is a VALUE.  A cast should be there.

commit 171a6ad1c12b1600b01d9bde29947526ae3e2aee
Author: Urabe, Shyouhei <shyouhei@ruby-lang.org>
Date:   2019-04-25 14:33:44 +0900

    print the disasm
    
    It seems to be my fault to leave the variable disasm unused.

commit b6ebbee5d64dbd422957efe55b4ec5520c9b11bf
Author: Urabe, Shyouhei <shyouhei@ruby-lang.org>
Date:   2019-04-25 16:36:32 +0900

    suppress warning [ci skip]

commit 54eac83b2ad77ddea84fa6d66c09e0bb014cf61e
Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
Date:   2019-04-24 13:35:23 +0900

    Hide internal IDs
    
    * parse.y (internal_id): number the ID serial for internal use by
      counting down from the neary maximum value, not to accidentally
      match permanent IDs.
    
    [Bug #15768]

commit 5689c46457e6b078ac83b08b7e881e0050ebdfaa
Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-26 01:43:26 +0900

    * 2019-04-26

commit 0408b8b390f788693b10ad82281ae3d66ea52eb4
Author: Takashi Kokubun <takashikkbn@gmail.com>
Date:   2019-04-26 01:43:11 +0900

    Syntax-highlight yield in IRB

commit 2422316aea034c818734ad2fa68c4b021a6aafeb
Author: Takashi Kokubun <takashikkbn@gmail.com>
Date:   2019-04-26 01:18:37 +0900

    NEWS: Credit goes to Pry [ci skip]
    
    We must note this feature is heavily inspired by Pry.

commit 5fe99aefd39ce535f658aabd0ca6e2265348d314
Author: Takashi Kokubun <takashikkbn@gmail.com>
Date:   2019-04-26 01:15:30 +0900

    Support highlighting Regexp in inspect

commit e64bab5f779440ae920746ae5689a2af91de3604
Author: Takashi Kokubun <takashikkbn@gmail.com>
Date:   2019-04-26 00:53:36 +0900

    Add NEWS entry about IRB syntax highlight [ci skip]
    
    Details: https://github.com/ruby/ruby/pull/2150
    
    Note that this introduction is discussed with @aycabta who is allowed to
    make some changes to IRB by the IRB maintainer, keiju.

commit 0c54d2e2c7697aa5d6a1315b79c16b88d34f5e81
Author: Takashi Kokubun <takashikkbn@gmail.com>
Date:   2019-04-25 23:53:57 +0900

    Force IRB::Color to recognize TERM
    
    Closes: https://github.com/ruby/ruby/pull/2150

commit 022cbb278f381e5774a5d0277a83127c6f6b4802
Author: Pocket7878 <poketo7878@gmail.com>
Date:   2019-04-25 23:47:12 +0900

    Do not color IRB output on 'dumb' TERM
    
    Co-Authored-By: k0kubun <takashikkbn@gmail.com>
    Closes: https://github.com/ruby/ruby/pull/2150

commit b55201dd099011a22c8c1d64c653f898d9b409ca
Author: Takashi Kokubun <takashikkbn@gmail.com>
Date:   2019-04-25 21:36:48 +0900

    Colorize IRB's inspect result
    
    Closes: https://github.com/ruby/ruby/pull/2150

commit 94af6cd383f9dc3ae1204a5fba8f56ee7826cbce
Author: Takashi Kokubun <takashikkbn@gmail.com>
Date:   2019-04-25 21:16:21 +0900

    Colorize IRB's code_around_binding
    
    Closes: https://github.com/ruby/ruby/pull/2150

commit 790f6709ae418345829d12f053cf270f4d535f1c
Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
Date:   2019-04-25 23:46:37 +0900

    Mention warning of `$,`
    
    see [r67606](https://github.com/ruby/ruby/commit/3ee0648dc7a5465b2cbadd7246fc2edbd676d759)

commit 2272cb00eadcbc48640c69fcd6a30e45a5977cd5
Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
Date:   2019-04-25 11:07:17 +0900

    Ripper does not use internal IDs directly

commit c9715eb494ee9055f76ff59027219b5b4756f7bd
Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
Date:   2019-04-25 20:02:22 +0900

    Add more debug print for random CI failure on osx Travis
    
    see r67347

commit 3581a64239b333be33424888f689c9e452fc3334
Author: Takashi Kokubun <takashikkbn@gmail.com>
Date:   2019-04-25 19:37:10 +0900

    BSD's mktemp does not have `-p`

commit 57225dc07a3fcc745c7aecc1fb04182b156ad29f
Author: Takashi Kokubun <takashikkbn@gmail.com>
Date:   2019-04-25 19:24:56 +0900

    Show `make checkout-github/merge-github` in help

commit b2e92bfd9f25274277f15faa6e9a70a7d0a36dfe
Author: Takashi Kokubun <takashikkbn@gmail.com>
Date:   2019-04-25 18:54:43 +0900

    Resurrect `make xxx-github PR=1234` interface
    
    `call xxx, yyy` seems to pass " yyy" instead of "yyy".

commit 70adfdcd8de3296e9015338216073e8144dbea04
Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
Date:   2019-04-25 18:29:58 +0900

    Added pr-%
    
    May merge multiple github pull requests at once. e.g.,
    
        $ make pr-123456789 pr-987654321

commit 44bb429bb1bb431dc2805daf93f52509c26b9da7
Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
Date:   2019-04-25 18:27:16 +0900

    Cache git config values

commit 6de9128fe942de9a0306fe63b949b1a9c343e2c8
Author: Takashi Kokubun <takashikkbn@gmail.com>
Date:   2019-04-25 18:05:51 +0900

    Add `make checkout-github` too
    
    You can use this like `make checkout-github PR=1234`

commit 116f91ab504a450b1b96d6b3f029fbaa5f99a305
Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
Date:   2019-04-25 15:33:05 +0900

    Make working tree under the source directory

commit 09ce223b0b297359fd7f9a5d629a70be32157302
Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
Date:   2019-04-25 15:03:54 +0900

    Rebase the pull request in a worktree
    
    A pull request based on an old commit may rewind too many files,
    even if unnecessary.  As rewinding some files, e.g., common header
    files, configure.ac, will result in full-rebuild, rebase in a
    separate directory to get rid of such rewind.

commit d0ba4abf1a00339ebbb5d405db3240a8bdb7b68b
Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
Date:   2019-04-25 13:22:06 +0900

    Add RB_ID_SERIAL_MAX

commit 99084f540171df301478ec66fb89e2c38287e504
Author: Lourens Naudé <lourens@bearmetal.eu>
Date:   2019-04-10 21:05:15 +0900

    Lazy allocate the compile data catch table array
    
    Closes: https://github.com/ruby/ruby/pull/2119

commit 9bfc185a0d93f05f7522a3dea89d69920dcf079c
Author: Kouhei Sutou <kou@clear-code.com>
Date:   2019-04-25 05:28:56 +0900

    Upgrade test-unit to 3.3.2

commit 7d2cb60e48f40d6d6105808e1de1e244a05a8138
Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-25 01:09:06 +0900

    * 2019-04-25

commit 68e3f8192b6df3ee1759bef7725e958aa3e72c3d
Author: Masatoshi SEKI <m_seki@mva.biglobe.ne.jp>
Date:   2019-04-25 01:08:54 +0900

    add DRbObject dereference test (Preparation for investigation of Bug #15711)

commit dd5b6c71c6cf157406e5ead4dfc6188d563bc268
Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
Date:   2019-04-25 00:52:16 +0900

    Fix typos [ci skip]

commit 6061aa0ac1b4d43d107d47ba4d2eecbda77959a1
Author: Takashi Kokubun <takashikkbn@gmail.com>
Date:   2019-04-24 23:26:56 +0900

    Automatically gpg-sign rebase when commit.gpgsign
    
    is true
    
    Closes: https://github.com/ruby/ruby/pull/2148

commit daff4cbd6c7d6be07ae094bda45bca076b37a375
Author: Takashi Kokubun <takashikkbn@gmail.com>
Date:   2019-04-24 22:40:54 +0900

    Add `make fetch-github` and `make merge-github`
    
    Closes: https://github.com/ruby/ruby/pull/2147

commit 2642f22050d74d56da5525b0cd1a5c665ddb4c51
Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
Date:   2019-04-24 18:18:46 +0900

    Add more debug print for random CI failure on osx Travis
    
    see r67347

commit 1613917ae6441b98a52d885f0df1479652be755d
Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
Date:   2019-04-24 17:34:21 +0900

    Defer setting gc_stress instead of setting dont_gc
    
    [Bug #15784]

commit f1a52d96a59c63d46cb23af60cdcaf38e30e0512
Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
Date:   2019-04-24 12:52:57 +0900

    Defer setting gc_stress until inits done
    
    [Bug #15784]

commit 2ef66737081ec029f9c82e11671de36bb70a9e3b
Author: Koichi Sasada <ko1@atdot.net>
Date:   2019-04-24 09:30:07 +0900

    force 10 chars SHA1 display.
    
    `make update-src` shows latest commit hash for convinience.
    However, `rev-parse --short` option shows different length
    (maybe) between git versions. This fix force 10 chars
    with `--short=10`.

commit 19d454a957836a6118f42b0367aea7c823beffae
Author: Aaron Patterson <tenderlove@ruby-lang.org>
Date:   2019-04-24 07:16:17 +0900

    syntax error can move, so do not cache

commit 75061f46ae646e821e9228caa5e3b7f23fa609f0
Author: Aaron Patterson <tenderlove@ruby-lang.org>
Date:   2019-04-24 04:10:52 +0900

    Fix complex hash keys to work with compaction
    
    For example when an array containing objects is a hash key, the contents
    of the array may move which can cause the hash value for the array to
    change.   This commit makes the default `hash` value based off the
    object id, so the hash value will remain stable.
    
    Fixes test/shell/test_command_processor.rb

commit cf930985da1ae15b66577ec8286e54ad04ccda78
Author: Lourens Naudé <lourens@bearmetal.eu>
Date:   2019-03-17 00:53:18 +0900

    Remove member char_offset_updated from struct rmatch as member char_offset_num_allocated can serve the same purpose as that predicate

commit 82ef172a8cb90819bf835e468eb8af2323e3bccf
Author: Takashi Kokubun <takashikkbn@gmail.com>
Date:   2019-04-24 01:10:13 +0900

    The step should not fail when isolated tests
    
    do not exist

commit bc8e54911db505d9e1776673a86e956c7d7e3b89
Author: Takashi Kokubun <takashikkbn@gmail.com>
Date:   2019-04-24 00:39:33 +0900

    Isolate test_gc_compact for osx Travis
    
    After `GC.compact`, test/shell/test_command_processor.rb seems to be made
    unstable on osx Travis like https://travis-ci.org/ruby/ruby/jobs/523487997.
    
    For investigating whether it's impacting that or not, let me try isolating
    that for osx Travis for now.

commit 9629f4c0518f4a22fe8c149019c3d15005f4ef00
Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-24 00:40:29 +0900

    * 2019-04-24

commit 31cf13060cce44d782b068cf083b1ae4def6dc09
Author: Lourens Naudé <lourens@bearmetal.eu>
Date:   2019-03-16 21:48:34 +0900

    Only define history_root member of the Oniguruma re_registers struct if USE_CAPTURE_HISTORY is enabled

commit 14dd8d6b370797f2e419205e9f28368433dc6ceb
Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
Date:   2019-04-23 22:26:40 +0900

    Added cgit url.

commit f4f66bd11c65882b86e0acf4d58f15fb596f25cf
Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
Date:   2019-04-23 21:55:29 +0900

    Revert "IRB is improved with Reline and RDoc, take 2"
    
    Accidentally merged when 89271d4a3733bc5e70e9c56b4bd12f277e699c42
    "Adjusted indents".

commit 89271d4a3733bc5e70e9c56b4bd12f277e699c42
Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
Date:   2019-04-23 20:27:24 +0900

    Adjusted indents

commit f2cd4f4cd0a1e352fcc48a216127beaeda2b2399
Author: aycabta <aycabta@gmail.com>
Date:   2019-04-23 18:09:46 +0900

    IRB is improved with Reline and RDoc, take 2

commit 87cf45a512a7803f266e4782c49e0a99c06a4039
Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
Date:   2019-04-23 16:48:48 +0900

    Fix a typo

commit 2ae5f6f97cd1cd79e3c0ef11da235ddc053a6186
Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
Date:   2019-04-23 15:43:51 +0900

    Add VCS::GIT#commit

commit 2fb83a0af7a49788e80c55fd324dfa8e046cd9d9
Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
Date:   2019-04-23 15:39:36 +0900

    Split git-svn dependent methods

commit 18eb9e585526881cba9752e50b2d206924714339
Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
Date:   2019-04-23 15:03:19 +0900

    Use an exclusive range for ruby_version_is

commit 0d41adf6e2d10ef699e291f468ee955b25671d6f
Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
Date:   2019-01-07 11:03:41 +0900

    Split long expression

commit 4946c3e4b5e465c743da3050169fdb1f7b060c95
Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
Date:   2019-04-23 14:09:45 +0900

    Add tool/format-release to .gitattributes

commit 2e1ac220891eb6f53ab62b7c5f4376d8b7959779
Author: Aaron Patterson <tenderlove@ruby-lang.org>
Date:   2019-04-23 12:38:49 +0900

    Oops, bad merge 🙇‍♂️

commit e50e60b96a90db8dd92a39f89bd1315d63e1515d
Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-23 12:34:10 +0900

    * expand tabs.

commit 5a58318a9036ae2430d0a6b1d27ff3d3fd7fdf13
Author: Aaron Patterson <tenderlove@ruby-lang.org>
Date:   2019-04-23 12:32:20 +0900

    T_MOVED can live on the stack, so make sure we can do book keeping
    
    Unused T_MOVED objects can live on the stack, so we need to make sure
    that they can be accounted for in book keeping

commit 6ca9e7cc0785c33f6d382176dbd79d6c91db72fe
Author: Seiei Miyagi <hanachin@gmail.com>
Date:   2019-04-23 00:21:50 +0900

    Disallow numbered parameter as the default value of optional argument
    
    [Fix GH-2139] [Bug #15783]

commit ae07b66aaa092c59ac9d544c9b582712290dc357
Author: Seiei Miyagi <hanachin@gmail.com>
Date:   2019-04-23 00:01:17 +0900

    Fix internal error of `->x:@2{}`
    
    [Fix GH-2139] [Bug #15783]

commit ea520ca9273699fc1c77a71bbeba4b6e06ccfc6c
Author: Aaron Patterson <tenderlove@ruby-lang.org>
Date:   2019-04-23 09:14:36 +0900

    Prevent rb_define_(class|module) classes from moving
    
    Before this commit, classes and modules would be registered with the
    VM's `defined_module_hash`.  The key was the ID of the class, but that
    meant that it was possible for hash collisions to occur.  The compactor
    doesn't allow classes in the `defined_module_hash` to move, but if there
    is a conflict, then it's possible a class would be removed from the hash
    and not get pined.
    
    This commit changes the key / value of the hash just to be the class
    itself, thus preventing movement.

commit 660c0716595a8fc942d12317a5c55c038b830e94
Author: Urabe, Shyouhei <shyouhei@ruby-lang.org>
Date:   2019-03-08 17:10:08 +0900

    [ci skip] grammers in comments

commit 9cdb736672bec22a8396f8077f8eea758bb2ef88
Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
Date:   2019-04-23 10:15:01 +0900

    Missing semicolon

commit a9b57862bd5b81fb091202d82fb26f3f9ecdc4a3
Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-23 10:19:53 +0900

    * 2019-04-23

commit a8d4dc287fc8621c5b786140714736cb747d3291
Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-23 10:19:47 +0900

    * expand tabs.

commit 98ee63693d963e96ac7d81ac33a5b12103b577b3
Author: Aaron Patterson <aaron.patterson@gmail.com>
Date:   2019-04-23 08:23:04 +0900

    Symbols can move, so don't cache in static pointer
    
    This changes the static pointers to use IDs then look up the symbols
    with the ID.  Symbols can move, so we don't want to keep static
    references to them.

commit 6fbf4e22c83b4504d2d9a4a42216e4306a4e7e38
Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
Date:   2019-04-22 23:10:10 +0900

    Adds a reference to `TracePoint` to `binding` docs
    
    This change adds an explicit reference to `TracePoint` in the
    documentation for `binding`. Currently it only refers to the now
    deprecated `Kernel#set_trace_func`. This reference is left alone for
    continuity in the documentation.
    [Fix GH-2079]
    
    Co-authored-by: Brandon Weaver <baweaver@squareup.com>

commit 8c689e216fe749c9c7298c21a8114d6e680b015f
Merge: 4cd67a848a e19e5d2409
Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
Date:   2019-04-22 22:44:38 +0900

    Merge branch 'patch-5' of https://github.com/sos4nt/ruby into trunk
    
    [Fix GH-2084]

commit e19e5d2409e99ef7fd450d317e71e119cb5a4c3a
Author: Stefan Schüßler <mail@stefanschuessler.de>
Date:   2019-02-18 20:44:01 +0900

    Fix return value name in docs for Array#union
    
    Throughout the docs, `new_ary` is used to indicate a new array, whereas `ary` refers to the receiver.

commit 4cd67a848a0648c20b1cab9d2dfe1bf7d7d90be0
Author: Takashi Kokubun <takashikkbn@gmail.com>
Date:   2019-04-22 22:00:33 +0900

    Fix RUBY_REVISION spec
    
    broken by 5da52d1210625fb00acd573b3f32281b4bde1730

commit 87261cf59f4914801512cf0f3f1332f0c94b6952
Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
Date:   2019-04-22 21:44:44 +0900

    Omit last_commit=RUBY_LAST_COMMIT_TITLE without local commits

commit 5da52d1210625fb00acd573b3f32281b4bde1730
Author: Takashi Kokubun <takashikkbn@gmail.com>
Date:   2019-04-22 21:23:37 +0900

    Migrate RUBY_VERSION/RUBY_DESCRIPTION to Git
    
    from Subversion.
    
    This behavior is tentative and not discussed well. The point of
    discussion will be just the length of commit hash, and I thought we
    should include this kind of change in 2.7.0-preview1 release even before
    the length is fixed yet.
    
    Let's discuss that afterwards and fix it later as needed. Naruse
    suggested that length=10 is very unlikely to cause conflict, and thus
    it's used by email notification and rubyci now. This behavior is in
    favor of that for now.

commit dd0b516399f1e009667a99e815bf86c6a1245ee5
Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
Date:   2019-04-22 21:01:34 +0900

    Tk is already removed from stdlib at r55844
    
    https://github.com/ruby/ruby/commit/303dc3c591e324b6bbc691326d8bea76fe3b8fda

commit c697bade0fc1a7f80122fac7bfe4d137f999f841
Author: SHIBATA Hiroshi <hsbt@ruby-lang.org>
Date:   2019-04-22 20:01:07 +0900

    Ignore VSCode configuration from git.

commit 6a2c8e46f63998b860f5dbf4a89e2f7ee2d7ed0e
Author: SHIBATA Hiroshi <hsbt@ruby-lang.org>
Date:   2019-04-22 20:00:32 +0900

    Use github url instead of ViewVC.

commit 184447d91c71aaab6a6f4e6e0527f553872036fb
Author: SHIBATA Hiroshi <hsbt@ruby-lang.org>
Date:   2019-04-22 19:37:22 +0900

    ViewVC of svn.ruby-lang.org was shutdown status.

commit ae3f38dc533f2967214f826d3ed45f950f94a8e7
Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
Date:   2019-04-22 19:02:17 +0900

    CRuby trunk uses git instead of subversion now

commit f005ccc771574e8e4e17b7a35c19b352e0b7dc73
Author: Shugo Maeda <shugo@ruby-lang.org>
Date:   2019-04-22 17:15:49 +0900

    Clarify requirements of <=>
    
    A return value of <=> is automatically converted to -1, 0, or 1, so
    other values can be returned.  [Misc #15630]

commit 6013e41a7bb1d6909e0538ccb885b477bd080163
Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
Date:   2019-04-22 11:39:08 +0900

    Support of Ruby 2.3 has ended
    
    https://www.ruby-lang.org/en/news/2019/03/31/support-of-ruby-2-3-has-ended/

commit beaddd1d327a1c6fe16ab2c84191251280657e48
Author: NAKAMURA Usaku <usa@ruby-lang.org>
Date:   2019-04-22 11:33:56 +0900

    Now only supports Git repository

commit b26a7c8d86d8a750a0124340a6d6c1010b768ab2
Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-22 10:06:50 +0900

    * remove trailing spaces.

commit e949c084b52de8c2a938e7a959dd61d6e9b78f2d
Author: Takashi Kokubun <takashikkbn@gmail.com>
Date:   2019-04-22 10:05:56 +0900

    README.ja.md: Update description about Git repository
    
    Backported 4c570abf77 to Japanese

commit 44a468ccdad87ac58e0bb1eccb8b67910bfc7b50
Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-22 09:55:20 +0900

    * remove trailing spaces.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67701 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 4c570abf773a0c627592ddef584f3375f791126c
Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-22 09:55:19 +0900

    README.md: Update description about Git repository
    
    We started to switch from SVN to Git. Because GitHub would be more
    reliable than our single-host cgit, I continued to list GitHub mirror
    repository in the first place.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67700 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 693c28d59f6c5eb9dc4fefba57c7967c0dd49b63
Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-22 00:04:07 +0900

    * 2019-04-22
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67699 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit fdd3091274867197b20bd2c9502fcc5cf3470130
Author: kazu <kazu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-22 00:04:06 +0900

    Fix a typo [ci skip]
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67698 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit b6fd7b1bb741edfe08b9f9da4652b5e1d5d3a57a
Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-21 23:24:38 +0900

    tool/redmine-backporter.rb: Git support in backport/rel
    
    close https://github.com/ruby/ruby/pull/2138
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67697 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit c7db05d216cc4c72bed494d026898784ba6b3b5b
Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-21 22:05:32 +0900

    tool/redmine-backporter.rb: Remove unused methods
    
    They seem to have never been used from the beginning (r45081).
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67696 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 72be46f104446ed2dd0a6c2476045fa9f9051f6e
Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-21 21:26:06 +0900

    Drop tool/generate-backport-changelog.rb
    
    because we're not writing ChangeLog since ruby_2_4.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67695 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 2c31e6dec4e0625c9a79f7d5df669d2ee5abb1de
Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-21 21:03:39 +0900

    tool/merger.rb: Guard match failure properly
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67694 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit de5378233b2ff5434f024ac66285e699794a321d
Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-21 20:49:11 +0900

    tool/merger.rb: Support fetching patch from cgit
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67693 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 47676e969e9ecb204e704f0221816167afa79362
Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-21 19:01:44 +0900

    tool/merger.rb: Drop ChangeLog handling
    
    We're not writing ChangeLog since ruby_2_4.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67692 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 51cec00953ff8d7baa483d3846aa1dbdb89101aa
Author: aycabta <aycabta@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-21 18:13:49 +0900

    Revert "IRB is improved with Reline and RDoc"
    
    This reverts commit 7f273ac6d0f05208b5b228da95205e20c0e8286c.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67691 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 683834eb72cfa77f4eac1c705327b522302b1721
Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-21 17:34:37 +0900

    Drop MJIT_FUNC_EXPORTED from rb_hash_bulk_insert
    
    it's official API after r67677
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67690 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit add82b7e7eebfb8ee311bd85cd2111874f3564f2
Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-21 17:19:48 +0900

    Drop obsoleted feature from help
    
    I understand this is dropped in r67569
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67689 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 9c51ef5bc44fc50e9e89a622cf566c6aae0449b4
Author: aycabta <aycabta@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-21 16:37:34 +0900

    Merge upstream of Reline
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67688 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit ea1835caf27e7a4ba31d2c87d05ac292d6d108cd
Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-21 16:27:52 +0900

    Drop unnecessary newline in short line [ci skip]
    
    I'm commiting safe things to test commit hooks on production...
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67687 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 60455b39bbc98a9faab4cf289feb7191cff8220d
Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-21 16:21:55 +0900

    Fold too-long line for readability [ci skip]
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67686 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 0d23d02ac75cb4349d6dcc3b4ad2b3fba7573f58
Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-21 16:17:35 +0900

    Use consistent comma in .ja [ci skip]
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67685 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit c23b258d4dc3e1ee34ca6e3351952196bbbf7ab2
Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-21 16:14:59 +0900

    Drop created at in .ja like en version [ci skip]
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67684 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 96147b3a12b24f69f2aaccc385d87cceaaec7f6a
Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-21 16:12:51 +0900

    Slightly modify ja sentence [ci skip]
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67683 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 0d972252b0196d7ebb9994292c112a258e68886c
Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-21 16:08:32 +0900

    Backport README change to .ja.md [ci skip]
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67682 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 221e293733d89fd9b87d966b0891076162264535
Author: aycabta <aycabta@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-21 16:08:26 +0900

    Add test/reline/ again, I'm back
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67681 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit d9a01bc17a3b1097906c8751b621c9a212f29f42
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-21 15:08:00 +0900

    Remove unused variable and check if successed
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67680 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 9a83922b666d4e26b84840757b16b0f9df6acef9
Author: naruse <naruse@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-21 14:48:35 +0900

    suppress redefinition warnings
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67679 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 7f09b5e9da8f83f84c5b6ae7a644a562811fec73
Author: naruse <naruse@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-21 14:48:35 +0900

    suppress warning in test/irb
    
    https://rubyci.org/logs/rubyci.s3.amazonaws.com/centos7/ruby-trunk/log/20190421T040003Z.fail.html.gz
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67678 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit d3df725f9efeb0e6c121f9a1316abaa90956f1b8
Author: naruse <naruse@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-21 14:37:11 +0900

    Make rb_hash_bulk_insert public
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67677 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit d9c17c1a877349b193a0718d91bf9d5f05d3b853
Author: kazu <kazu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-21 13:54:04 +0900

    git.ruby-lang.org may be slow than github.com from oversea
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67676 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 5906bcc95ab5973b46213e1ec08b71cd4f8f60bd
Author: usa <usa@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-21 13:53:44 +0900

    Remove debug lines
    
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67675 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 66b6d76648c65bf1fa1f284ca691100a8a9f9882
Author: usa <usa@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-21 13:52:38 +0900

    Show/unshow executing command as specified by `V`
    
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67674 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 03c6cb5e8f503dcf6bc80a70a48a9775bbd2a47e
Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-21 13:02:24 +0900

    Note about cgit url [ci skip]
    
    testing svn hook by this commit
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67673 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 710e763e72d925fc25cd5974158cc9e14016a81b
Author: ktsj <ktsj@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-21 12:56:42 +0900

    test/ruby/test_pattern_matching.rb: add missing tests for NODE_DASGN, NODE_LASGN
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67672 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 2dc51bf447dd837e9dc3189bbccaf23db0776816
Author: aycabta <aycabta@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-21 12:51:26 +0900

    Remove test/reline temporary, I'll come back
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67671 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 2a5ea43507564739be53af511c9b3a4891db9700
Author: ko1 <ko1@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-21 12:46:25 +0900

    add ensure to restore $stdout correctly.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67670 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit d0e50b7d5ba6cd247110a0b867a2e1b5442d9978
Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-21 12:38:53 +0900

    * properties.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67669 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit b02f368c82ffbc5318a11e3d700035062bd1d816
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-21 12:38:52 +0900

    Restore pwd
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67668 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 72cbc3142dbabc54ff225950034335d4f5a4521f
Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-21 12:35:07 +0900

    Revert "Try dropping const qualifier to suppress msiwn warning"
    
    This reverts commit b023c1cc07b2fd6e201bf3aeb4a1df9af3854888.
    
    in favor of r67666.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67667 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit e6a7b8a4879dfa44fa1dcefb67f064322570c4c7
Author: usa <usa@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-21 12:33:05 +0900

    Get rid of warinings of VC
    
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67666 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit b023c1cc07b2fd6e201bf3aeb4a1df9af3854888
Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-21 12:32:03 +0900

    Try dropping const qualifier to suppress msiwn warning
    
    https://ci.appveyor.com/project/ruby/ruby/builds/23995093/job/qo728n1uorepkx16
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67665 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 4cb2dcdf02964650412c0e34ecbb3dcb744f2a2e
Author: hsbt <hsbt@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-21 12:31:34 +0900

    ubygems.rb is already removed from ruby repository.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67664 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit a3adb11fa60a184231cbd085c3171e675db4c8ce
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-21 12:30:48 +0900

    test/reline/helper.rb: define RELINE_TEST_ENCODING always
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67663 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 0db89a38f22754eb09c69ae3e38533c91b5e3b17
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-21 12:30:38 +0900

    Show the latest commit hash after update
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67662 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 2c6e241462e02003fc9c3103b8f6aed465b33927
Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-21 12:12:05 +0900

    Remove obsoleted TODO comment [ci skip]
    
    looks like it's updated sufficiently
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67661 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 01efa5d912f47829eb7fbb472d899ed293105d25
Author: ktsj <ktsj@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-21 12:11:38 +0900

    Add missing test for p_var_ref
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67660 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit e7d76e3f5aa78f81e38de5e4ef16cffe7ad7a0d5
Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-21 11:58:10 +0900

    tool/merger.rb: Drop some revision notations.
    Maintainer use merger mainly from redmine-backporter.rb.
    
    [Fix GH-2136]
    
    From: Chikanaga Tomoyuki <t-chikanaga@groovenauts.jp>
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67659 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit ffc93316c8035ade6bf035dd9348dfcc143e2d4b
Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-21 11:58:10 +0900

    tool/merger.rb: Remove unused command line format.
    I believe no-one use this notation for years.
    
    [Fix GH-2136]
    
    From: Chikanaga Tomoyuki <t-chikanaga@groovenauts.jp>
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67658 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit dad3047659a503d7e6f4ded362f8d58ecca20b1f
Author: kazu <kazu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-21 11:51:03 +0900

    Remove redundant cast
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67657 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit bb77cc183732cf68e224398c30d8e38d02cab14c
Author: ktsj <ktsj@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-21 11:43:31 +0900

    Add missing tests for p_args
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67656 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 1a0990cb143f8988603fe510b8ed840780a77d1f
Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-21 11:33:15 +0900

    * properties.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67655 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 65f1b8118357f48064626702b19561eeb5d9b9c7
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-21 11:33:14 +0900

    Fix test library name
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67654 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit eeee4f404b9e2dd9cac84de2b30f7bf1ba608c53
Author: ktsj <ktsj@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-21 11:18:28 +0900

    Remove unnecessary condition
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67653 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit ecf4e8fbd7efe33e536bbef8d9e58b3c345dda48
Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-21 10:39:09 +0900

    * 2019-04-21
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67652 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 985192f092aa36a88836a51012b7d572bccd5c0e
Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-21 10:06:25 +0900

    Make README.md similar to README.ja.md [ci skip]
    
    making safe commit to debug svn hook
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67651 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 838f1f61bfd31861a8ddc470e33cf21ee866ad7b
Author: tenderlove <tenderlove@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-21 07:25:59 +0900

    skip test until we can guarantee movement of certain objects
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67650 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 3863b7776f68821e5a873fd3a73886a2eb377845
Author: aycabta <aycabta@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-20 18:32:44 +0900

    Remove IRB's old test files
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67649 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 66ae3bd5599186599af5041dced836087cdeb3bd
Author: tenderlove <tenderlove@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-20 18:29:19 +0900

    skip test if mjit is enabled
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67648 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit d4a555d441895cc56243b1a411404e324fbcf89f
Author: aycabta <aycabta@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-20 18:23:09 +0900

    Add "require 'stringio'"
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67647 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit ffaee7b301abfd451c7c5028602a2184e6a9dd90
Author: aycabta <aycabta@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-20 18:16:16 +0900

    Use require_relative for tests of Reline
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67646 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 7f273ac6d0f05208b5b228da95205e20c0e8286c
Author: aycabta <aycabta@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-20 17:51:20 +0900

    IRB is improved with Reline and RDoc
    
    Reline is a readline stdlib compatible library. It also supports
    multiline input. IRB is improved with Reline and supports multiline.
    Besides, supports showing documents when completed.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67645 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 91faab7f1477c65f71aee8324cdeca7b6f19434a
Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-20 16:52:59 +0900

    Fix wrong critical section label
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67644 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit ef73bee8113638199595611240d74d310f8a4f57
Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-20 16:37:29 +0900

    Prefix rb_ to MJIT wait call since it's exported
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67643 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit e4a0304aef5f2475b6111eca85daee032d88155c
Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-20 16:16:11 +0900

    Workaround Wercker check which is not working now
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67642 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 9c587d22bd31f50a3a07f5024b7376302e902e09
Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-20 15:54:41 +0900

    Skip test_find_collided_object on problematic CIs for now
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67641 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 78d3e4396d3c2ca53875fdbc9a24032d6eebf4f6
Author: tenderlove <tenderlove@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-20 15:08:54 +0900

    Make sure the has_remembered_objects flag is correctly set
    
    Remembered objects can move between pages, so we need to make sure the
    flags on the page are set correctly.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67640 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit c2b8cd425e80ea75c9f3efd8b5b63f1f235b6b54
Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-20 14:50:19 +0900

    Revert "Revert "Skip ISeq reference for stale_units for debugging""
    
    This reverts commit b79899b56a9ebadf5c493c4df2419ebf63934381.
    
    I wanted to test r67638 first. Now let me try this as well.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67639 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit b2ffafd2383fef50933a725797b1ea7ae4fbdaea
Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-20 14:48:22 +0900

    Invalidate JIT-ed code if ISeq is moved by GC.compact
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67638 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit b79899b56a9ebadf5c493c4df2419ebf63934381
Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-20 14:45:56 +0900

    Revert "Skip ISeq reference for stale_units for debugging"
    
    This reverts commit 4bd4d4e4cfd164f767e88f844cf10b06faee14b9.
    
    Sorry, let me test another one first
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67637 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 4bd4d4e4cfd164f767e88f844cf10b06faee14b9
Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-20 14:44:47 +0900

    Skip ISeq reference for stale_units for debugging
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67636 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 109633b12730484ea23bac5203a8ed6d6d820477
Author: tenderlove <tenderlove@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-20 14:11:37 +0900

    Always pin stack zombie and moved slots
    
    We should always pin stack zombies and moved
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67635 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit b25bf66a8cd34e10f436535c8b9371bca8978a2c
Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-20 14:00:45 +0900

    * properties.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67634 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 5d9acf07fb679aab643fd553af8b2469aa145158
Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-20 14:00:45 +0900

    * expand tabs.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67633 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 1686c0d470d56dcd7348351f0d1979d1ca1b4133
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-20 14:00:43 +0900

    Add `Time#floor`
    
    [Feature #15653]
    [Fix GH-2092]
    
    From: manga_osyo <manga.osyo@gmail.com>
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67632 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit b914bea88ea0371f0b37781a2d0db03759bd5a7e
Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-20 13:50:21 +0900

    Check ISeq references in stale_units too
    
    This is a possible bug from recent "JIT recompile" introduction.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67631 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit c98d1f182d1b5870272e25b7e636b49849f2c71c
Author: tenderlove <tenderlove@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-20 13:13:29 +0900

    add more assertions around moved object
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67630 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 243842f68a97a34a36a7e8c690efe7e18bf81e91
Author: ktsj <ktsj@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-20 12:37:22 +0900

    Avoid usage of the dummy empty BEGIN node
    
    Use NODE_SPECIAL_NO_NAME_REST instead.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67629 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 27f75cf3dc74ad70d065a7d8a14dbaa0eeac1023
Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-20 12:29:20 +0900

    Update ISeq references in stale_units as well
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67628 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit b8b503d657731fc0982c584f8b82f4976ea1283f
Author: yui-knk <yui-knk@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-20 12:25:36 +0900

    Add symbol to the result of `RubyVM::AbstractSyntaxTree#children`.
    
    Add symbol to the result to make pattern match easily.
    
    For example:
    
    (1) NODE_MASGN * NODE_SPECIAL_NO_NAME_REST
    
    ```
    $ ./miniruby -e 'p RubyVM::AbstractSyntaxTree.parse("a, * = b").children[-1].children'
    [#<RubyVM::AbstractSyntaxTree::Node:VCALL@1:7-1:8>, #<RubyVM::AbstractSyntaxTree::Node:ARRAY@1:0-1:1>, :NODE_SPECIAL_NO_NAME_REST]
    ```
    
    (2) NODE_POSTARG * NODE_SPECIAL_NO_NAME_REST
    
    ```
    $ ./miniruby -e 'p RubyVM::AbstractSyntaxTree.parse("a, *, _ = b").children[-1].children[-1].children'
    [:NODE_SPECIAL_NO_NAME_REST, #<RubyVM::AbstractSyntaxTree::Node:ARRAY@1:6-1:7>]
    ```
    
    (3) NODE_LASGN * NODE_SPECIAL_REQUIRED_KEYWORD
    
    ```
    $ ./miniruby -e 'p RubyVM::AbstractSyntaxTree.parse("def a(k:) end").children[-1].children[-1].children[1].children[7].children[0].children'
    [:k, :NODE_SPECIAL_REQUIRED_KEYWORD]
    ```
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67627 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 91557d0c52de3287a319e241215803989159adcc
Author: tenderlove <tenderlove@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-20 12:00:49 +0900

    check the index rather than include
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67626 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 79accaf8d4dda146004eaa9a3477b31448913537
Author: tenderlove <tenderlove@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-20 12:00:08 +0900

    fix strict compile errors
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67625 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit c784da17448c40e55cdd231724bfe4bf53da35a1
Author: tenderlove <tenderlove@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-20 11:40:41 +0900

    Update MJIT references
    
    ISeq can move, so we need to tell MJIT where the new location is.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67624 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 6c4fd432d0242647149906f7433a9f5025819d07
Author: tenderlove <tenderlove@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-20 10:59:34 +0900

    Try harder to make objects move
    
    Sometimes the objects we allocated may not get compacted.  This change
    is to increase the likelyhood that they will move
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67623 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit db14ceae4217a37d40fc676d893e44177bde35b6
Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-20 10:20:09 +0900

    * 2019-04-20
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67622 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit c74a44d64c20a7f234d0135b492a7d0f06207351
Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-20 10:20:08 +0900

    * properties.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67621 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 91793b8967e0531bd1159a8ff0cc7e50739c7620
Author: tenderlove <tenderlove@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-20 10:19:47 +0900

    Add `GC.compact` again.
    
    🙏
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67620 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit e3d547f6df76a48834cfd9893baf4f51567b3afb
Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-19 22:57:21 +0900

    Reflect README.md contents to README.ja.md [ci skip]
    
    I seem to have found the svn hook bug. Let me test that again.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67619 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 5b3c099ad2aac985d054c1af9728bdb0eb9b0228
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-19 19:55:07 +0900

    Removed extra empty lines
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67618 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 4cfc6cedc46c3bf95497290092a63028d6b4e3b2
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-19 19:45:16 +0900

    template/prelude.c.tmpl: allow UTF-8 characters
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67617 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit f1a33775494f1b81d6f6722817f1c7e5db61a27c
Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-19 18:23:13 +0900

    Use similar line length in README [ci skip]
    
    still debugging svn hook...
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67616 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit af56793a8d7e120e33b9327a8d52c18a6a1c76d8
Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-19 18:09:46 +0900

    README.md simplified [ci skip]
    
    - "do system management tasks" -> "manage the system"
    - "talk about" -> "discuss"
    - "The URL of the Ruby home page is:" and "This is what you need to do to compile and install Ruby:" are removed because of redundancy.
    - "Bugs reports should be filed" -> "Bugs should be reported"
    
    [Fix https://github.com/ruby/ruby/pull/2004]
    
    From: yzzhang-cs
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67615 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 1845c9d9bae9bc0731bc5d58ecc0f5df4ea7c33d
Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-19 18:00:26 +0900

    Revert "README.md simplified [ci skip]"
    
    This reverts commit 41fabbcc0ef7f6e025c1af8bf0387ee9e38d655f.
    
    because I had a mistake in comment message.
    (to commit svn hook again)
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67614 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 4dd1cf3b27f5a92045176129ff2d4f5d8cea466a
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-19 17:53:40 +0900

    time.c: added in: option to Time.now
    
    * time.c (time_s_now): added in: option to Time.now as well as
      Time.at.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67613 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit fb042e0f0c6c7380ca1c68b3a8cb4b523ce164eb
Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-19 17:44:23 +0900

    * remove trailing spaces. [ci skip]
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67612 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 41fabbcc0ef7f6e025c1af8bf0387ee9e38d655f
Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-19 17:44:22 +0900

    README.md simplified [ci skip]
    
    - "do system management tasks" -> "manage the system"
    - "talk about" -> "discuss"
    - "The URL of the Ruby home page is:" and "This is what you need to do to compile and install Ruby:" are removed because of redundancy.
    - "Bugs reports should be filed" -> "Bugs should be reported"
    
    [Fix GH-${pr_id}]
    
    From: yzzhang-cs
    
    (merging some safe PR to test svn hook)
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67611 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 390ea5442089b8507a7d88c7d8756049bfcc0d4a
Author: tenderlove <tenderlove@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-19 15:21:55 +0900

    Only mark the superclass if there is one
    
    Some classes don't have a superclass, so we should check to see if it's
    there before marking.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67610 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 14626ed20a6677ab767e764c9edff83f94872f1a
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-19 07:30:01 +0900

    fake.rb.in: split by whitespaces not to be affected by -F option
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67609 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit c3c4e411ebd94403055360506ccac248114eebba
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-19 07:24:03 +0900

    parse.y: suppress warning
    
    * parse.y (parser_append_options): explicitly pass $; when auto
      splitting, to suppress the warning for non-nil $;.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67608 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 396c1846fa8ba1f513cfe3c846e383e4b46d2e53
Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-19 06:57:09 +0900

    * 2019-04-19
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67607 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 3ee0648dc7a5465b2cbadd7246fc2edbd676d759
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-19 06:56:55 +0900

    io.c: warn non-nil $,
    
    * array.c (rb_ary_join_m): warn use of non-nil $,.
    
    * io.c (rb_output_fs_setter): warn when set to non-nil value.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67606 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 4751caecc357c313c3c81c3d422a3cbc880c6ecc
Author: hsbt <hsbt@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-18 21:56:47 +0900

    Removed deprecated executable from bundler upstream.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67605 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit b86d87c81a6b2f2b494e1b23af22194c46864fb5
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-18 18:56:03 +0900

    Suppress warnings
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67604 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 4d1f86a1ffceb3323b4e2fac82dfc40c5a382e9e
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-18 18:34:40 +0900

    string.c: warn non-nil $;
    
    * string.c (rb_str_split_m): warn use of non-nil $;.
    
    * string.c (rb_fs_setter): warn when set to non-nil value.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67603 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit eb3d3dfcc1ad61cb3040acfdf41f71c228b892e4
Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-18 13:55:52 +0900

    * 2019-04-18
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67602 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 80282c76a3f7caa22bc06e153a34ae69a35cc4ee
Author: kou <kou@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-18 13:55:49 +0900

    Take over strscan maintenance
    
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67601 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 286f0b8ae3c30b5911199924a1779ca045afb079
Author: hsbt <hsbt@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-17 22:20:02 +0900

    Added rubygems and bundler entries.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67600 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 828353334afb893456cffdb2daca991e985af8a9
Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-17 18:41:55 +0900

    * expand tabs.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67599 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 744e5df7156c8bb3fea61bacb1bf27d3d8698548
Author: tenderlove <tenderlove@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-17 18:41:41 +0900

    Reverting compaction for now
    
    For some reason symbols (or classes) are being overridden in trunk
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67598 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit f399134e8ff61faa81d624e2dd2e05ed61d32af1
Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-17 18:24:48 +0900

    NEWS: note about recent changes around JIT [ci skip]
    
    This diff is backported from the upcoming preview release note.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67597 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 0f31971ad3e846cc8d9fa3258e8b9abfe85f0f1f
Author: kazu <kazu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-17 17:53:32 +0900

    Suppress warning in assertion too
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67596 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit a2366a15bad75fb2ddec63d36aff4af4be14ff14
Author: kazu <kazu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-17 17:39:52 +0900

    Suppress warnings in `make test-all`
    
    suppress "warning: Pattern matching is experimental, and the behavior may change in future versions of Ruby!"
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67595 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit ffbcf9f842d228e4a95b13f415dfc4e141e8f4f0
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-17 16:35:29 +0900

    downloader.rb: enable cache files
    
    * tool/downloader.rb (Downloader::Unicode.download): enable cache
      files when index.html has not been modified since the previous
      download, even if beta version.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67594 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit c576f14039c920e40e6849657e6dd87772f6f7da
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-17 16:35:27 +0900

    common.mk: download data and property files together
    
    * common.mk (update-unicode-files): download data and property
      files together, not to download index html twice.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67593 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit bd698312fa96a5a5232eb1f1943bf7eac997aa46
Author: yui-knk <yui-knk@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-17 16:15:08 +0900

    Fix the format of NODE_IN node
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67592 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 5141398ff060bdaa437418cc35adcbfe0f886cb0
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-17 16:09:28 +0900

    downloader.rb: use File.read instead of IO.read
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67591 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 8e6c1a186c2c1ccfce2788ba307dae35e2dd03a8
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-17 16:09:24 +0900

    common.mk: update auxiliary and emoji files
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67590 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit fc9f19abe853bcef2b348e2d6d7c555b677ab28d
Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-17 15:48:26 +0900

    * expand tabs.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67589 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit da8cd2dc30c26e9df47b743e7d1c16025e255628
Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-17 15:48:07 +0900

    * properties.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67588 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 9c9db64d7e9058dc6fc7ead3791b259685798806
Author: ktsj <ktsj@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-17 15:48:05 +0900

    Define Struct#deconstruct
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67587 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 9738f96fcfe50b2a605e350bdd40bd7a85665f54
Author: ktsj <ktsj@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-17 15:48:03 +0900

    Introduce pattern matching [EXPERIMENTAL]
    
    [ruby-core:87945] [Feature #14912]
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67586 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit b077654a2c89485c086e77c337d30a11ff3781c3
Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-17 15:16:39 +0900

    * expand tabs.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67585 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 281a22a39864602938cd881265243a3bb60df792
Author: tenderlove <tenderlove@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-17 15:16:35 +0900

    Super should be marked regardless of whether or not ext exists
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67584 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 7bd58a4e6d214b78645f0a15dcc691d3faaa1acf
Author: tenderlove <tenderlove@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-17 15:13:11 +0900

    update super even if there is no ext
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67583 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit e1eb54b99d592c460fea4b0f897f5e8e61c96c07
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-17 14:34:46 +0900

    string.c: improve splitting into chars
    
    * string.c (rb_str_split_m): improve splitting into chars by an
      empty string, without a regexp.
    
        Comparison:
                               to_chars-1
                  built-ruby:   1273527.6 i/s
                compare-ruby:    189423.3 i/s - 6.72x  slower
    
                              to_chars-10
                  built-ruby:    120993.5 i/s
                compare-ruby:     37075.8 i/s - 3.26x  slower
    
                             to_chars-100
                  built-ruby:     15646.4 i/s
                compare-ruby:      4012.1 i/s - 3.90x  slower
    
                            to_chars-1000
                  built-ruby:      1295.1 i/s
                compare-ruby:       408.5 i/s - 3.17x  slower
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67582 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 62c07674e06443075872bdc11662de6408bd00d2
Author: tenderlove <tenderlove@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-17 14:19:05 +0900

    make verification more strict
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67581 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit dbc9f43cb38acc037b152949a9f7b98362a6dcac
Author: tenderlove <tenderlove@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-17 13:05:29 +0900

    call verification method in addition to compaction
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67579 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit c54f9a5b101e709e98bc8306643feaddc8a3d934
Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-17 12:17:42 +0900

    * properties.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67578 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit aee9f24973271d8602cd6924266b1e6fffad3f8e
Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-17 12:17:42 +0900

    * expand tabs.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67577 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 3c55b643aec09bbe779dab25b2397947eded2b9b
Author: tenderlove <tenderlove@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-17 12:17:25 +0900

    Adding `GC.compact` and compacting GC support.
    
    This commit adds the new method `GC.compact` and compacting GC support.
    Please see this issue for caveats:
    
      https://bugs.ruby-lang.org/issues/15626
    
    [Feature #15626]
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67576 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit fcd679ed11e3e801431f2f931dbe925edb8df0bf
Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-17 02:02:35 +0900

    Recompile without method inlining
    
    if cancel happens in an inlined method.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67575 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit d71b78575b08f55d35194b2c091719b2c4463ea3
Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-17 02:02:16 +0900

    Introduce frame-omitted method inlining
    
    for ISeq including only leaf and no-handles_sp insns except leaf.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67574 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit b914166fcdba3faf5d4cb5e3a18d49691546ce21
Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-17 02:01:07 +0900

    * 2019-04-17
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67573 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit b0614decfc2c756abd37347477f262bb09c27233
Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-17 02:01:05 +0900

    Implement single-level basic method inlining in JIT
    
    "Basic" means it does not omit a call frame.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67572 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit dcf5c19c9f89d732da70a1a16a2fe60cd1999bcc
Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-16 08:58:09 +0900

    * 2019-04-16
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67569 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 3f7c6aea3e7bd8cc8b70c2274659250f1b877de5
Author: knu <knu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-16 08:58:06 +0900

    Mention SNI support in Net::IMAP
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67568 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit e68495e5f4dfd466ad56f745502d1d78cdba07de
Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-15 23:38:57 +0900

    Carve out mjit_compile_body
    
    This refactoring is needed for implementing inlining later.
    I've had this since long ago and it has conflicted sometimes. So let me
    just commit this now.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67566 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 246723a34ce5024e1d018cee4327dcce1bbd55c6
Author: knu <knu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-15 19:52:34 +0900

    Support SNI (Reapplying r67488)
    
    This fixes connecting using TLS 1.3 to imap.gmail.com
    
    [Fix GH-2077] [Feature #15594]
    
    From: Marc-Antoine Perennou <Marc-Antoine@Perennou.com>
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67563 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 3791bdf08084b40f0e6f499a83715639c7d25b1e
Author: kou <kou@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-15 11:05:03 +0900

    Import CSV 3.0.9
    
    This fixes test failures on Windows.
    
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67561 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit e3b6c7c7ebca1b051dbaa6f33494e92f5638fcc9
Author: kou <kou@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-15 06:01:51 +0900

    Import CSV 3.0.8
    
    This includes performance improvements and backward incompatibility
    fixes.
    
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67560 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit fb96811d15f83c6b692e8e00d458eef32032af6a
Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-15 00:25:11 +0900

    Drop obsoleted debugging output [ci skip]
    
    I confirmed that it's working now in
    https://dev.azure.com/rubylang/ruby/_build/results?buildId=396&view=logs&jobId=8c5967c9-8e3a-5773-c80c-34c55d5c3051
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67559 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit ad9c5c5db69a1e94a980a5b0d09bacca8b0c647e
Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-15 00:13:50 +0900

    * 2019-04-15
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67558 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 17b606d8b356d732dbc0fb38c9ab05a5a28d3939
Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-15 00:13:49 +0900

    Fix broken variable propagation on Azure
    
    It looks like the old definition was not working as intended...
    https://dev.azure.com/rubylang/ruby/_build/results?buildId=394
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67557 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 816c5323fe82a7a4502f35ab8252ed56a6251688
Author: marcandre <marcandre@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-14 22:47:24 +0900

    OpenStruct: improve error message when passing wrong number of arguments.
    
    Patch by Lisa Ugray (issue #15515)
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67556 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 1119bb4794b32fc0edfc95ba12f02bf151c170c5
Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-14 22:42:13 +0900

    Debug bundled-gems allow_failures
    
    it seems not working in
    https://dev.azure.com/rubylang/ruby/_build/results?buildId=392
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67555 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit ead870d7c3b95bc51bd404541e087352ed7bf464
Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-14 22:29:22 +0900

    Do not require Ruby 2.4 for baseruby
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67554 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit b041cf55bbd39ca690843b455e76e914869b8753
Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-14 22:10:14 +0900

    Fix missing debug counter name
    
    r67550 introduced the typo
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67553 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 009a0a3870656268d00e98a12311bfcc70f54a18
Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-14 21:49:20 +0900

    Avoid crash on logging GC-ed ISeq
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67552 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit e45c9a40a2ee2ca241565f5953af116cd2b5ab29
Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-14 21:40:44 +0900

    Do not execute MJIT copy job when ISeq is GC-ed
    
    I assumed that ISeq is never GC-ed by `in_jit` + `mjit_mark` on copy job
    ISeq, but unfortunately I found SEGV on `mjit_copy_job_handler` in which
    iseq->body was somehow Qnil. And it seems to be fixed by disabling the
    job when `mjit_free_iseq` is called for the ISeq.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67551 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 12225347198344590af4a4a55ac1f90591a21dac
Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-14 21:25:23 +0900

    Share optimization cancel handlers
    
    $ benchmark-driver benchmark.yml --rbenv='before --jit;after --jit' -v --output=all --repeat-count=12
    before --jit: ruby 2.7.0dev (2019-04-14 trunk 67549) +JIT [x86_64-linux]
    after --jit: ruby 2.7.0dev (2019-04-14 trunk 67549) +JIT [x86_64-linux]
    last_commit=Share optimization cancel handlers
    Calculating -------------------------------------
                                     before --jit           after --jit
    Optcarrot Lan_Master.nes    69.55360655447375     74.15329176797863 fps
                                73.74545038318978     79.60903046141544
                                75.85637357897092     82.00930075612054
                                77.10594124022951     82.56228187301674
                                78.67350527368366     83.37512204205953
                                79.97235230767613     83.41521927993719
                                81.03050342478066     84.20227901852776
                                81.61308297895094     84.73733526226468
                                82.06805141753206     85.27884867863791
                                82.46493179193394     85.36558922650367
                                83.85259832896313     85.39993587223481
                                84.02325292922997     85.63649355214602
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67550 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 04ac63fe57d3643dac0c0779d32f0b89ec9e2f15
Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-14 18:31:24 +0900

    Prefer uintptr_t over ptrdiff_t for i686
    
    as debugged in PR
    
    [close https://github.com/ruby/ruby/pull/2130]
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67549 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit c5570cf9bde992f3d14a6382f1038fb422182f45
Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-14 17:53:19 +0900

    Detect send-compatible opt insns automatically
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67548 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit b75bb06e00ab4d8b77ebd9b476ecf945f8b7f72a
Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-14 17:33:43 +0900

    Allow falling back to non-inlined opt_send_without_block
    
    for opt_aref with inline cache to minimize the possibility of JIT cancel.
    
    Also opt_aset and opt_mod are added for the targets.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67547 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 18b5148215df99cebb0ba27f45f0dc7e0599737a
Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-14 16:12:44 +0900

    Add debug counter for MJIT stale_units
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67546 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit f7035dd3ff665dce14657cf244c10c2d4b2b43c7
Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-14 16:10:34 +0900

    Do not reset non-increment-only counters
    
    to prevernt underflow.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67545 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 5ce28c0642591a950e5757150137253cb8d0b9a9
Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-14 15:57:21 +0900

    Add RubyVM.reset_debug_counters when RB_DEBUG_COUNTER
    
    is defined. It's 0 by default and so it dissappears on actual build.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67544 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 57f9a700d719c0ab0a9ade41ebecac022a2a06d4
Author: kazu <kazu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-14 15:52:37 +0900

    Add more debug print for random CI failure on osx Travis
    
    see r67347
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67543 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 3ac518f9bdd413cf2217b101bd5c62deadfbee2a
Author: hsbt <hsbt@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-14 15:05:27 +0900

    Enabled to some bundler examples again.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67542 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 2e8b9aba9bef6c913e5b2de25b24026943438519
Author: hsbt <hsbt@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-14 15:03:58 +0900

    Skip to failing examples on ruby core repository.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67541 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 59fa1232045b1a19c5beae8d8a3b51b66b1aeb2d
Author: hsbt <hsbt@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-14 15:02:47 +0900

    Added rspec dependency for bundler examples.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67540 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 68ddd4d300e9a88737c4f37af74e1a0312949b2f
Author: hsbt <hsbt@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-14 15:01:35 +0900

    Merge Bundler 2.1.0.pre.1 as developed version from upstream.
    
      https://github.com/bundler/bundler/commit/a53709556b95a914e874b22ed2116a46b0528852
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67539 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit d636809c057432e8d42abe30c6c6785eb0721d77
Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-14 14:52:14 +0900

    Revert "Try to set false explicitly"
    
    This reverts commit a1b5d20068a9b1859b383b249e510cd33d196e4a.
    
    Revert "Revert "Skip recompiling tests on i686 Linux""
    
    This reverts commit 7b88a9207b97b94bc3c3be35084c742296f4aff2.
    
    Revert "Simplify matrix for debugging"
    
    This reverts commit e85d6c5c5e62dde37c6f6ffdb7125b9008b9ebfa.
    
    Sorry, these 3 commits were under debugging in
    https://github.com/ruby/ruby/pull/2129 but accidentally merged by using
    `git svn dcommit` instead of `git push` to the topic branch :bow:
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67538 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit a1b5d20068a9b1859b383b249e510cd33d196e4a
Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-14 14:48:40 +0900

    Try to set false explicitly
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67537 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 7b88a9207b97b94bc3c3be35084c742296f4aff2
Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-14 14:48:39 +0900

    Revert "Skip recompiling tests on i686 Linux"
    
    This reverts commit 19513c88d5f923abb7f226520192aef9f3fcc1c7.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67536 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit e85d6c5c5e62dde37c6f6ffdb7125b9008b9ebfa
Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-14 14:48:38 +0900

    Simplify matrix for debugging
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67535 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 661cefc5812b5f206b2af9640d7ad2e6efd0913e
Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-14 14:40:18 +0900

    Fix typo in platform matcher
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67534 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit fa13bb1a6f0894d92b85337385058330eb071eea
Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-14 14:26:46 +0900

    Unify comment styles across MJIT sources
    
    I'm writing `//` comments in newer MJIT code after C99 enablement
    (because I write 1-line comments more often than multi-line comments
     and `//` requires fewer chars on 1-line) and then they are mixed
    with `/* */` now.
    
    For consistency and to avoid the conversion in future changes, let me
    finish the rewrite in MJIT-related code.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67533 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 19513c88d5f923abb7f226520192aef9f3fcc1c7
Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-14 14:26:23 +0900

    Skip recompiling tests on i686 Linux
    
    somehow they are filing like
    https://travis-ci.org/ruby/ruby/jobs/519830085
    but they are not so fatal.
    
    Let me just skip them for now and fix tests afterwards.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67532 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit d6d8fc2421c8171ef4f57d61c5b544e05ec5d468
Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-14 13:52:04 +0900

    * 2019-04-14
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67531 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 9b6b4674d77da2ef3f9f15095af9e39cc966b882
Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-14 13:52:02 +0900

    Recompile JIT-ed code without optimization
    
    based on inline cache when JIT cancel happens by that.
    
    This feature was in the original MJIT implementation by Vladimir, but on
    merging MJIT to Ruby it was removed for simplification. This commit adds
    the functionality again for the following benchmark:
    
    https://github.com/benchmark-driver/misc/blob/52f05781f65467baf895bf6ba79d172c9b0826fd/concurrent-map/bench.rb
    (shown float is duration seconds. shorter is better)
    
    * Before
    ```
    $ INHERIT=0 ruby -v bench.rb
    ruby 2.7.0dev (2019-04-13 trunk 67523) [x86_64-linux]
    --
    1.6507579649914987
    
    $ INHERIT=0 ruby -v --jit bench.rb
    ruby 2.7.0dev (2019-04-13 trunk 67523) +JIT [x86_64-linux]
    --
    1.5091587850474752
    
    $ INHERIT=1 ruby -v bench.rb
    ruby 2.7.0dev (2019-04-13 trunk 67523) [x86_64-linux]
    --
    1.6124781150138006
    
    $ INHERIT=1 ruby --jit -v bench.rb
    ruby 2.7.0dev (2019-04-13 trunk 67523) +JIT [x86_64-linux]
    --
    1.7495657080435194 # <-- this
    ```
    
    * After
    ```
    $ INHERIT=0 ruby -v bench.rb
    ruby 2.7.0dev (2019-04-13 trunk 67523) [x86_64-linux]
    last_commit=Recompile JIT-ed code without optimization
    --
    1.653559010999743
    
    $ INHERIT=0 ruby --jit -v bench.rb
    ruby 2.7.0dev (2019-04-13 trunk 67523) +JIT [x86_64-linux]
    last_commit=Recompile JIT-ed code without optimization
    --
    1.4738391840364784
    
    $ INHERIT=1 ruby -v bench.rb
    ruby 2.7.0dev (2019-04-13 trunk 67523) [x86_64-linux]
    last_commit=Recompile JIT-ed code without optimization
    --
    1.645227018976584
    
    $ INHERIT=1 ruby --jit -v bench.rb
    ruby 2.7.0dev (2019-04-13 trunk 67523) +JIT [x86_64-linux]
    last_commit=Recompile JIT-ed code without optimization
    --
    1.523708809982054 # <-- this
    ```
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67530 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 088df9c8c26bcd7ad4de6637d9e734c26e7b72a0
Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-13 15:55:35 +0900

    Revert "GET_CFP and ec->cfp are different"
    
    This reverts commit 30f71f4768e0babc60f5be6ca235d2c40268bc27.
    
    I've also overlooked we're doing RESTORE_REGS()...
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67523 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 30f71f4768e0babc60f5be6ca235d2c40268bc27
Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-13 15:27:52 +0900

    GET_CFP and ec->cfp are different
    
    When reviewing r66565, I overlooked that `GET_ISEQ()` and `GET_EP()` are
    NOT `ec->cfp->iseq` and `ec->cfp->ep` but `reg_cfp->iseq` and
    `reg_cfp->ep`.
    
    `vm_push_frame` updates `ec->cfp` and in this case we want to check the
    callee's cfp and so `ec->cfp` should be checked instead.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67522 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit e7f7aa87420d6542b8e4a347a037e4ce293fb845
Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-13 09:56:14 +0900

    * 2019-04-13
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67521 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit a73dae4c53f749223a744bdd5e2179b6b877d0e2
Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-13 09:56:14 +0900

    * expand tabs.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67520 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit d3da5fbd30e174c5737ec09c6896db7e81691714
Author: marcandre <marcandre@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-13 09:56:12 +0900

    Proc.new: change deprecation warning for clarity (issue #15539)
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67519 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 95a82766306641595179e23dbac3d6992b919460
Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-12 23:32:35 +0900

    * 2019-04-12
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67518 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 39b04bc698c8ebebc00ca38ffda01473bfbdc43b
Author: nagachika <nagachika@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-12 23:32:31 +0900

    [DOC] Add `ifnone` example to `find` documentation [ci skip]
    [Fix GH-2110]
    
    From: OKURA Masafumi <masafumi.o1988@gmail.com>
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67517 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 6f866fd9eacd69520918b4e96617a2f43f4d44ec
Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-11 19:36:38 +0900

    * 2019-04-11
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67513 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 025343654dca186444e1eafc3760ad895366c46d
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-11 19:36:37 +0900

    Get rid of a magic number
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67512 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 47c82df27ff73c5181f7bd4505b4c98a96f15a0c
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-11 19:36:36 +0900

    Share the exception local ID table
    
    [Fix GH-2115]
    
    From: Lourens Naudé <lourens@bearmetal.eu>
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67511 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit cf781b0871cb8d6b7135fa74d9549ca1cdb2a846
Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-10 23:56:17 +0900

    Set a meaningful name to all Azure jobs
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67510 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 34af06037435cba85cafb0e8b24d37904ad7cced
Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-10 23:47:18 +0900

    Try uncommenting deb-src
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67509 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 724bc97d4bca5ee12c84926faf4df49d134d7e42
Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-10 23:42:18 +0900

    Debug latest sources.list on Azure
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67508 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 1d955861ed892ead71e2e5542235d5d0f37b8276
Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-10 23:34:53 +0900

    Try removing apt update
    
    trying to fix
    https://dev.azure.com/rubylang/ruby/_build/results?buildId=363
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67507 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 82632d4c0c117a7728293ff955e3527487230bc1
Author: mame <mame@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-10 21:57:39 +0900

    ext/openssl/ossl_bn.c (ossl_bn_initialize): get rid of SEGV
    
    OpenSSL::BN.new(nil, 2) dumped core.
    
    [ruby-core:92231] [Bug #15760]
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67506 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 54b93ef1ac4c81730508740ae213f6f52b0bec94
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-10 21:43:34 +0900

    compile.c: name a hidden local variable as a predefined ID
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67505 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit b9e52ef8b6a004082fa341ee9c6bbbd5168e7daf
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-10 21:43:33 +0900

    Adjusted styles
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67504 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit d8442c43066fe2ff875c74af5c8eda35437adb1e
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-10 21:43:32 +0900

    parse.y: fix fatal messages
    
    * parse.y (rb_parser_fatal): fix "parser" in the message which was
      replaced accidentally.  it is not the argument name.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67503 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit c84bdda47a9710a1ba0db1c847db8e224d0eaaf9
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-10 21:43:31 +0900

    timev.h: dummy definition for TAGS
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67502 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 37994bc5322c02a21e8905d373bef802cac91f72
Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-10 18:16:01 +0900

    * 2019-04-10
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67501 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 481481b81aaca7cc5de3982784f68981335005a7
Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-10 18:16:00 +0900

    * expand tabs.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67500 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 25c1fd3b9037d9eb39596bb994eeabed812adada
Author: kazu <kazu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-10 18:15:21 +0900

    Reverting all commits from r67479 to r67496 because of CI failures
    
    Because hard to specify commits related to r67479 only.
    So please commit again.
    
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67499 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 0cc2ffbc1bf135a3b7a8656b9242e87b1ad96d6c
Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-10 17:03:48 +0900

    * expand tabs.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67498 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 83fc324d1dfb2bec7d683509e25e3cc17dbecf18
Author: mame <mame@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-10 17:03:47 +0900

    ext/openssl/ossl_bn.c (ossl_bn_initialize): get rid of SEGV
    
    OpenSSL::BN.new(nil, 2) dumped core.
    
    [ruby-core:92231] [Bug #15760]
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67497 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 91db3b6c6b0daff732c0bacfcc4db397f1df4a42
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-10 16:18:25 +0900

    compile.c: name a hidden local variable as a predefined ID
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67496 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit b8e3a4bd2c3e5c508e6bd48f6686969c085042ce
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-10 15:44:43 +0900

    id_table.c: use NULL as ID* instead of Qundef
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67495 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 33721b4d3306b68188ea253eb0cd717dfa71f917
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-10 15:44:42 +0900

    vm_method.c: fix a warning
    
    * vm_method.c (rb_add_method_iseq): use rb_method_iseq_t, as
      rb_method_definition_set refers, with a cast to suppress a
      warning.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67494 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 5ae753dfa3632a8bc4a4141ff67e8fc9554ca7a0
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-10 15:44:41 +0900

    Adjusted styles
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67493 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit cc02df324f74fc84b9eae1e66bdf38f4422c249b
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-10 14:12:33 +0900

    parse.y: fix fatal messages
    
    * parse.y (rb_parser_fatal): fix "parser" in the message which was
      replaced accidentally.  it is not the argument name.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67492 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit e86bf9a4d768df94c084c3cc8c0786bacad0f31a
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-10 10:34:44 +0900

    timev.h: dummy definition for TAGS
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67491 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 9e448d2fd7490636a9c3553f44d7db5334b04f39
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-10 10:18:01 +0900

    compile.c: cast iseqs to suppress warnings
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67490 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit d099eabbb7c0d493dbf6c665aceaf4738fc68d0e
Author: tenderlove <tenderlove@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-10 08:48:17 +0900

    Set a write barrier between iseq and mark objects
    
    ISeq pins references in the mark array during compile, so it manually
    marks references in the mark_ary.  This was causing write barrier
    misses, so we need to add a write barrier when pushing on the mark
    array.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67489 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit e553d94f01ab5c101c26627132ed12e30a00e8f7
Author: shugo <shugo@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-10 08:35:02 +0900

    Support SNI
    
    This fixes connecting using TLS 1.3 to imap.gmail.com
    
    [Fix GH-2077] [Feature #15594]
    
    From: Marc-Antoine Perennou <Marc-Antoine@Perennou.com>
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67488 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 73f891f1a5dafb1709b333d953ad8b50af7ee1f9
Author: tenderlove <tenderlove@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-10 08:23:39 +0900

    fix RMoved definition location
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67487 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 70cd493b050f6328f2dbe43dad6741d9f0a96d92
Author: tenderlove <tenderlove@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-10 08:23:33 +0900

    Don't fail the build if we can't get objects to move
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67486 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit e900bba9454f8d1a75ac5aa68a15ac21e04c5340
Author: tenderlove <tenderlove@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-10 08:03:40 +0900

    Pin weakmap references
    
    Weak map references can't move because the st_table needs their address
    as a key.  But, we also need to remove T_NONE from the map so they
    aren't reused.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67485 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit b84b8adc8910a877bf9217f95b5bfb0eea268e5a
Author: tenderlove <tenderlove@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-10 06:40:07 +0900

    Just a check to see what is breaking in CI
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67484 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit e385c159da9338b14ab7fb67ce8d8398ab069d5a
Author: tenderlove <tenderlove@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-10 06:13:32 +0900

    Add error globals to mark list so they don't move
    
    JSON gem is referencing constants defined in Ruby then keeping a
    reference as a global.  We need to register these globals so they stay
    pinned.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67483 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 41f5237ed19d5e8d471d441e2cbfc3063f58b110
Author: tenderlove <tenderlove@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-10 05:47:36 +0900

    Try to make compaction more likely
    
    This commit tries to make compaction more likely by allocating some
    objects and then throwing them away
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67482 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit ca9733dc02213211a4e6fd767195cd7de36762c0
Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-10 05:32:22 +0900

    * 2019-04-10
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67481 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 2d912017d7617ba9d9aff9b6ef52591e4b028e6b
Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-10 05:32:22 +0900

    * properties.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67480 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 3ef4db15e95740839a0ed6d0224b2c9562bb2544
Author: tenderlove <tenderlove@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-10 05:32:04 +0900

    Adding `GC.compact` and compacting GC support.
    
    This commit adds the new method `GC.compact` and compacting GC support.
    Please see this issue for caveats:
    
      https://bugs.ruby-lang.org/issues/15626
    
    [Feature #15626]
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67479 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit c09e35d7bbb5c18124d7ab54740bef966e145529
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-09 22:08:30 +0900

    NEWS: [DOC] markup hyphens [ci skip]
    
    * NEWS: [DOC] markup command line options, not to convert
      successive hyphens to an en-dash unintentionally.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67478 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit ed958ef37ef85f7e2dcaf444ccb156f4bf611bce
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-09 22:08:29 +0900

    NEWS: [DOC] fold lines [ci skip]
    
    * NEWS: [DOC] fold lines not to make the BTS refereces wrong
      links, without a backslash.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67477 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit a2429de63ce82c48a2c08ec4b0f9e89f700345cf
Author: duerst <duerst@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-09 18:41:00 +0900

    mention support for Unicode Version 12.1.0 (issue #15195) in NEWS
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67476 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 49255fd703a20f7a02eb3ba23ed63350a403072b
Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-09 10:27:37 +0900

    * 2019-04-09
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67475 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 320c98b436b5277678907b9ba32e4c6cdd3678a0
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-09 10:27:36 +0900

    date: support for Reiwa, new Japanese era
    
    [Feature #15742]
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67474 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 63e66f08b6b524aff2bce99e30ef4fb343b2fe30
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-09 10:27:35 +0900

    date_core.c: [DOC] Heisei will be assumed if no-era [ci skip]
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67473 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit d10451f3fd51f577e704db770de48d05044eb45c
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-08 22:47:37 +0900

    object.c: fix searching nested const paths
    
    * object.c (rb_mod_const_get, rb_mod_const_defined): nested const
      paths should not search from toplevel constants.
      [ruby-core:92202] [Bug #15758]
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67472 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit e1b592b508c72a56ae012869d97fe1580ff87246
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-08 22:47:36 +0900

    test_module.rb: fix a typo
    
    * test/ruby/test_module.rb (TestModule#test_nested_get): fix a
      typo.  nested module's name is a qualified path.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67471 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 7a4c39c5f25c7bed475f65e45c76a646ad993d8b
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-08 14:06:43 +0900

    struct.c: force hash values fixable
    
    * struct.c (rb_struct_hash): force hash values fixable on LLP64
      environment.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67470 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit b29f55c5acc4addabc7ffa94e022e40b36255abb
Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-08 12:26:29 +0900

    * 2019-04-08
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67469 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit ae6c195f30f76b1dc4a32a0a91d35fe80f6f85d3
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-08 12:26:29 +0900

    range.c: force hash values fixable
    
    * range.c (range_hash): force hash values fixable on LLP64
      environment.  [ruby-core:92194] [Bug #15757]
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67468 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit b5baceda18fd6e93f8db29f79055a004f6419e1d
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-08 12:26:28 +0900

    range.c: force hash values fixable
    
    * range.c (method_hash): force hash values fixable on LLP64
      environment.  [ruby-core:92191] [Bug #15756]
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67467 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 06eece87c6e8b969a73aa80ac659f09eb9dcbbcb
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-08 12:26:27 +0900

    enumerator.c: force hash values fixable
    
    * enumerator.c (arith_seq_hash): force hash values fixable on
      LLP64 environment.  [ruby-core:92190] [Bug #15755]
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67466 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 012faccf040344360801b0fa77e85f9c8a3a4b2c
Author: eregon <eregon@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-07 20:26:27 +0900

    doc/signals.rdoc: Clarify a bit where Signal.trap handlers are executed
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67465 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit b7c4e6d11c9d29ed4b5efa7606dc400216827bc4
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-07 20:14:06 +0900

    gc.c: missing break
    
    * gc.c (obj_memsize_of): T_RATIONAL and T_COMPLEX cannot be an
      imemo.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67464 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 575735664b1b77924ffdc9faf87c44c67d9be363
Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-07 17:18:09 +0900

    Add debug message for test_rinda crash
    
    We often see test-all worker crash on test_rinda, but for now we even
    can't know which test is unstable from this output:
    http://ci.rvm.jp/results/trunk_gcc5@silicon-docker/1926481
    
    Let me print `caller` on the timeout failure.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67463 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 93ecb9a1de00db26f1581392ae519a6a9faeab0d
Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-07 01:03:14 +0900

    * 2019-04-07
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67462 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit bbb0db6f1c6650481ae2cd1cb771f896459c0c6b
Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-07 01:03:11 +0900

    Fix typo in a comment [ci skip]
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67461 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 5a6b0e39a1913235d960fafb37b23a29317ccd11
Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-06 23:42:02 +0900

    Add debug counter for VM <-> MJIT calls
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67460 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit fe979e5bce4d5606d491ed25e603f5504a20c500
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-06 22:21:18 +0900

    internal.h: fix potential memory leak
    
    * internal.h (rb_imemo_tmpbuf_auto_free_pointer_new_from_an_RString):
      create tmpbuf to keep the pointer before xmalloc which can raise
      a NoMemoryError exception.  extracted from
      https://github.com/bear-metal/ruby/tree/transient-imemo-tmpbuf
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67459 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit f15d04358827d60a708f296973c420b2c031ac5e
Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-06 11:53:32 +0900

    Cover all insns in test_jit again
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67458 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit feecc10bfcf6fb95f60f62dbfcc9b23fc15813f2
Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-06 11:42:30 +0900

    Suppress unnecessary warnings in test_jit
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67457 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 4d1163b182bdd572edaa44ff000240d49acc09d6
Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-06 11:35:37 +0900

    Resurrect a test dropped in r67442
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67456 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit a26d525ae453fc59a8591d544cdba80f5e31900d
Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-06 10:25:15 +0900

    appveyor.yml: try porting r67454 to msys2
    
    Trying to fix
    https://ci.appveyor.com/project/ruby/ruby/builds/23639998/job/0hm9v79xlryod1ff
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67455 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit b5df5296a4741839b6430c9f07cd25edbb7fb8c5
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-06 09:08:04 +0900

    appveyor.yml: Use pre-generated headers and tables
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67454 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 50eea44a27cc0b9b2c5c24b725a1119ec0c00e5c
Author: duerst <duerst@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-06 08:52:15 +0900

    remove Unicode 12.0.0 related directory and generated files
    
    This completes issue #15195.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67453 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 4e78854080db3d18124ff9cfec9a257073e29150
Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-06 08:16:03 +0900

    * 2019-04-06
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67452 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit cab005db92da4c867a464d2faf27ece30f61b26b
Author: duerst <duerst@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-06 08:16:00 +0900

    revert r67445, (r67446,) r67447
    
    Debugging output is no longer needed because the problem has been fixed with r67449.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67451 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 6e0e93e60ec55ab4a28d29d4ad70a3ad7e65c73e
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-05 23:44:15 +0900

    downloader.rb: fix typo, extra %
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67450 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 9dcc6f081000d9c0f11a97051654ee2091f632e0
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-05 23:44:13 +0900

    appveyor.yml: download beta version for test
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67449 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit aebc11dfe60bb9548843c22d7deb65c67d7a2915
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-05 21:44:04 +0900

    downloader.rb: quote base name
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67448 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 8f734dc7b543e7662b66cffd5d698d372d9a0b7a
Author: duerst <duerst@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-05 21:36:29 +0900

    output more debug information in downloader.rb (temporary)
    
    Unicode file download doesn't work with Visual Studio, we need more debug output.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67447 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit f6338966f15c0f77b3508ff0ceef8ea9553c5063
Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-05 19:39:02 +0900

    * remove trailing spaces.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67446 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 7fd8cdf398456b2da0f6fe541b77826051e60624
Author: duerst <duerst@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-05 19:39:01 +0900

    add puts statements to debug Unicode file download (temporary)
    
    Unicode file download doesn't work with Visual Studio, see e.g.
    https://ci.appveyor.com/project/ruby/ruby/builds/23614399/job/f8vya2l7fjdfcye4
    We temporarily produce more output for debugging.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67445 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit b2311c67671c69df8c390f22b3cb961f7be39a75
Author: ko1 <ko1@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-05 17:41:04 +0900

    `rb_add_method` is void function.
    
    * method.h (rb_add_method): make it void function because
      nobody use a return value.
    
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67444 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 4b53f843264df5694f6693a9a3461af055573fe0
Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-05 17:15:21 +0900

    * expand tabs.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67443 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 2b5bb8a0875b75f18e628c8b2df22760536bdad9
Author: ko1 <ko1@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-05 17:15:11 +0900

    add definemethod/definesmethod insn.
    
    * insns.def: add definemethod and definesmethod (singleton method)
      instructions. Old YARV contains these instructions, but it is moved
      to methods of FrozenCore class because remove number of instructions
      can improve performance for some techniques (static stack caching
      and so on). However, we don't employ these technique and it is hard
      to optimize/analysis definition sequence. So I decide to introduce
      them (and remove definition methods). `putiseq` insn is also removed.
    
    * vm_method.c (rb_scope_visibility_get): renamed to
      `vm_scope_visibility_get()` and make it accept `ec`.
      Same for `vm_scope_module_func_check()`.
      These fixes are result of refactoring `vm_define_method`.
    
    * vm_insnhelper.c (rb_vm_get_cref): renamed to `vm_get_cref`
      because of consistency with other functions.
    
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67442 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 7fe64d17d3cd455a3f014d6f756cb201320f7f9a
Author: duerst <duerst@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-05 09:58:51 +0900

    update to Unicode Version 12.1.0 (beta)
    
    Unicode Version 12.1.0 adds one single character, U+32FF SQUARE ERA NAME REIWA,
    for the new Japanese era starting on May 1st. 12.1.0 will be finalized only on
    May 7th, so we go with the beta version because further changes in the data we
    need are highly unlikely, and we want to make sure Ruby is ready for the new era.
    
    * common.mk: change UNICODE_VERSION to 12.1.0, UNICODE_BETA to YES
    
    * enc/unicode/12.1.0, enc/unicode/12.1.0/casefold.h, enc/unicode/12.1.0/name2ctype.h:
      add directory and generated data files for new version
    
    * lib/unicode_normalize/tables.rb: update for new character
    
    * test/ruby/test_regexp.rb: add test for character property age=12.1
    
    * test/test_unicode_normalize.rb: add test for NFKC decomposition of new character
    
    This (mostly) completes issue #15195.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67441 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit c8d60fddc0f868a2bb8cee0a75859513afe41c0e
Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-05 08:40:51 +0900

    * 2019-04-05
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67440 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit c604219e8d79f4a224e446a4aa19711155070ef8
Author: duerst <duerst@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-05 08:40:48 +0900

    change lib/unicode_normalize/tables.rb to single item per line to make diffs shorter
    
    * template/unicode_norm_gen.tmpl: Change formatting of output to produce only a
      single item (or range) for each line to make future diffs shorter and easier
      to understand and check.
    
    * lib/unicode_normalize/tables.rb: output of the above
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67439 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 59a37c028317441b4a1e6d9a1e9c69570b347ee9
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-04 21:11:53 +0900

    gmake.mk: get rid of unicode normalization table timestamp
    
    * common.mk, defs/gmake.mk: rid of unicode normalization tables
      timestamp.  update the target tables file only when only it
      exists.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67438 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 6f015efc64aece0d25cc25686ea63dc8ffd7a340
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-04 14:26:11 +0900

    iseq.h: Remove dead members
    
    * iseq.h (struct iseq_compile_data): Remove the dead ensure_node
      and for_iseq members.
    
    [Fix GH-2108]
    
    From: Lourens Naudé <lourens@bearmetal.eu>
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67437 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 6faf26689382c35d2fb8df90b096ea34c87b3ed5
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-04 14:10:26 +0900

    gmake.mk: update normalization table
    
    * defs/gmake.mk: try to update Unicode normalization tables file
      if Unicode data files exist.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67436 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit f1fb989f1a17c63af1062ea402ed50f0d6cb4efa
Author: mrkn <mrkn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-04 12:34:55 +0900

    enumerator.c: make arith_seq_first support nil begin
    
    * enumerator.c: (arith_seq_first): support nil begin.
    
    * test/ruby/test_arithmetic_sequence.rb (test_first): add assertions for
      beginless and endless arithmetic sequences.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67435 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 53d3fe0643c591a9083e22ccea62e49f451fd450
Author: mrkn <mrkn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-04 12:34:53 +0900

    ruby/test_arithmetic_sequence.rb: add assertions for beginless and endless ranges
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67434 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit dcb37d06395d996b046b755d2219c4accaac0b5f
Author: mrkn <mrkn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-04 12:34:52 +0900

    range.c: support to make beginless arithmetic sequences
    
    * range.c (range_step): fix the guard condition so that a beginless
      range can be turned into a beginless arithmetic sequence.
    
    * test/ruby/test_range.rb (test_step): add assertions for the above
      change.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67433 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit e59017354782c7cf599af39c6725486cca03297d
Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-04 10:34:56 +0900

    * expand tabs.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67432 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 22fd30e605bd9f13fa1db54316acc925721fea16
Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-04 10:34:53 +0900

    Revert "Introduce inline cache for invokesuper"
    
    This reverts commit d147ad6231aebb1d478162fb8e109e0c6a696169.
    
    because failing on CI:
    http://ci.rvm.jp/results/trunk-mjit@silicon-docker/1916925
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67431 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit e896292d64d86be9b82b29938b9f2dbadbafa0f4
Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-04 01:06:06 +0900

    * 2019-04-04
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67430 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit d147ad6231aebb1d478162fb8e109e0c6a696169
Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-04 01:06:03 +0900

    Introduce inline cache for invokesuper
    
    Looks good in micro benchmark:
    ```
    $ benchmark-driver benchmark/vm2_super.yml -v --rbenv 'before;after'
    before: ruby 2.7.0dev (2019-04-03 trunk 67428) [x86_64-linux]
    after: ruby 2.7.0dev (2019-04-03 trunk 67428) [x86_64-linux]
    last_commit=Introduce inline cache for invokesuper
    Calculating -------------------------------------
                             before       after
               vm2_super    19.265M     31.280M i/s -      6.000M times in 0.311447s 0.191813s
    
    Comparison:
                            vm2_super
                   after:  31280464.2 i/s
                  before:  19264906.2 i/s - 1.62x  slower
    ```
    
    No significant impact to Optcarrot:
    ```
    $ benchmark-driver benchmark.yml --rbenv='before;after' -v --output=all --repeat-count=12
    before: ruby 2.7.0dev (2019-04-03 trunk 67428) [x86_64-linux]
    after: ruby 2.7.0dev (2019-04-03 trunk 67428) [x86_64-linux]
    last_commit=Introduce inline cache for invokesuper
    Calculating -------------------------------------
                                           before                 after
    Optcarrot Lan_Master.nes    48.41126024010233     47.28027196127746 fps
                                49.49212664510990     48.75072555488074
                                49.51485564376117     49.20650895701073
                                49.58351773328487     49.24563592659139
                                49.64022392458479     49.26292753046641
                                49.92566235019630     49.44496216868009
                                50.18022198879376     49.45467429762771
                                50.33038373991723     49.52003367348857
                                50.43202877523305     49.69190055704068
                                50.61368587766504     49.79856204866324
                                50.77975014460643     50.27764769510704
                                50.89807360753746     50.35785776505005
    ```
    
    A little improvement to k0kubun/railsbench?:
    ```
    $ rbenv shell before; RUBYOPT="-v" WARMUP=1 BENCHMARK=30000 bin/bench
    ruby 2.7.0dev (2019-04-03 trunk 67428) [x86_64-linux]
    Warmup: 1 requests
    Benchmark: 30000 requests
    
    Request per second: 897.1 [#/s] (mean)
    
    Percentage of the requests served within a certain time (ms)
      50%    1.01
      66%    1.02
      75%    1.03
      80%    1.04
      90%    1.08
      95%    1.23
      98%    2.10
      99%    5.52
     100%   13.26
    
    $ rbenv shell after; RUBYOPT="-v" WARMUP=1 BENCHMARK=30000 bin/bench
    ruby 2.7.0dev (2019-04-03 trunk 67428) [x86_64-linux]
    last_commit=Introduce inline cache for invokesuper
    Warmup: 1 requests
    Benchmark: 30000 requests
    
    Request per second: 913.0 [#/s] (mean)
    
    Percentage of the requests served within a certain time (ms)
      50%    0.99
      66%    1.00
      75%    1.01
      80%    1.02
      90%    1.06
      95%    1.20
      98%    2.12
      99%    5.57
     100%   12.39
    ```
    
    No significant impact to discourse:
    ```
    * before
    categories_admin:
      50: 54
      75: 60
      90: 70
      99: 86
    home_admin:
      50: 56
      75: 65
      90: 71
      99: 122
    topic_admin:
      50: 64
      75: 73
      90: 79
      99: 117
    categories:
      50: 32
      75: 33
      90: 46
      99: 61
    home:
      50: 34
      75: 36
      90: 48
      99: 56
    topic:
      50: 40
      75: 42
      90: 55
      99: 83
    
    * after
    categories_admin:
      50: 59
      75: 66
      90: 80
      99: 149
    home_admin:
      50: 54
      75: 58
      90: 70
      99: 96
    topic_admin:
      50: 63
      75: 66
      90: 79
      99: 115
    categories:
      50: 31
      75: 32
      90: 45
      99: 65
    home:
      50: 34
      75: 35
      90: 49
      99: 58
    topic:
      50: 40
      75: 42
      90: 55
      99: 78
    ```
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67429 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 2482d1f9e6b770bc5f65ffde97df36066095ff2e
Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-03 21:48:02 +0900

    Partially allow failures in test-bundled-gems
    
    Tests of minitest randomly fails with strange errors:
    https://dev.azure.com/rubylang/ruby/_build/results?buildId=303
    https://dev.azure.com/rubylang/ruby/_build/results?buildId=314
    
    Instead of marking `continueOnError` for all, let me select
    failure-allowed gems individually.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67428 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit f4a1235abe83f8b52ac3048719fac6426469cb42
Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-03 20:16:47 +0900

    vs2019 build is not functional now
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67427 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit a6146af5bd2855f08e520fad67c39164adc507e9
Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-03 19:56:37 +0900

    * expand tabs.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67426 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 1329c7cdca5cca07e8680a28724b3f192144f04e
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-03 19:56:36 +0900

    date: make zone a substring to copy encoding and taintedness
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67425 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit f0204a254789608edc46515f181b1f52ec106442
Author: kazu <kazu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-03 18:35:26 +0900

    Revive accidentally removed assertion
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67424 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit d4319541e870b3ec37ddb73d399dafcb39db35e7
Author: mame <mame@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-03 17:35:57 +0900

    range.c (r_cover_range_p): support beginless range
    
    `(..2).cover?(..1)` should return true.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67423 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 95f7992b89efd35de6b28ac095c4d3477019c583
Author: mame <mame@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-03 17:11:41 +0900

    Introduce beginless range [Feature#14799]
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67422 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit dd2479bcea6cfbfb7656ef691ad5f9ff6ae543cd
Author: tenderlove <tenderlove@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-03 06:59:04 +0900

    Fix more ASAN errors
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67421 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit be0f09a998c08eaa8bd4a5300e10b405cc9ae972
Author: tenderlove <tenderlove@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-03 06:58:59 +0900

    Extract type to sym as a new function
    
    I will use this from another function in compaction
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67420 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit ad67845ba82023474ed2c914e7b38859a9cd488d
Author: tenderlove <tenderlove@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-03 06:13:22 +0900

    Fix typo in lldb script
    
    Also fix tests
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67419 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 714c2b0a93a3ad2206dc93535f42987083b16ca9
Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-03 04:13:13 +0900

    * 2019-04-03
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67418 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit e377eb0e75d6307ac379f575bf3caf0b8b08fab4
Author: tenderlove <tenderlove@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-03 04:13:12 +0900

    Fix ASAN error
    
    This code was trying to access memory before unpoisoning it.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67417 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 4283fb42bc7a4f7e6de1263756b32fdd2356bf3a
Author: tenderlove <tenderlove@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-03 04:13:07 +0900

    Poison / verify the freelist
    
    This commit just adds poisoning around the freelist to help debugging.
    Also verify that the freelist only contains T_NONE objects when checking
    the heap integrity
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67416 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit f28be7e02d113bd26c33cb94e65004055576c065
Author: hsbt <hsbt@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-02 20:48:18 +0900

    Merge rubygems/rubygems from upstream.
    
      The current master branch is
      https://github.com/rubygems/rubygems/commit/97b264f0fa248c864b6ee9a23d3ff1cdd217dddb
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67415 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 537024433720d7c54cba9bab4596638f59fbadc9
Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-02 19:51:35 +0900

    Azure Pipeline tests on Linux are not reliable
    
    test-bundler started to fail with r67383
    https://dev.azure.com/rubylang/ruby/_build/results?buildId=278
    which is very unlikely to be Ruby implementation's fault.
    
    test-bundled_gems also started to fail with r67413
    https://dev.azure.com/rubylang/ruby/_build/results?buildId=303
    I'm not sure the commit is related to the failure.
    
    Overall, they are not useful as testing environment of Ruby itself for
    now since nobody seems to take care of these CI statuses. Let's stop
    reporting the status to GitHub until it becomes reliable.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67414 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 79de8e9f6ba093da4d792294f1675083634c9e3b
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-02 17:08:29 +0900

    downloader.rb: keep linked file newer than cached file
    
    * tool/downloader.rb (Downloader.save_cache): keep linked file
      newer than cached file, so that GNU make triggers when the
      content is updated.  it uses the timestamp of symlink itself
      instead of the target.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67413 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 7cd6706b9ab901b0b710a087b5aeb5654f219b09
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-02 13:36:34 +0900

    date_parse.c: name JISX0301_DEFAULT_ERA
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67412 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit da0fceae3b3641c60823954e8198bf10a1b99c10
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-02 13:36:33 +0900

    date_parse.c: renamed JAPANESE prefix as JISX0301
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67411 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 5f3e5e6fc5f545b5e6b496334578a16a2acf01c8
Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-02 12:49:00 +0900

    * expand tabs.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67410 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit e8f8cf111fc1cd6ee7a00b692ba208bd1c7ce539
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-02 12:48:58 +0900

    date: use del_hash to extract an element destructively
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67409 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 1ad6dde9da48149f1998eb5b85916165867c2368
Author: tenderlove <tenderlove@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-02 08:55:02 +0900

    Fix ASAN errors when walking the heap
    
    verify_internal_consistency_i and gc_verify_heap_page would walk the
    heap, reading data from each slot, but would not unpoison the object
    before reading.  This commit unpoisons the slot before reading so that
    we won't get ASAN errors
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67408 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit f0f6615a25eb87e5e9954b7fec85c71f05100b7d
Author: tenderlove <tenderlove@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-02 07:53:34 +0900

    add regex support to lldb debug output
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67407 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit f4bff3a7f944edee72118de5b762a46b1b98d463
Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-02 07:52:39 +0900

    * expand tabs.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67406 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 1286674bb9855d69f3448fb76c2721c5ac38b84c
Author: tenderlove <tenderlove@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-02 07:52:35 +0900

    unpoison / poison objects while walking the heap
    
    This fixes some ASAN errors
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67405 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 990df873029a632c06dee9de9768bda8400fe922
Author: eregon <eregon@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-02 05:46:10 +0900

    Make spec for the jit feature more general and not MRI-specific
    
    * Other implementations should not define RubyVM.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67404 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 960d059ef71901980c95cd28013b7a93bc3f83d5
Author: eregon <eregon@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-02 05:45:55 +0900

    Simplify spec as there is no easy way to tell if MJIT support is available
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67403 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit d48783bb0236db505fe1205d1d9822309de53a36
Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-02 05:35:13 +0900

    * 2019-04-02
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67402 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit c71c59feeb8edd975cc49c718dec8319e22ee2a4
Author: eregon <eregon@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-02 05:35:10 +0900

    Fix Float#to_s specs to not depend on the platform representation of doubles
    
    * AIX, Solaris, etc have a different binary representation.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67401 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 321d72bdd6f26b26bc4b9989076f2d3a2fbdc9b3
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-01 14:58:31 +0900

    Added tests for end of Heisei
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67400 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 285817c6d8ed6117fc4931a32ae16aaf3c5b4c99
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-01 14:28:25 +0900

    date_parse.c: removed 'r' which is not in JIS X 0301 yet
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67399 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit e836cd0b9f213084bf4a2b4c642e27c9d550a706
Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-01 14:21:39 +0900

    * expand tabs.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67398 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 744c3140595c34171553515e127d080634704db3
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-01 14:21:36 +0900

    date_parse.c: extract Japanese era initials
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67397 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 367362b9d56bc8d9e5cafaec5abe7c987c4a831c
Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-01 00:37:47 +0900

    * 2019-04-01
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67396 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 5e86970840145c4f1349dd5729e64960e5b04583
Author: kazu <kazu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-04-01 00:37:45 +0900

    exp is String, so it's always truthy
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67395 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 4e0420f57749f85bebeabd509f9da73f7ae8c966
Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-03-31 23:46:31 +0900

    * 2019-03-31
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67390 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit ddc5839005b91ec7a87f374d3b2606b158400817
Author: kazu <kazu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-03-31 23:46:25 +0900

    Fix a typo [ci skip]
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67389 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit b84eed5dd8e2cb981a80091a58775a7d21946e5b
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-03-30 23:31:35 +0900

    ruby.c: respect features by command line
    
    * ruby.c (process_options): feature options in command line
      arguments take precedence over options in RUBYOPT environment
      variable.  [ruby-core:92052] [Bug #15738]
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67388 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 19e672cce9590c09b6beb3ada4ccf0e62bf6610c
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-03-30 21:39:35 +0900

    rdoc: Colorize background of code/pre [ci skip]
    
    Borrowed the style of code/pre from bugs.ruby-lang.org.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67387 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 721be154946f0a13f739363c4968c548aba5fee3
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-03-30 21:37:23 +0900

    process.c: [DOC] remove extra quotes [ci skip]
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67386 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 413b12737697564a4de6bb88b2830169dc42909e
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-03-30 21:35:13 +0900

    Fix a typo in an assertion message
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67385 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 031e2f1285e3ea37eca9a4c24d6ae25ef1c459d3
Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-03-30 08:26:33 +0900

    * 2019-03-30
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67384 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 9249346c0bed3fa154a49b2ca924c205e66018ef
Author: mame <mame@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-03-30 08:26:31 +0900

    mjit_worker.c: explicitly ignore the unused result of RB_DEBUG_COUNTER_INC_IF
    
    By adding `(void)`.  This makes Coverity Scan happy.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67383 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 9d047fd3e51945c8fcc3a8a97c41dc2baf016974
Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-03-29 23:44:09 +0900

    Add mjit_compile_failures debug counter
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67382 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit e465d6c5df2c3b6f97348b2d21037be3f55c7d38
Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-03-29 23:27:00 +0900

    ruby tool/update-deps --fix
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67381 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 5ee256da687f080f8ec0b12c10fc2592020e4872
Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-03-29 23:08:51 +0900

    Prevent mjit length counters from being 0
    
    It seems that `debug_counter_show_results_at_exit` could be called
    earlier than `mjit_finish` sometimes.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67380 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit b03c11a337c53c219a840eed4569e411289f0ddd
Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-03-29 22:54:29 +0900

    Add debug counters for MJIT cancel
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67379 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 017cb09eb6d40b3d7f7ca08db4aa16cfb91012f2
Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-03-29 22:24:56 +0900

    Add debug counter for rb_mjit_unit_list
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67378 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 26d56f7b6f68058ca2321d797f86d1edd510644b
Author: kazu <kazu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-03-29 22:06:48 +0900

    Fix a typo [ci skip]
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67377 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 9254e1c740fd0829ad425670c770f782d20a0d82
Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-03-29 21:55:07 +0900

    Debug make install instead of make
    
    Actually what has randomly failed was `make install`:
    https://travis-ci.org/ruby/ruby/jobs/512988177
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67376 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit bb5ab13bf58e0ccfe5b4c08fec8a0e70612d598c
Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-03-29 21:52:59 +0900

    Add debug counters for MJIT
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67375 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit fe904f1eec1fe96cf148407c3c4c010de7dd8b73
Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-03-29 21:31:08 +0900

    Elaborate more on some debug counters [ci skip]
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67374 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 49f1b71144e9e8352688caf7cb23b09b62873464
Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-03-29 21:00:44 +0900

    Add some more buffer for timeout check
    
    This spec is unstable on our CI environment:
    https://gist.github.com/ko1/efa58acf4cd1d7b5bf1f63881537afe8
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67373 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit ce9e0ffd710db27f928ffa013d5d7047acb04511
Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-03-29 15:36:48 +0900

    * expand tabs.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67372 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 35e677dd0ab6b042cb52e9f98e35a2d8d7dc5e14
Author: ko1 <ko1@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-03-29 15:36:46 +0900

    use GET_CFP() instead of access reg_cfp directly.
    
    GET_CFP() macro contains performance counter logic.
    
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67371 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit fcf60d39776acf018eb7d855778f66568eb6d615
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-03-29 10:26:23 +0900

    process.c: [DOC] fix markups [ci skip]
    
    * process.c (rb_f_spawn): fix markups as rdoc.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67370 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit b9ad698c8711ddb10e812b809522a865e4175718
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-03-29 09:59:34 +0900

    process.c: [DOC] fix markups [ci skip]
    
    * process.c (rb_clock_getres): fix code markups, as `+` can not
      include parentheses.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67369 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit f27d4354c837434a1e67fc20422c6f96bbe8dc69
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-03-29 09:59:32 +0900

    strip trailing spaces [ci skip]
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67368 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit c33da35ddf14f39d622df42e0a63581636aa391c
Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-03-29 09:49:35 +0900

    Fix broken retry logic
    
    previous retry logic did not work
    https://dev.azure.com/rubylang/ruby/_build/results?buildId=266
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67367 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit b6c04a7ad76b8693048355d0a258731e10f111fd
Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-03-29 01:25:25 +0900

    Guard spec against msys2 shell
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67366 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit e7477a949c157a700e70afff0675af676b57f00e
Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-03-29 00:37:45 +0900

    [bug:8215] seems to be still broken on mswin
    
    This test fails on AppVeyor mswin so often:
    https://ci.appveyor.com/project/ruby/ruby/builds/23427134/job/rowv0dohwni0xa37
    https://ci.appveyor.com/project/ruby/ruby/builds/22970385/job/qdkqus13bhnyyfxf
    https://ci.appveyor.com/project/ruby/ruby/builds/22970385/job/o4k8keg95ltcryoe
    
    Maybe it's related to https://bugs.ruby-lang.org/issues/15569.
    As this test is harmful for mswin CI reliability, let me skip this at
    least until somebody fixes the above issue.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67365 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 233267db34bfd74d94a5840cc582e0db7a2881c3
Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-03-29 00:25:44 +0900

    * 2019-03-29
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67364 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 7ce0e96334c66af8f805d101fe35abb5742687e4
Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-03-29 00:25:44 +0900

    * properties.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67363 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 68987d4ae1a14d96047074599079acc2997e76e9
Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-03-29 00:25:43 +0900

    Do not fail with --disable-jit-support
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67362 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit a28aa80c739a1d169649a4da833ef48cfb3465b3
Author: eregon <eregon@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-03-28 23:22:29 +0900

    Update to ruby/spec@e81b3cd
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67361 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 0f64776745ef31e626dec0d42b7fb2a5988397ec
Author: kazu <kazu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-03-28 21:35:20 +0900

    NEWS: Fix a typo [ci skip]
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67360 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit b6443c62f0c3c4b002c6eaa2574da66f5635e076
Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-03-28 20:50:19 +0900

    Note r67356 in NEWS [ci skip]
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67359 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit ee5b54822cd08c11ae1b2060d28074d36aa45954
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-03-28 19:19:08 +0900

    parse.y: show error line separately
    
    * parse.y: show compile error and the error line separately,
      instead of building the error message by snprintf then yyerror.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67358 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit fa04b87af4300f747e3ce5cfe21b8edf85fe73b2
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-03-28 17:39:24 +0900

    [DOC] fix missing paren [ci skip]
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67357 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit b3507bf147ff47e331da36ba7c8e6b700c513633
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-03-28 12:46:48 +0900

    erb.rb: prohibit marshaling [EXPERIMENTAL]
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67356 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 978290515ea32204ff4b4173d6283050d628bd37
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-03-28 12:33:36 +0900

    [DOC] Fix method references to Method instance methods
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67355 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit de0ef1a9dfd9f966ad7e667788f3e333944d959e
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-03-28 12:33:35 +0900

    [DOC] fix markups [ci skip]
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67354 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 832bc50768fe42f95f8dda0483f0ba1556175c9d
Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-03-28 08:56:17 +0900

    * 2019-03-28
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67350 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit ede77e64a7f465f9591ee9b1e9d6d7d69bfdb9af
Author: kazu <kazu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-03-28 08:56:14 +0900

    Fix typos
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67349 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 41d36d2ce2a900bbb6812e23c13f35ee20f93d31
Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-03-27 22:31:36 +0900

    Skip EBADF spec in MJIT test for now
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67348 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 1c5fd2bff0e232aadf4b9486d086ccb6af87ceb6
Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-03-27 22:15:02 +0900

    Add debug print for random CI failure on osx Travis
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67347 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit b51b9d50e64170650db71ece4a6c08b3c9ae897a
Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-03-27 17:26:12 +0900

    * 2019-03-27
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67346 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 191b99c89d5843bdee2bccc9ee2d34bc2b5513f0
Author: hsbt <hsbt@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-03-27 17:26:09 +0900

    Merge fileutils-1.2.0 from ruby/fileutils.
    
      It includes the following updates:
    
      * https://github.com/ruby/fileutils/pull/26
      * https://github.com/ruby/fileutils/pull/27
      * https://github.com/ruby/fileutils/pull/29
      * https://github.com/ruby/fileutils/pull/34
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67345 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit c92c0a593593da2eb1ff94d83d80f71e7ae5343c
Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-03-25 23:26:11 +0900

    Prefer using vm_base_ptr rather than cfp->bp
    
    in MJIT implementation.
    
    This allows us to drop cfp->bp by just modifying vm_base_ptr in the
    future.
    
    No performance impact:
    
    $ benchmark-driver benchmark.yml --rbenv='before::before --disable-gems --jit;bp_::after --disable-gems --jit;vm_env_ptr::ruby-svn --disable-gems --jit' -v --output=all --repeat-count=12
    before: ruby 2.7.0dev (2019-03-24 trunk 67341) +JIT [x86_64-linux]
    bp_: ruby 2.7.0dev (2019-03-24 trunk 67342) +JIT [x86_64-linux]
    vm_env_ptr: ruby 2.7.0dev (2019-03-25 trunk 67343) +JIT [x86_64-linux]
    last_commit=Prefer using vm_base_ptr rather than cfp->bp
    Calculating -------------------------------------
                                           before                   bp_            vm_env_ptr
    Optcarrot Lan_Master.nes    77.15059205092646     70.18873044267853     69.62171387083328 fps
                                78.75767783870441     77.49867689173411     75.43496867709587
                                79.60102690369321     77.78037687683523     79.36688927929428
                                80.25144236638835     78.74729849101701     80.42363742291455
                                82.22375417165489     80.44265482494045     80.90287243299306
                                82.29166786292619     80.51740049420938     81.81153053252902
                                83.35386925305345     80.91054205210609     81.93562989125176
                                83.39770634366975     81.34550754145043     82.24544621470430
                                83.88523450309972     81.60698516017347     82.76801860263230
                                84.17553130135879     82.69615943446324     83.02530407910871
                                84.42132328119858     83.00969158037691     83.19968539409922
                                84.60731429793329     83.32703363300098     83.81352746019631
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67344 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 7976d0d153c021fb2e350743fbb54d239aa7acf1
Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-03-25 15:58:55 +0900

    * 2019-03-25
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67343 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 8dd0fb9039bbe6152ea5542e6bc70de152871e23
Author: ko1 <ko1@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-03-25 15:58:50 +0900

    use cfp->bp more.
    
    cfp->bp was (re-)introduced by Kokubun san, but VM doesn't use it
    because I (ko1) want to remove it in a future. But using it make
    leave instruction fast because of sp consisntency check.
    So now VM uses cfp->bp.
    
    To use cfp->bp, I checked the value and I found that it is not a
    "initial value of sp" but a "initial value of ep". Fix this problem
    and fix all bp references (this is why bp is renamed to bp_).
    
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67342 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 9f05891c3daa79e26dd01f0575f1b595ddb7d302
Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-03-24 09:28:54 +0900

    * 2019-03-24
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67341 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 831e93d928aa1092fbbcabaa8051953de50ad9da
Author: ktsj <ktsj@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-03-24 09:28:51 +0900

    Update power_assert to 1.1.4
    
    This update fixes a failure of test-bundled-gems, so we revert r67275.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67340 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 7e421044a3e1747e62c6760cde2f007223f73e0e
Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-03-23 19:41:20 +0900

    * 2019-03-23
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67339 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 0bd50e95f9e2357ac551bda501da91185875370e
Author: glass <glass@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-03-23 19:41:16 +0900

    file.c: raise NotImplementedError instread of Errno::ENOSYS
    
    [Misc #15615]
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67338 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 56557ec28a8712984a0e9744fd7547e797ec9b6b
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-03-22 20:04:59 +0900

    [DOC] fix markups [ci skip]
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67337 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit c671f836b4d123bf86bce6defe42c87caef582f8
Author: ko1 <ko1@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-03-22 16:57:26 +0900

    add debug counters to count call cache fastpath.
    
    Add counters to count ccf (call cache fastpath) usage.
    These counters will help which kind of method dispatch
    is important to optimize.
    
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67336 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 4d2bac1fd977d2ff76321654aece8744cac536dd
Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-03-22 09:21:44 +0900

    * 2019-03-22
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67335 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit a433f2c51be52042884998bb5a0048084adad4aa
Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-03-22 09:21:43 +0900

    * expand tabs.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67334 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 79ddbe9deebc5af0f08e52cd056f58b49e486ea6
Author: ko1 <ko1@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-03-22 09:21:41 +0900

    optimize method dispatch for lead/kw params.
    
    similar idea to r67315, provide the following optimization
    for method dispatch with lead and kw parameters.
    
    (1) add a special branch to check passing kw arguments to
        a method which has lead and kw parameters.
        ex) def foo(x, k:1); end; foo(0, k:1)
    (2) add a special branch to check passing no-kw arguments to
        a method which has lead and kw parameters.
        ex) def foo(x, k:1); end; foo(0)
    
    For (1) and (2) cases, provide special dispatchers. For (2) case,
    this patch only use the special dispatcher if all default
    kw parameters are literal values (nil, 1, and so on. In other case,
    kw->default_values does not contains Qundef) (and no required kw
    parameters becaseu they don't pass any keyword parameters).
    
    Passing keyword arguments with a hash object is not a scope of
    this patch.
    
    Without this patch, (1) and (2) cases use `setup_parameters_complex()`.
    Especially, (2) seems frequent case for methods which extend a normal
    usecase with keyword parameters (like: `exception: true`).
    
    We can measure the performance with benchmark-driver:
      With methods: def kw k1:1, k2:2; end
                    def m; end
      With the following binaries:
        clean-miniruby: unmodified trunk.
        opt_miniruby1: use special branches for lead/kw parameters.
        opt_miniruby2: use special dispatchers for lead/kw parameters.
        opt_cc_miniruby: apply step (2).
      Result with benchmark-driver:
    
                                  m
         opt_miniruby2:  75222278.0 i/s
        clean-miniruby:  73177896.5 i/s - 1.03x  slower
         opt_miniruby1:  62466783.3 i/s - 1.20x  slower
    
                                 kw
         opt_miniruby2:  52044504.4 i/s
         opt_miniruby1:  29142025.7 i/s - 1.79x  slower
        clean-miniruby:  20515235.4 i/s - 2.54x  slower
    
                          kw k1: 10
         opt_miniruby2:  26492219.5 i/s
         opt_miniruby1:  25409484.9 i/s - 1.04x  slower
        clean-miniruby:  20235113.7 i/s - 1.31x  slower
    
                  kw k1: 10, k2: 20
         opt_miniruby1:  24159534.0 i/s
         opt_miniruby2:  23470527.5 i/s - 1.03x  slower
        clean-miniruby:  17822621.5 i/s - 1.36x  slower
    
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67333 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 0f63d961169989a7f6dcf7c0487fe29da178a4d2
Author: shirosaki <shirosaki@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-03-21 22:32:03 +0900

    dir.c: fix Dir.glob starts with brace
    
    * dir.c (ruby_glob0): expand braces if a glob pattern starts with
      brace.
      [ruby-core:91728] [Bug #15649]
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67332 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 638c96858274deb90b2b923477d6b9525e1ed065
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-03-21 21:01:36 +0900

    array.c: [DOC] remove unnecessary markups [ci skip]
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67331 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 969156ce9a04b92ffc5b048cfbe666ae1f7b1cbd
Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-03-21 15:48:00 +0900

    Check argument_arity_error condition in inlinable_iseq_p
    
    to avoid inlining a method call when it becomes argument_arity_error,
    fixing a potential bug.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67330 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 52bd8f6f68a45cb990a827e4a1c276251cdf471c
Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-03-21 15:25:09 +0900

    Share vm_call_iseq_optimizable_p to reduce copy-paste
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67329 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit a8695d5022d7afbf004765bfb86457fbb9d56457
Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-03-21 14:59:57 +0900

    Make rb_iseq_only_optparam_p static
    
    because it's not used outside vm*.c, and also having non-static function
    without MJIT_STATIC is harmful for mswin JIT system.
    
    I hope this fix mswin test failure starting from r67315.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67328 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 3c4b7898d82f0a57cc3d034a246c28093c5f2dfd
Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-03-21 14:59:16 +0900

    * expand tabs.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67327 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit e1038377a9c8ec8002d07cfdbca6a1c0cca1fc8c
Author: mame <mame@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-03-21 14:59:14 +0900

    Fix a wrong lineno in backtrace for cfunc
    
    lineno is an int, and INT2FIX(0) was assigned.
    
    [Bug #15719] [ruby-core:91911]
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67326 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit b8540a3c2eb375d1634a451574404d8cb4502f98
Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-03-21 14:44:26 +0900

    Show retry's stdout as well
    
    because stderr did not have sufficient information
    https://ci.appveyor.com/project/ruby/ruby/builds/23242505/job/dirugxujk70nnhp6
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67325 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit ae0f20c6bf45fdf4e50bc6cc69577cb94cc44ed8
Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-03-21 14:30:27 +0900

    Retry vcpkg install failures
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67324 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 9810c08a5dd0f327f3d2fe2bd61874673ddece11
Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-03-21 13:49:45 +0900

    Explain why cl.exe needs --jit-verbose=2 [ci skip]
    
    I forgot to explain it in the previous commit
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67323 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 81de7b9e622ecb57a607af8ba7c341ab8c659a4d
Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-03-21 13:47:59 +0900

    Insert --jit-verbose=2 logs for mswin debugging
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67322 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 7aacb650153db6eb341907dff8c3f8445717e556
Author: kazu <kazu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-03-21 12:24:59 +0900

    Remove duplicated and change order
    
    `reg*` affects `doc/regexp.rdoc`, but it is not a file of the Oniguruma/Onigmo regular expression engine.
    `reg*.[ch]` matches `reg*` except `doc/regexp.rdoc`.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67321 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit f2ea705d68d7e814e68c2df4598b95106e280e49
Author: hsbt <hsbt@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-03-21 08:32:11 +0900

    Add Enumerator::Lazy docs.
    
      * explanation of the class concept, with examples;
      * docs for all class methods (most of them just say "Like Enumerable#<methodname>, but chains operation to be lazy-evaluated.", but I believe they are useful this way because now have proper call-sequences and link to corresponding Enumerable's explanations)
      * simplified example for ::new to emphasize the main concept
      * Enumerable#lazy docs are slightly lightened and linked to this class for more in-depth explanations.
    
      [Misc #15529][ruby-core:91046]
    
      Co-authored-by: zverok <zverok.offline@gmail.com>
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67320 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit e8e1f72d8fae3d010a1a5bec90c897aee9f08ce0
Author: ko1 <ko1@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-03-21 05:37:03 +0900

    remove redundant check.
    
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67319 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit df2af1147fc250cee73853cd9c78d5afeb9e2591
Author: ko1 <ko1@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-03-21 05:26:21 +0900

    fix a type error with a cast for clang.
    
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67318 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 02df0f38df43395debdab80a24fabd8a0e3eb097
Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-03-21 04:57:44 +0900

    * 2019-03-21
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67317 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 5c439ebfb076ac0b16e60dc83f3a56532e85b3c9
Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-03-21 04:57:43 +0900

    * expand tabs.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67316 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 24e03d7e268f5b89367d495ee2b4aac0b700e6e1
Author: ko1 <ko1@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-03-21 04:57:39 +0900

    optimize method dispatch for lead/opt params.
    
    There is a special optimization for "only lead parameters"
    method dispatch using specialized dispatcher functions
    `vm_call_iseq_setup_normal_0start...`.
    Other cases (opt, rest, post, ...) we don't use specialized
    dispatcher and call with `setup_parameters_complex` to
    satisfy Ruby's complex parameter specification.
    
    This commit introduce a specialize dispatcher for
    methods which use only lead and optional parameters.
    
    Two step improvements:
    (1) prepare "lead/opt" only check pass.
        It is to skip the `setup_parameters_complex` function.
    (2) introduce specialized dispatcher for only "lead/opt"
        parameters methods (vm_call_iseq_setup_normal_opt_start).
    
    With these improvements, we achieved good micro-benchmark
    results:
      With a method: `def opt2 a, b=nil; end`
      With the following binaries:
        clean-miniruby: unmodified trunk.
        opt_miniruby: apply step (1).
        opt_cc_miniruby: apply step (2).
      Result with benchmark-driver:
    
                            opt2(1)
       opt_cc_miniruby:  42269409.1 i/s
          opt_miniruby:  36304428.3 i/s - 1.16x  slower
        clean-miniruby:  25897409.5 i/s - 1.63x  slower
    
                         opt2(1, 2)
       opt_cc_miniruby:  45935145.7 i/s
          opt_miniruby:  40513196.9 i/s - 1.13x  slower
        clean-miniruby:  29976057.6 i/s - 1.53x  slower
    
    This improvement may be trivial (difficult to improve practical
    cases). However, this is enough small patch so I decide to
    introduce it.
    
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67315 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 139634a16fc5fa6779b08aeb89f40b289579c4bf
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-03-20 13:24:42 +0900

    vm_trace.c: [DOC] remove the trick [ci skip]
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67314 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit b55586902dbd3df7b749fd1463dacbe871550adc
Author: hsbt <hsbt@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-03-20 11:08:34 +0900

    Improve TracePoint docs.
    
      * Mention new :script_compiled event;
      * Deduplicate __enable/enable methods;
      * Document target: and target_line: arguments.
    
      [Bug #15484][ruby-core:90801]
    
      Co-authored-by: zverok <zverok.offline@gmail.com>
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67313 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 46968fab0a0cec4a3e6e37f30b13d20998ba5e7a
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-03-20 10:35:27 +0900

    string.c: [DOC] fix reference to sprintf [ci skip]
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67312 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 8b49e5b47d26228602f2dd57a81a6c12b1a19dde
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-03-20 10:31:44 +0900

    string.c: [DOC] remove unnecessary markups [ci skip]
    
    * string.c: remove <code> markups, which are not only unnecessary
      but also prevented cross-references.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67311 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit a265141c84f5b62d3dce62db1cf47d0c88dce601
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-03-20 10:17:16 +0900

    string.c: [DOC] fix indent [ci skip]
    
    * string.c (rb_str_crypt): fix indent not to make the whole list
      verbatim entirely.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67310 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit eee58ca61134447e2f2140f9bf5366dc1495d7fe
Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-03-20 09:31:13 +0900

    * 2019-03-20
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67309 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 740248425c5a47cb3f73eda97b42d52ef1070349
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-03-20 09:31:02 +0900

    parse.y: make tNUMPARAM id
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67308 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit afa1505ca89bd350558f1f42b96f1eee781ef019
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-03-19 15:23:36 +0900

    parse.y: removed redundant number_arg parser event
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67307 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit fa66569afa0614ab27d941a68fb99e7adc1d2d48
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-03-19 15:01:21 +0900

    parse.y: fix var_ref of numbered param in ripper
    
    * parse.y (string_dvar, user_variable): register numbered
      parameter in ripper for var_ref.
      [ruby-core:91867] [Bug #15673]
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67306 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit e39f7e64b73f0506def7adc88226d6821608da54
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-03-19 11:35:50 +0900

    parse.y: fix segv with Ripper#yydebug
    
    * parse.y (parser_token_value_print): in ripper, ID values are
      wrapped in NODE_RIPPER at set_yylval_name(), so print the Symbol
      wrapped together.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67305 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit ae5d9a7664e9664102b1ebc890afdafdf053bed8
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-03-19 11:25:15 +0900

    Added Ripper#debug_output
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67304 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 92b0331bcf33d1c4d3396c1ad85919934198aa28
Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-03-19 02:45:10 +0900

    Use designated initializers for compile_status
    
    to make it easier to understand what values are grouped.
    Just cosmetic changes.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67302 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 8b1241d87756b59b6e2f033f7a978130b896bbaf
Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-03-19 02:28:23 +0900

    Use alloca for stack_size_for_pos as well
    
    to eliminate necessity of error check and `free`
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67301 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit a75ae6faa931e8b9d32c99039a06b950df391a06
Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-03-19 02:20:21 +0900

    Use alloca again instead of malloc and free
    
    by changing interface of `mjit_copy_cache_from_main_thread`.
    
    This is also fixing deadlock introduced by r67299.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67300 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 4d426e28d2cbbc09208987c6cf86180ea3ba3522
Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-03-19 01:32:48 +0900

    Resurrect r67287 and r67288
    
    I noticed that r67287 was illegal because memory allocated by `alloca`
    was used after the stack is expired.
    
    So I just replaced that with `malloc` and `free` for now.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67299 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 08e9c58d519599def6b786ea211ac3a3d8b64d52
Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-03-19 01:14:59 +0900

    * 2019-03-19
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67298 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 78e87b7d4f580b041f96e0503febce528b8607b8
Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-03-19 01:14:57 +0900

    Revert "Eliminate mjit_copy_job_t reference from mjit_worker"
    
    This reverts commit ba51ae0109ee1d1fa7ca90b43da115ea68d7214a.
    
    CI is failing again...
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67297 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit ba51ae0109ee1d1fa7ca90b43da115ea68d7214a
Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-03-18 23:01:52 +0900

    Eliminate mjit_copy_job_t reference from mjit_worker
    
    Take 2 of r67287.
    
    For some reasons, passing pointer of pointer on stack to a function
    and assigning an addresse to a pointer dereferenced from the pointer
    seems not working on mswin.
    
    So I achieved to return multiple values by returning struct instead of
    taking pointers.
    
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67296 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 964bbc1686c7dd42d58da504a6968c90d5a428fd
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-03-18 21:48:18 +0900

    parse.y: numbered parameter in lambda
    
    * parse.y (lambda): support numbered parameters, only when no
      argument list including empty parentheses, like empty vertical
      bars.  [ruby-core:91859] [Bug #15672]
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67295 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit f9e5b8d09cafc2c91137d293b1458f1b0432a12a
Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-03-18 21:07:21 +0900

    Revert "Try disabling Travis cache on darwin"
    
    This reverts commit 6b136a044205f6e6b66df68cd2da2a9c3e952a7d.
    
    This does not seem to work:
    https://travis-ci.org/ruby/ruby/jobs/507646193#L2478
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67294 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit c1dce923739d0355520c02eb588bc96bedae4328
Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-03-18 20:46:21 +0900

    Merge https://github.com/rubygems/rubygems/pull/2684
    
    to make CI stable. See the PR for details.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67293 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 17018d4c31a86af2b47e09b3229dab2e80d3db6d
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-03-18 15:42:19 +0900

    parse.y: continue after invalid name
    
    * parse.y (set_yylval_noname): continue after an invalid global,
      instance, class variable name, without "unexpected end-of-file"
      error.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67292 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 908b5301124cf673a2ee44de652968aa5360afd1
Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-03-18 10:52:45 +0900

    Revert "Request inline cache values from mjit_compile"
    
    This reverts commit 4161674b2fbea6bdd01783ac5d3b39d88db22972.
    
    Revert "Eliminate mjit_copy_job_t reference from mjit_worker"
    
    This reverts commit d86a1aa045959dfbf5cd472eae0d043180259727.
    
    Reverting them because of CI failures
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67291 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit ba03222da8ecc408310c37dca908f671ee3f1791
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-03-18 10:42:20 +0900

    Pack rb_iseq_constant_body from 296 to 288 bytes
    
    [Fix GH-2099]
    
    From: Lourens Naudé <lourens@bearmetal.eu>
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67290 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit d0e25ed277549af21242009e649d93b73c82576c
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-03-18 10:18:25 +0900

    parse.y: parser_numbered_param
    
    * parse.y (parser_numbered_param): hoisted out the contextual
      check for numbered parameters.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67289 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 4161674b2fbea6bdd01783ac5d3b39d88db22972
Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-03-18 03:29:30 +0900

    Request inline cache values from mjit_compile
    
    rather than preparing beforehand.
    
    By having this change, implementing inlining by calling
    `mjit_copy_cache_from_main_thread` for inlined methods was made
    possible.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67288 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit d86a1aa045959dfbf5cd472eae0d043180259727
Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-03-18 03:07:06 +0900

    Eliminate mjit_copy_job_t reference from mjit_worker
    
    and make `copy_cache_from_main_thread` easier to use.
    
    For implementing inlining later, I'll use `copy_cache_from_main_thread`
    inside `mjit_compile`.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67287 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 3fc26f601397f9b3e2893488749481f4df96df07
Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-03-18 02:12:47 +0900

    Drop rb_mjit_unit from mjit_copy_job
    
    and guard iseq from GC by marking iseq in mjit_copy_job.
    
    This is a refactoring for implementing inlining later and
    should not be fixing or introducing any bugs.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67286 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit cebc640790c084c110ae413231b976941fbfdc7f
Author: kazu <kazu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-03-18 01:35:20 +0900

    Fix a typo [ci skip]
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67285 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 5bd10603416d3f267704b8ad1040ebab163ca3b2
Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-03-18 01:32:51 +0900

    * 2019-03-18
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67284 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit dfb9907cd35ab914a421ccd864ca03594265f5a2
Author: kazu <kazu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-03-18 01:32:49 +0900

    Fix typos [ci skip]
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67283 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit a72bc2e716790b933106e524f662f2b63cafc6e2
Author: kazu <kazu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-03-17 22:51:30 +0900

    Fix a typo [ci skip]
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67282 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 6b136a044205f6e6b66df68cd2da2a9c3e952a7d
Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-03-17 15:20:01 +0900

    Try disabling Travis cache on darwin
    
    to check if it resolves "Permission denied" problem.
    https://travis-ci.org/ruby/ruby/jobs/507381339
    https://travis-ci.org/ruby/ruby/jobs/507392198
    
    TBH I'm not exactly sure why it happens, but I don't have infinite time
    to understand this. It would be appreciated to identify the root cause
    and remove `DISABLE_CACHE` again if you're sure your patch fixes the problem.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67281 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit d4b6198d8f13229123ebbcfcdfc4685a913b1ac8
Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-03-17 14:32:53 +0900

    Roughly increase Azure Pipelines fetch depth
    
    because --depth=1 may randomly break checkout:
    https://dev.azure.com/rubylang/ruby/_build/results?buildId=208&view=logs&jobId=7ded14dc-7a77-59da-f40a-71e137ad96c0&taskId=2045950f-1dcd-54a4-4c23-fae2521239c1&lineStart=1554&lineEnd=1555&colStart=1&colEnd=1
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67280 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 46f5eb5b48213e1561cd23fea4f672f2e0d09647
Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-03-17 14:28:54 +0900

    Update NEWS for --jit option changes [ci skip]
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67279 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 12acc751e3e7fd6f8aec33abf661724ad76c862a
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-03-17 14:21:18 +0900

    Numbered parameters [Feature #4475]
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67278 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 0fa4a6a618295d42eb039c65f0609fdb71255355
Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-03-17 14:13:38 +0900

    Change defaults of --jit options
    
    * --jit-min-calls: 5 -> 10000
    
    --jit-min-calls=5 obviously can compile non hotspot. This was not a
    problem for MJIT-benchmarks and Optcarrot because the former has very
    few hot optimiziable methods and the latter is likely to trigger
    compilation of hotspot by its intensive calls to optimizable hotspot
    methods and has a very short window to allow limited compilations.
    
    In real-world applications, it has more time to compile more methods and
    it pressures computer's limited resources like icache. We should avoid
    compiling too many methods. Also compiling many methods exhausts time
    budget for compilation in one ruby process lifetime and delays the "JIT
    compaction" of Ruby 2.6.
    
    JVM is known to use 1,500 for C1 (client) compiler and 10,000 for C2
    (server) compiler for -XX:CompileThreshold by default.
    https://docs.oracle.com/javase/8/embedded/develop-apps-platforms/codecache.htm
    
    When things are called X,000 times, requiring 10,000 can eliminate
    compilation of methods which are called only once in these X,000
    iterations and obviously not hotspot. And in fact things like
    unicorn-worker-killer restarts unicorn process every 4096 requests.
    So I felt 10,000 is good for such an environment.
    
    * --jit-max-cache: 1000 -> 100
    
    By the same reason stated above, we should not allow compiling many
    methods especially on MJIT which has a larger overhead due to poor code
    locality by dlopen and whose code is also likely to be bigger by just
    inlining many VM instructions with -O3 rather than directly generating
    low-level code.
    
    In JVM -XX:ReservedCodeCacheSize is 32M for reserved and 48M for maximum.
    --jit-max-cache=1,000 could be closer to it, but in this case MJIT's
    compilation is slow due to data synchronization between threads (to be
    improved in Ruby 2.7 though) and we do not want to delay the "JIT
    compaction" for a long time.
    
    So I chose a really conservative number for this, but by having method
    inlining in the future, wider range could be optimized even with this
    value.
    
    * Optcarrot
    
    --disable-gems, --benchmark Lan_Master.nes 12 attempts.
    No significant impact.
    
    | r67276             | r67276 --jit      | after --jit       |
    |:-------------------|:------------------|:------------------|
    | 50.44369263063978  | 72.87390680773056 | 73.47873485047297 |
    | 50.58788746124193  | 78.06820808947026 | 78.29723420171945 |
    | 50.77509250801378  | 80.29010348842613 | 78.94689404460769 |
    | 50.935361702064405 | 80.42796829926374 | 80.39539527351525 |
    | 51.27352672981195  | 81.98758158033202 | 81.6754198664817  |
    | 51.720715743242124 | 82.00118535811626 | 82.22960569251283 |
    | 51.89643169822524  | 82.2290091613556  | 82.5013636146388  |
    | 51.95895898113868  | 82.37318990939565 | 82.74002377794454 |
    | 52.10124886807968  | 82.48796686037502 | 83.23354941183932 |
    | 52.292280637519376 | 83.0265226541066  | 84.01552618012572 |
    | 52.51856237784144  | 83.8797360318052  | 84.8588319093393  |
    | 52.65076845986818  | 84.80037351256634 | 85.13577756273656 |
    
    * Railsbench
    
    `WARMUP=20000 BENCHMARK=1000 bin/bench` of https://github.com/k0kubun/railsbench.
    It gets closer to --disable=jit.
    
    |           | r67276 | r67276 | after  |
    |           |        | --jit  | --jit  |
    |:----------|:-------|:-------|:-------|
    | req/s     | 891.3  | 742.2  | 841.5  |
    |:----------|:-------|:-------|:-------|
    | 50%ile ms | 1.00   | 1.21   | 1.08   |
    | 66%ile ms | 1.02   | 1.24   | 1.09   |
    | 75%ile ms | 1.03   | 1.28   | 1.10   |
    | 80%ile ms | 1.03   | 1.30   | 1.11   |
    | 90%ile ms | 1.09   | 1.42   | 1.15   |
    | 95%ile ms | 1.32   | 1.65   | 1.27   |
    | 98%ile ms | 4.79   | 2.23   | 1.81   |
    | 99%ile ms | 5.68   | 7.52   | 6.64   |
    |100%ile ms | 6.52   | 9.69   | 8.59   |
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67277 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 407cd5cc54e12eec6688d175957afee3b022f54a
Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-03-17 13:13:13 +0900

    Drop invalid trailing comma in JSON object
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67276 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 7fe77cbca9073f521b35fd11bd55dde300559e8d
Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-03-17 01:53:55 +0900

    Ignore test-bundled-gems failure on CI for now
    
    ktsj-san recognizes this issue and it's intentionally left failing now.
    As failure notification of this task is NOT indicating ruby is broken,
    let's stop notifying the failure fo rnow.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67275 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 5b0bcb0b2261a3254a008deecba9227f87e975b4
Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-03-17 01:26:46 +0900

    * 2019-03-17
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67274 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 46a3b440fdb59da2ef250c585c50a4e1499a1f69
Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-03-17 01:26:44 +0900

    Do not build Azure Pipelines on Pull Request
    
    For 2 reasons:
    
    * bundled_gems tend to be left broken (like now)
    * We don't want Slack notification for pull request and it can't be
      disabled on Azure Pipelines
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67273 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 8ce6748fc81bdee29b5e790d5e9f8317f77a77bf
Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-03-16 13:11:54 +0900

    Notify AppVeyor results to multiple channels
    
    and simplified config by using dedicated webhook URL.
    Sadly AppVeyor YAML does not support alias and so we need to copy-paste
    the request body.
    
    memo:
    https://slack-files2.s3-us-west-2.amazonaws.com/bot_icons/2018-02-10/314363543719_48.png
    is the URL used by `provider: Slack`
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67272 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit f044cc1042ef7a3547fdf5f1934a3d108854870f
Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-03-16 13:00:30 +0900

    * 2019-03-16
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67271 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 7006fdecf2ff5e832cd6da1bf02462146a9190b8
Author: ktsj <ktsj@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-03-16 13:00:14 +0900

    dsym should be treated as string [ruby-core:91852] [Bug #15670]
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67270 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit e4c184c6aeb29e3f47c6daf7c5ff26ef1ef440a8
Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-03-15 22:25:06 +0900

    Increase the number of curl retries
    
    Because retrying 5 times failed.
    https://ci.appveyor.com/project/ruby/ruby/builds/23063048/job/k9lykaagfaex74gg
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67269 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit d4f7fac6b8ba975b50c4144168f656454c92724b
Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-03-15 14:19:58 +0900

    * expand tabs.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67267 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit c36a6f97f243778d3eb8e973eba89ce2b424b707
Author: mame <mame@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-03-15 14:19:54 +0900

    node.h: introduce nd_brace to determine if a hash literal is a keyword
    
    NODE_HASH#nd_brace is a flag that is 1 for `foo({ k: 1 })` and 0 for
    `foo(k: 1)`.
    nd_alen had been abused for the flag (and the implementation is
    completely the same), but an explicit name is better to read.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67266 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 560bb32fb2a04713bdbe5fa51ee2aaa271da91b6
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-03-15 10:19:31 +0900

    NEWS: adjust indents and escape brackets not to be labeled lists
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67265 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 3134b20a0129aa072d1cb40a5000297333b5818d
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-03-15 09:44:51 +0900

    Show the source line at an invalid class/instance variable
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67264 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit bf4bcaf06115b32b5ffb4ddea972624d3ac7fa50
Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-03-15 07:43:59 +0900

    * 2019-03-15
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67262 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 9e7f197c8e0c20bdf96ab7438e30b0457a85ec72
Author: nagachika <nagachika@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-03-15 07:43:57 +0900

    tool/make-snapshot: Use 6-spaces indent for SIZE and digests
    to align with release note markdown.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67261 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 4d6e20297783257574d8143e95fb55aafd91db66
Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-03-14 22:47:10 +0900

    Skip Bundler's test made fail by r67226
    
    Possible fix would be https://github.com/bundler/bundler/pull/7038,
    but Ruby script ending with `^~~` could be wrongly stripped by that?
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67257 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 3db2041f8772ec7c9faf379095d4c8d06e5e25ed
Author: mame <mame@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-03-14 18:04:57 +0900

    compile.c: fix the corner case of rest and keyword arguments
    
    See https://bugs.ruby-lang.org/issues/10856#note-20 . [Bug #10856]
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67256 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 146bb252a0fe114befe8aa762596563c886db7fc
Author: mame <mame@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-03-14 17:43:51 +0900

    compile.c (setup_args): process arguments forward
    
    For unknown reason, setup_args processed the arguments from the last to
    the first.  This is not only difficult to read, but also inefficient in
    some cases.  For example, the arguments of `foo(*a1, *a2, *a3)` was
    compiled like `a1.dup << (a2.dup << a3)`.  The second dup (`a2.dup`) is
    not needed.
    
    This change refactors the function so that it processes the arguments
    forward: `foo(*a1, *a2, *a3)` is compiled as `a1.dup << a2 << a3`, and
    in my opinion, the source code is now much more readable.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67255 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 9800fc26b0367c63ada516b932b13268bb79524b
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-03-14 17:13:46 +0900

    parse.y: no punctuation instance/class variables
    
    * parse.y (parse_atmark): exclude punctuation follows @ marks,
      whereas it is inclusive after $ mark as some punctuation global
      variables exist.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67254 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 277af37b427c635688d9ca7cba0b2fa8d1fb459d
Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-03-14 15:43:54 +0900

    * expand tabs.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67253 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 4c41dc8945d167bc63932325e11f227b4ec102dd
Author: mame <mame@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-03-14 15:43:50 +0900

    compile.c: factor out "compile_args" from "compile_array"
    
    compile_array function had three usages: array literal, hash literal,
    and method arguments. I think the third is completely different than the
    first and second.  For example, method arguments and popped are
    meaningless; keywords_ptr and flag parameter for array/hash literal is
    also unused.
    
    This change refactors them: a function "compile_args" is created for the
    third, and removes no longer used parameters of "compile_array".
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67252 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 9c077bbed94307d67c82a6e805dd6cc486433df2
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-03-14 14:57:42 +0900

    parse.y: show invalid global variable line
    
    * parse.y (parse_gvar): show the source line erred by invalid
      global variable, and indicate the variable including the wrong
      punctuation.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67251 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit ccc933d4a6873d9be359c8ab04b1f242ed64c1e5
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-03-14 14:32:30 +0900

    Hoisted out ruby_show_error_line
    
    * parse.y (ruby_show_error_line): hoisted out from parser_yyerror.
    
    * parse.y (regx_options): revert r67226 and show the error line
      separately.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67250 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 86c5806c6a3452a0b81595f8a306ec5c421a16a8
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-03-14 11:18:05 +0900

    More initializations of YYLTYPE
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67249 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit e20aa14a82604db9a5e4d33d206aacfebfbb7d62
Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-03-14 10:04:55 +0900

    * 2019-03-14
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67248 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 6a860ea0062e2f18435a870ae8734f25bc9d9827
Author: mame <mame@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-03-14 10:04:53 +0900

    Guard out the test when it is run under root permission
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67247 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 0d6910dfc8e63d8961b338ea949bc398dd52b5d0
Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-03-13 10:44:45 +0900

    * 2019-03-13
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67244 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 8415df619ecfe9d869067faf1282f3552d18e578
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-03-13 10:44:34 +0900

    Remove unnecessary local variable
    
    newline is always "\n" when it is used.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67243 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 8952525a8e688e0fe67bbc7a3c84256190a44c23
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-03-12 21:04:03 +0900

    Assertion for r67226
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67227 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit b6468b01f7288789ef2e9bf548d81cdadb8ef053
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-03-12 13:23:17 +0900

    Show unkwon regexp option line
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67226 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 60bddf589fb518c6b84515749775dc78458aeaad
Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-03-12 13:11:51 +0900

    * 2019-03-12
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67225 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit e5d10cda07b23682e5e4e64d1324e4d3247d4785
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-03-12 13:11:41 +0900

    Flush erred token
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67224 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit a3a1199f413f7a96c4c90c7513c832838379e468
Author: naruse <naruse@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-03-11 22:00:31 +0900

    fix wrong merge of conflict at r67217
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67221 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 43ff4ef912df53da6cadf009ff4e366a0d79626a
Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-03-11 21:48:34 +0900

    * expand tabs.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67218 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 76fc1ce0a774aab411b4e9f4462c236852624764
Author: mame <mame@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-03-11 21:48:33 +0900

    The combination of non-Symbol keys and Symbol keys is now allowed again
    
    Revert r64358.  [Bug #15658]
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67217 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit bda6df356a373289e179f2b09c0bbe84ffc70d03
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-03-11 21:47:02 +0900

    parse.y: moved excessed_comma
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67216 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit bc76d8a232bed2e245cd3997ebd9826938f7a738
Author: hsbt <hsbt@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-03-11 20:37:17 +0900

    Removed from standard library. No one maintains it from Ruby 2.0.0.
    
      [Bug #15652][ruby-core:91736]
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67215 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 098ec6eb5076f3a140777c5cb56be4465bfa432f
Author: hsbt <hsbt@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-03-11 19:09:48 +0900

    Added to check MJIT constant for the Ruby 2.3-2.5.
    
      This commit picked from https://github.com/ruby/webrick/commit/2c13beca2c25dc099b7ed20dbe4d7ede77dfef86
    
      Co-authored-by: Colby Swandale <me@colby.fyi>
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67214 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 448262c81d7fdbca7db0b50059e53b423a2436ec
Author: knu <knu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-03-11 18:52:40 +0900

    Mention the addition of Enumerator::Yielder#to_proc in NEWS
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67213 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 7d3d8e79fe9cc9f21cd4341f0a6fb2e6306688fd
Author: hsbt <hsbt@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-03-11 18:52:31 +0900

    fall back to copy + unlink on EPERM
    
      [Feature #15415][ruby-core:90536]
    
      Co-authored-by: Eric Wong  <normalperson@yhbt.net>
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67212 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit c2d3b8dfb43e6dbc0b9af3c0f880636ffcc06ca9
Author: knu <knu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-03-11 18:49:14 +0900

    Implement Enumerator::Yielder#to_proc
    
    A Yielder object can now be directly passed to another method as a
    block argument.
    
    ```ruby
    enum = Enumerator.new { |y|
      Dir.glob("*.rb") { |file|
        File.open(file) { |f| f.each_line(&y) }
      }
    }
    ```
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67211 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 7d9664953ba574b04f6558e80e95a71289275d64
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-03-11 12:53:33 +0900

    Removed circular require
    
    Import rubygems/rubygems#2679
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67206 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit aef24ecbe959b5e91e2e06b3a2cbfaa02cae1672
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-03-11 12:53:31 +0900

    Renamed duplicate test
    
    Import rubygems/rubygems#2678
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67205 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 53f2cda8d4717f15680e0a5b3638443182ca6c1f
Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-03-11 10:37:21 +0900

    * 2019-03-11
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67204 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit e5f01dab9d1faebe8f1c8eab3ed805335c4b712d
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-03-11 10:37:16 +0900

    numeric.c: fix infinite loop
    
    * numeric.c (int_pow): fix infinite loop in the case of y equal 1
      and power of x does not overflow.
      [ruby-core:91734] [Bug #15651]
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67203 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit f399c2912bcb0ab782fc14a1987e07ceaaf060e7
Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-03-10 15:46:36 +0900

    * 2019-03-10
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67202 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit ffec546b0e522a647c7c2473c40dbe018156736d
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-03-10 15:46:28 +0900

    eval.c: clear internal errinfo
    
    * eval.c (ruby_cleanup): clear internal error info when invoking
      end procs.  [ruby-core:91731] [Bug #15650]
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67201 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 72df0a8e4703c4e14cb2014d59d8ddad09a47859
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-03-09 19:17:33 +0900

    Add ignored_sp event
    
    * ext/ripper/lib/ripper/lexer.rb (Ripper::Lexer): add ignored_sp
      event which will be fired from Ripper::Lexer#on_heredoc_dedent
      method.  [ruby-core:91727] [Bug #15648]
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67200 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 8776a09d4eed5662ee28eff0d829e880cc001684
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-03-09 19:14:16 +0900

    Use assert_respond_to
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67199 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 28f619e301cf5f266f38fe764c4018b7fabc77cb
Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-03-09 09:12:53 +0900

    * expand tabs.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67198 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 5aecf03ec30a098ba58627aadcfbff4acdd11fdd
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-03-09 09:12:52 +0900

    variable.c: hoisted out rb_namespace_p
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67197 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 5cfa518406d9b411512cffbe6951537bd25a3ebb
Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-03-09 09:00:35 +0900

    * 2019-03-09
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67196 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit d5770197462ee4445c4bd4898339ce50052af7d7
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-03-09 09:00:26 +0900

    Early return in gc_mark_children
    
    for types Float, Bignum and Symbol as they do not have references
    and singleton classes.
    
    [Fix GH-2091]
    
    From: Lourens Naudé <lourens@bearmetal.eu>
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67195 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit caa2a5bb0eb919d022bd50a7553197192dd78014
Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-03-08 09:35:56 +0900

    * 2019-03-08
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67194 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit e185c9716e6cabc2a9d103c8c7a77ee73fbba546
Author: tadd <tadd@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-03-08 09:35:53 +0900

    use __GNUC__ instead of __GCC__.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67193 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 4c1952f4bf9d2fe183431747a83596287e9b7631
Author: hsbt <hsbt@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-03-07 20:24:48 +0900

    Ignore to handle the different platform
    
      When `GEM_HOME` was shared with CRuby and JRuby. RubyGems try to
      handle both platforms. It should be ignored the different platform.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67190 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 8cc53044081fa00384412a0f141c9f1be9065e1a
Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-03-07 14:11:55 +0900

    * 2019-03-07
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67189 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 23488589b38f09a95e7ba61a72b12358ad6185cb
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-03-07 14:11:46 +0900

    io.c: chomp CR at the end of read buffer
    
    * io.c (rb_io_getline_fast): chomp CR followed by LF but separated
      by the read buffer boundary.  [ruby-core:91707] [Bug #15642]
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67188 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 1598b5e7b343b6c05e6cab47ac3878276aea6d37
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-03-06 20:49:53 +0900

    Symbol creation is not a problem now unless pinned down
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67187 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 7fed9a2df50404c734504e0405ecaa98f0d9147c
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-03-06 20:16:34 +0900

    proc.c: call respond_to_missing? with a symbol
    
    [ruby-core:91683] [Bug #15640]
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67185 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit a679e98e64a7c69d65578b11ef072e1115d536ad
Author: naruse <naruse@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-03-06 18:48:39 +0900

    Fix PTY.open on OpenBSD [Bug #15607]
    
    From: Jeremy Evans <code@jeremyevans.net>
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67183 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit f831ca67642101e29bd2de91998d80560d2b7fb6
Author: duerst <duerst@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-03-06 12:19:10 +0900

    delete directory and files related to Unicode version 11.0.0
    
    this completes and closes feature #15321
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67174 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit b3f641085e347d55c1b9b72e25a19c28cdeb84f6
Author: duerst <duerst@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-03-06 12:15:06 +0900

    add news about Unicode version update (issue #15321) to NEWS [ci skip]
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67173 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit fdc42bf88d7900b722e46976b981ce0fa3d4f1e8
Author: kazu <kazu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-03-06 12:04:36 +0900

    Remove deprecated `sudo: false` in .travis.yml
    
    - https://blog.travis-ci.com/2018-11-19-required-linux-infrastructure-migration
    - https://docs.travis-ci.com/user/reference/overview/#deprecated-virtualization-environments
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67172 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit d4303528d39d38ae2141f13064e82a7908df4f14
Author: hsbt <hsbt@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-03-06 11:08:20 +0900

    Skip malicious extension test with mswin platform.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67171 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit ad398b7e0c857cbaaf469f44759e163159b60148
Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-03-06 10:55:26 +0900

    * 2019-03-06
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67170 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit cff7eefa07f8e7bccb5c0b8c856e5657d6d45ffa
Author: duerst <duerst@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-03-06 10:55:19 +0900

    update Unicode version (and Emoji version) to 12.0.0
    
    - common.mk: set UNICODE_VERSION and UNICODE_EMOJI_VERSION to 12.0.0
    
    - lib/unicode_normalize/tables.rb: update table data to Unicode version 12.0.0
    
    - enc/unicode/12.0.0/casefold.h, enc/unicode/12.0.0/name2ctype.h: add generated
      files for Unicode version 12.0.0
    
    This is the main commit for #15321.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67169 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 08f8cfe14e0f8937e3bcf8a22becdc5ce60b920e
Author: hsbt <hsbt@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-03-05 12:32:58 +0900

    Merge RubyGems upstream: 56c0bbb69e4506bda7ef7f447dfec5db820df20b
    
      It fixed the multiple vulnerabilities.
      https://blog.rubygems.org/2019/03/05/security-advisories-2019-03.html
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67168 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 593505ac6f802d2b5bff469425b7c76b65cc9b10
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-03-05 09:32:15 +0900

    string.c: respect the actual encoding
    
    * string.c (rb_enc_str_coderange): respect the actual encoding of
      if a BOM presents, and scan for the actual code range.
      [ruby-core:91662] [Bug #15635]
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67167 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 4045cb82227e7b97342eb92b17e35f534128e90d
Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-03-05 09:28:25 +0900

    * 2019-03-05
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67166 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 19d3aaff5c45c8ee0a9083a182d77cd5f5acf935
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-03-05 09:28:22 +0900

    Directories in RbConfig may not exist until installation
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67165 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit ba982a3da32ecb3ae0f08eceda55c503f39d3875
Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-03-04 17:13:27 +0900

    * 2019-03-04
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67164 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 958798851d24a70e849e19592a36edce2daf18d1
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-03-04 17:13:25 +0900

    FindFirstFile cannot glob share names
    
    * win32/file.c (replace_to_long_name): do not try to glob host
      names and share names by FindFirstFile which is useless for that
      purpose.  [ruby-core:91656] [Bug #15633]
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67163 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit e4885d8accb0a30069374ee21f688631fca45f62
Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-03-03 22:35:25 +0900

    Use --depth=1 for vs2019 as well
    
    to shorten time to clone
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67162 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 2e9d4b9f0bd0cae89e75a7a16b2cf0c55aeb9c0e
Author: ko1 <ko1@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-03-03 15:18:43 +0900

    do not close FSs explicitly.
    
    * test/ruby/test_dir.rb: r67159 closes all files explicitly
      but this change breaks attempt of this test introduced at
      r56467. Try another solution which removes all references
      from an Array with `#clear`.
    
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67161 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 7ebea69529a15e6e3004aeafb40f7d469f47b37d
Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-03-03 09:17:21 +0900

    * 2019-03-03
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67160 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 19a8bbafd8ef8b48a9d2832e605fb00b3284630e
Author: ko1 <ko1@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-03-03 09:17:18 +0900

    close opened files explicitly
    to fix a test failure like
    http://ci.rvm.jp/results/trunk-theap-asserts@silicon-docker/1804207
    
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67159 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 4eda7e1d1481168c016a589b53af2233ea2defb2
Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-03-01 23:09:41 +0900

    Stop sharding --jit-wait testing
    
    by just randomizing test order.
    
    The original motivation to shard --jit-wait tests was forcing to test
    major parts of code without actually stopping to test MJIT after
    TracePoint enablement. But it tends to increase the test time because we
    often compile the same thing in different shards.
    
    I made this decision because we seem to hit 1.5h timeout of Wercker
    these days, and Wercker is really bad at handling timeout (it does not
    report timeout as failure, but just keeps it "pending" state)
    https://app.wercker.com/ruby/ruby/runs/mjit-test2/5c78f15cc9e725000805b86c?step=5c79031d6c1e2c0008ac41c3
    
    By randomizing this, we could test things randomly. The downside of this
    approach is that we may not be able to find a specific commit that
    caused a future failure by having TracePoint in a very early phase.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67158 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 4fd5a9e9bb58ab666809eda3256db2ae98b0032f
Author: hsbt <hsbt@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-03-01 22:16:29 +0900

    Try to build readline extension with vcpkg on Azure Pipelines.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67157 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit fe28e007f3226c48aee497558f8eff535485423d
Author: hsbt <hsbt@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-03-01 17:46:07 +0900

    Try to build vs2019preview on Azure Pipelines.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67156 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 19cf8e03878e93a9594c275b8f82a9d53e02eda1
Author: hsbt <hsbt@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-03-01 17:31:43 +0900

    Fixed build failure of Travis CI. We need to support `make srcs`.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67155 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit a4020fbefcf61edfe604c25a0bc70a7aed380070
Author: kazu <kazu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-03-01 13:21:33 +0900

    Add Azure Pipelines build status badge [ci skip]
    
    copy from README.md.  see r67146
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67152 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit fb04855c415c2ea33f863841a4f4bdbe059131a5
Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-03-01 12:56:33 +0900

    Drop obsoleted continueOnError
    
    now it's passing thanks to r67149
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67151 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 9dbb14b77cb929d0f59b22152ea817e70ee8fa13
Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-03-01 12:45:03 +0900

    * 2019-03-01
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67150 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit fe61f14d53c5b18d3c475eee23502ab1e5446291
Author: hsbt <hsbt@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-03-01 12:45:00 +0900

    Support YACC environment variable for ripper.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67149 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit dfec1eb3cee833fa4bef6ce027a3e702508261ba
Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-02-28 23:19:47 +0900

    Add Azure Pipelines build status badge [ci skip]
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67146 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 7b81d7f5c2a5fe93835c2b2d865a7378f5499f0f
Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-02-28 22:26:14 +0900

    Mark vs2017 build as continueOnError for now
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67145 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 12eca471a466daa4b03cb2c3edfb1a7039071eb6
Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-02-28 21:47:36 +0900

    Revert "Try clean: true for vs2017 checkout failure"
    
    This reverts commit b0e350fe16ad17eabf5bbc603f7d817c06ce8554.
    
    The issue seems to be invalid tag name including `"` in ancient tag.
    We're trying to delete that.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67144 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit b0e350fe16ad17eabf5bbc603f7d817c06ce8554
Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-02-28 21:32:24 +0900

    Try clean: true for vs2017 checkout failure
    
    https://dev.azure.com/rubylang/ruby/_build/results?buildId=107
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67143 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit f03775fc0f536b43ace587f6ae9c299a0b8598ef
Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-02-28 21:19:08 +0900

    Try fetchDepth: 1
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67142 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit ccd1c02ceaa04b29757954906859fe3b9e3dedf0
Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-02-28 21:01:09 +0900

    * 2019-02-28
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67141 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit ef8ed5deee7a687190a33ac655dec271bb18db26
Author: hsbt <hsbt@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-02-28 21:01:06 +0900

    Removed fake environment variable because It is not necessary for macOS.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67140 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 6f2c516d8031e1c7f4704bd59c5349fab7f24187
Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-02-27 21:40:19 +0900

    * properties.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67139 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 19408c785c6f258024efcaa69d0642ad995c50b3
Author: hsbt <hsbt@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-02-27 21:40:19 +0900

    skip to not support color tty environment.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67138 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 019864b4a5d14f25f5880cda996306908837d7ee
Author: hsbt <hsbt@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-02-27 21:30:24 +0900

    Test Bundler examples and bundled gems tests with Azure Pipeline.
    
      * They are invoked on Linux and macOS environment.
      * Try to build with vs2017. But it's only binary build.
    
      https://dev.azure.com/rubylang/ruby/
    
      [Feature #15181][ruby-core:89222]
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67137 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit c2ee33898b21af45e9dad89942772c00d3ffc819
Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-02-27 12:26:09 +0900

    * 2019-02-27
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67136 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 8092d571be8f65909c6e5a931429933d19566f36
Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-02-27 12:26:09 +0900

    * expand tabs.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67135 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 5e2a8cb7b9de3d5a22e29886a5a1b7cafacdc31a
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-02-27 12:26:05 +0900

    Remove stale arguments
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67134 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit ff074304f4d393fa4a9c97f30829ccf5497009ae
Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-02-26 10:34:20 +0900

    * 2019-02-26
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67133 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit e2d1bb1fa4850c8212a7cdbd76a92634a1115453
Author: duerst <duerst@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-02-26 10:34:17 +0900

    add exceptions for indenting conventions for files related to regular expressions
    
    Ruby uses the Oniguruma/Onigmo regular expression engine, including the underlying
    character encoding framework. In contrast to other code implementing Ruby, the
    regular expression engine related code is formatted with two spaces per indent
    level. This commit adds rules for these files. (The commit may not completely cover
    all related files.) [ci skip]
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67132 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 23a8183bea8dda2d7528b57f2e0c8bc31162db3e
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-02-24 20:57:18 +0900

    Check stx_btime in struct statx
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67131 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit a582007e3611e1d6e1d57b697391be74dc03c2ac
Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-02-24 14:27:40 +0900

    * 2019-02-24
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67130 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 8b8285e25348ab6a7b16facb31e5753711b1191e
Author: glass <glass@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-02-24 14:27:33 +0900

    configure.ac: remove check for broken memmem
    
    the bug of memmem(3) was fixed in glibc 2.1 released in 1999.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67129 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit dc700cf903e7fa1852bd9390e5e350d07edf1000
Author: glass <glass@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-02-23 13:42:48 +0900

    configure.ac: skip check of statx() on AIX
    
    Linux and AIX have statx() with different prototype.
    
    Linux: int statx(int, const char*, int, unsigned int, struct statx*)
    AIX: int statx(char, struct stat*, int, int)
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67128 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 6604e1b7cd75bef7ed72db699d8f88a7fb56c330
Author: hsbt <hsbt@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-02-23 12:43:58 +0900

    Merge json-2.2.0 from flori/json.
    
      https://github.com/flori/json/releases/tag/v2.2.0
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67127 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit f22ffd83e92a214a697e93fe715d29cbfa52084d
Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-02-23 11:22:05 +0900

    spec/../rbconfig_spec.rb: skip spec not working on MinGW
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67126 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 0dab1fce7c1eec3b67340e32678841151119beb1
Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-02-23 11:17:57 +0900

    * 2019-02-23
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67125 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 052dbbe74f00733b96841fc8fbe7bdefadf0440e
Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-02-23 11:17:54 +0900

    spec/../shared/write.rb: suppress random failure
    
    due to MJIT worker's known race condition.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67124 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit f53548a86cec0ebe147c6ee4484fd8ccf0f42c79
Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-02-22 16:25:54 +0900

    * expand tabs.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67123 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit b1c1ee7183f6c9b6f585d35a5a8786594e1e7733
Author: ko1 <ko1@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-02-22 16:25:51 +0900

    change `cfunc->invoker` type for opt.
    
    * vm_insnhelper.c: change `call_cfunc_*` parameters order
      and specify a function type for the passed func ptr.
      This fix reduce the number of asm instructions, such as:
        # before this patch
        0000000000000110 <call_cfunc_0>:
         110:       48 89 fa                mov    %rdi,%rdx
         113:       31 c0                   xor    %eax,%eax
         115:       48 89 f7                mov    %rsi,%rdi
         118:       ff e2                   jmpq   *%rdx
         11a:       66 0f 1f 44 00 00       nopw   0x0(%rax,%rax,1)
    
        # after this patch
        0000000000000110 <call_cfunc_0>:
         110:       ff e1                   jmpq   *%rcx
    
      However, this kind of instruction reduction doesn't affect
      any performance because of great CPU architectures :p
    
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67122 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 4af7f77d0ffe4371610143731e08f6e74314b4a1
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-02-22 15:43:11 +0900

    STATX_BTIME depends on filesystems
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67121 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit def040f6c330694e4f620a44b7790444d0f59157
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-02-22 15:35:44 +0900

    Skip EPERM, when statx(2) is wholely blocked
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67120 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 1ae52fcddff2440ee96013c020c41844332fee38
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-02-22 15:22:24 +0900

    Skip EPERM, like as r67102
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67119 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit aa5dd6fe7ef58b4d10eb3192c342043fbe8be8cd
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-02-22 15:14:22 +0900

    STATX_BTIME depends on filesystems
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67118 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit b9357e4d1b6f318d2ffa7323f14f01272ad336ee
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-02-22 15:07:30 +0900

    File#birthtime depends on the kernel version on Linux
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67117 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit fc90c4ec5da9e60c18785b3b4c393b5294009c1e
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-02-22 15:01:08 +0900

    Support File#birthtime on Linux
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67116 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 607ecea7c9ca30ef4dbdadc72c9d32131946a069
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-02-22 12:08:38 +0900

    Unified rb_file_s_birthtime
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67115 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 67032770242c09f9280cd765ff93735b451856bb
Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-02-22 05:59:12 +0900

    * expand tabs.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67114 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 4e15be8bade0a6a75c209eff3b96b4c4f03019a9
Author: ko1 <ko1@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-02-22 05:59:08 +0900

    refactoring compile.c.
    
    * compile.c: refacetoring:
      * initialize `branches` with Qfalse intead of 0.
      * make compile_call* functions from `iseq_compile_each0()`
        to make modifying them easy.
    
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67113 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit da7976235fbc2986925969646071bebe3702e49f
Author: eregon <eregon@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-02-22 00:38:59 +0900

    Update to ruby/spec@7a16e01
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67112 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit b8e389a0f3226c90e96e02e6396686a3bef6a456
Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-02-22 00:38:38 +0900

    * 2019-02-22
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67111 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 203d946781ce29069f56f259d455ffb3039315f5
Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-02-22 00:38:37 +0900

    * properties.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67110 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 92d3a7262468717757a3cf4ce24a5a6dd98f516a
Author: eregon <eregon@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-02-22 00:38:36 +0900

    Update to ruby/mspec@2ee5661
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67109 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 8b94ce988b1a000325d47daa02e16dd487c4f27d
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-02-21 16:32:24 +0900

    Constified
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67108 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 936b61d4acffc632608d1c1990b02e6a791107d0
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-02-21 16:03:12 +0900

    Path for AT_EMPTY_PATH must not be NULL
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67107 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 32f3961fd687d1096f444d09c78d7dcd247649d1
Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-02-21 15:12:17 +0900

    * 2019-02-21
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67106 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 7c369b78471e7c847cb4ffdbe95600bca55cabb5
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-02-21 15:12:13 +0900

    Separate fstatx_without_gvl from statx_without_gvl
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67105 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 7c2bbd1c7d40a30583844d649045824161772e36
Author: hsbt <hsbt@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-02-20 19:43:23 +0900

    Adjust the rubycop rules of Bundler upstream repository.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67104 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 5f08c9e2e073db205ec2bf2f5843117cb92ada68
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-02-20 18:55:25 +0900

    Do not test File class method
    
    It fails by EPERM for unknown reason.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67103 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit cc6806c76c217354c6d1ad70585b033a00faa7a9
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-02-20 17:31:17 +0900

    Skip EPERM
    
    Docker's default seccomp whitelist does not include statx syscall
    by the default.  Skipt this error for now.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67102 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit c3e0244efe21a99cf81fb26a18b797e0e84b54a5
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-02-20 17:09:32 +0900

    Revise the example on OpenBSD
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67101 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 8ed170961601a1becec56ffc0f0e7da1f9e56892
Author: ko1 <ko1@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-02-20 16:46:15 +0900

    fix rubyspec test to pass tests. please revisit it @nobu?
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67100 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit e487e86e982a56ded6e5070aeef0d77655043216
Author: ko1 <ko1@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-02-20 16:34:05 +0900

    fix r67097 with cast
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67099 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit f2d3b3623feb66b6ba59ecd866c40b531a3c5251
Author: kazu <kazu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-02-20 16:19:39 +0900

    Fix document and return value of `IO#autoclose=`
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67098 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 15a98ab42838be248a5b59ca342033ee338357ad
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-02-20 15:54:23 +0900

    Try statx syscall
    
    * file.c (rb_file_s_birthtime): export for pathname to check if
      birthtime is supported.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67097 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit d034fcb13f04b096f99d1824d5e7dd8ed256713e
Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-02-20 13:39:57 +0900

    * properties.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67096 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit b7f899681371358e84dbf230796a0a661217c2cd
Author: marcandre <marcandre@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-02-20 13:39:56 +0900

    * spec/ruby: Tweak Enuemrator::Chain#rewind spec so that arity of block matches what is yielded
    
    Calling `and_yield(*args)` adds an implicit expectation that all the `args` are passed to a block that can accept them, even though blocks that are not lambda-like don't mind extra arguments.
    It so happens that this spec passed on Ruby 2.6.1 See [Bug #15613]
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67095 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 5e80e9144f88bac3e2d8890c9e2fc22f5e391aff
Author: ko1 <ko1@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-02-20 13:27:24 +0900

    revert r67093 because it breaks tests
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67094 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 10deba066e207eb142e7b61b1479c8af4016b247
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-02-20 13:02:30 +0900

    Try statx syscall
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67093 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 5210b89fd730815ba2510b09a890910a7995a4a1
Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-02-20 00:39:37 +0900

    * 2019-02-20
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67092 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 193a06caf5b1fdbe9b4c6110314df03cab7145f5
Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-02-20 00:39:35 +0900

    insns.def: opt_regexpmatch2 is not a leaf insn
    
    related: r66982
    Sadly opt_regexpmatch2 was not a leaf insn either.
    http://ci.rvm.jp/results/trunk-vm-asserts@silicon-docker/1751213
    
    CHECK_INTERRUPT_IN_MATCH_AT is just like RUBY_VM_CHECK_INTS, and it may
    call arbitrary Ruby method, for example a GC finalizer from postponed
    job in this case.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67091 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit fe0f98e74746654c6b8bdd5203733ad01c732bde
Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-02-19 14:45:00 +0900

    * 2019-02-19
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67090 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit d3ff564779356be08274f851bf40f6a9b897fb6d
Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-02-19 14:45:00 +0900

    * expand tabs.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67089 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 88798f0787d9d4a331994332837e44f9fcc7bc5c
Author: glass <glass@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-02-19 14:44:53 +0900

    file.c: enable File.birthtime on Linux
    
    enable File.birthtime on Linux if statx(2) is available.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67088 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 5f090b8d8238b2adc0bf05d003d4384769b63e12
Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-02-18 22:33:26 +0900

    * properties.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67087 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit d04963501bc057685220fa1160fb9a102dd46d57
Author: hsbt <hsbt@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-02-18 22:33:25 +0900

    Use ENV["BUNDLE_GEM"] instead of gem command provided by system ruby.
    
      It break the examples of bundler. Because some examples detect the
      different version of system ruby than test target version like trunk.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67086 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit bef0c0a3678d07ce40f147051fba092ee30da640
Author: hsbt <hsbt@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-02-18 18:53:13 +0900

    Fixup r66984. It breakes bundler's examples.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67085 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 5c11d854110cd130a7b64e01b1e67bcf479ad886
Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-02-18 18:46:28 +0900

    * 2019-02-18
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67084 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 3661d0521fa2cf4cdf9efa51c69cad4ea93fa2b3
Author: hsbt <hsbt@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-02-18 18:46:25 +0900

    The ruby core applied the difference structure from bundler upstream repository. We need to modify a configuration for test-bundler.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67083 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 124957566f041e5c6e8f678dfaf62cae381826dc
Author: ktsj <ktsj@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-02-17 15:59:11 +0900

    .gdbinit (rp): follow up changes in r66390
    
    RHASH_ARRAY_{LEN,BOUND}_{MASK,SHIFT} have been renamed to
    RHASH_AR_TABLE_{SIZE,BOUND}_{MASK,SHIFT}.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67082 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 1ce2ba32fb94aae94b7519a64e6330a6ff88c888
Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-02-17 00:51:07 +0900

    * 2019-02-17
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67081 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit e5347b1c905acc58d98f9497d8edcb0f78729db6
Author: naruse <naruse@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-02-17 00:51:01 +0900

    Revert "Assert that union sizes match"
    
    This reverts commit r67078.
    It breaks armv7l-linux-eabihf and sparc-solaris2.11.
    http://rubyci.s3.amazonaws.com/scw-9d6766/ruby-trunk/log/20190215T061708Z.diff.html.gz
    http://rubyci.s3.amazonaws.com/unstable11s/ruby-trunk/log/20190215T072546Z.diff.html.gz
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67080 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit f450652becfaa6561399455a28211081704b0228
Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-02-15 21:38:03 +0900

    Bump the benchmark-driver git ref to v0.14.13 (macOS memory runner support)
    
    [Fix GH-2082]
    
    From: Lourens Naudé <lourens@bearmetal.eu>
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67079 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 387e8967a37b269de221614d8f83060d5d713bcb
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-02-15 14:51:39 +0900

    Assert that union sizes match
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67078 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit b1daba8227ef420247e0133ecf9bb5b647b891e0
Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-02-15 00:29:08 +0900

    * 2019-02-15
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67077 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 7570864267cb258e2d29881e37cb3b8a6930727a
Author: mrkn <mrkn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-02-15 00:29:04 +0900

    Introduce RVALUE_EMBED_LEN_MAX to remove a magic number
    
    * include/ruby/ruby.h: replace a magic number with RVALUE_EMBED_LEN_MAX,
      which indicates the number of VALUE elements can be embedded in a RVALUE.
    
    * internal.h: ditto.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67076 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit cb57336e86dbe9c21fd8bc447912256843fe6b26
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-02-14 23:21:14 +0900

    GNU make does not need srcs_vpath
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67075 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 4ae3df42f723d25b0fe4ba6b2689d607b01c6f48
Author: hsbt <hsbt@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-02-14 21:59:03 +0900

    Merge RubyGems master@9be7858f7f17eae3058204f3c03e4b798ba18b9c
    
      This version contains the some style changes by RuboCop.
    
        * https://github.com/rubygems/rubygems/commit/9d810be0ede925fb2e3af535848582c3f8e0e72f
        * https://github.com/rubygems/rubygems/commit/61ea98a727fb1b76b6fac52d74107ee4b02aaef2
        * https://github.com/rubygems/rubygems/commit/795893dce3c5f8540804fc08144cc6a90f086b13
        * https://github.com/rubygems/rubygems/commit/9be7858f7f17eae3058204f3c03e4b798ba18b9c
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67074 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit d1e6304a891fc5e9cc63e50520bdc798fb95b829
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-02-14 14:42:14 +0900

    Prefer relative directory from srcdir to top_srcdir
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67073 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 4fc656a2f331a91a71208d5a426fce951fa5ca82
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-02-14 14:40:08 +0900

    Removed duplicate dependents
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67072 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 7b8986f2e441f5f71ec9c375baf71ee06fa53130
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-02-14 00:48:36 +0900

    Cleaning gems should not clean ext
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67071 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit bd8cb9f5d268881a49819a1996d3dffdb951168e
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-02-14 00:34:08 +0900

    Parenthesize `for` to ignore errors
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67070 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 4844a449405060892db4c407b12f141364d3142d
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-02-14 00:20:50 +0900

    Suppress a warning
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67069 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 63ca54e7aa1be7e8cb2eb11881dbc5bb9cfccb37
Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-02-14 00:19:28 +0900

    * 2019-02-14
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67068 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 43ee21f26dcf911450d5da9b3503eae0d7a87b76
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-02-14 00:19:26 +0900

    Ignore errors on cleaning
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67067 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit f678332d8298e2c19d7c7daf19eeaf023f9a574f
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-02-13 21:02:08 +0900

    Consider END block
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67066 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 87b1d186f9456e0c8c716eb12c67bc3c6d54ac41
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-02-13 20:51:03 +0900

    Fix rb_bug message pattern list
    
    "Other runtime information" section depends on platforms.
    Make no expectation.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67065 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 00679d202d17bc629e02632801eac7c1bc7490c8
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-02-13 20:36:15 +0900

    Fix rb_bug message pattern list
    
    Each setions are separated by an empty line, and C level backtrace
    information format has been changed.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67064 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit c6a2de302900784dd74106091c723862119bdeca
Author: ko1 <ko1@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-02-13 18:40:45 +0900

    check return value of `write` to suppress warning.
    
    * ext/-test-/gvl/call_without_gvl/call_without_gvl.c (do_loop):
      `-Wunused-result` compiler option (gcc?) checks checking
      return value of `write`.
    
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67063 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit fb159b492f4c027d5068e17f0cd3360f31507878
Author: naruse <naruse@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-02-13 13:49:36 +0900

    fix test for r67061
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67062 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit a8c0f27276c16d4774f611ce2b1c793b92dcdc89
Author: naruse <naruse@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-02-13 13:32:03 +0900

    Remove message to recommend to repot bug
    
    This message is showed on SEGV, but it is usually caused by 3rd party
    libraries and we don't help reporters well. I concluded this message
    doesn't help users as expected.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67061 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit e20e67980e80bc83ca259bdf28e7247576fe742d
Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-02-13 13:25:00 +0900

    * 2019-02-13
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67060 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 698c55d32a0aa61a7db127f7f88e87b7717b41f2
Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-02-13 13:25:00 +0900

    * expand tabs.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67059 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 74b19e330adbdae2d8e53b58f1a2a7b725e69c8d
Author: ko1 <ko1@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-02-13 13:24:59 +0900

    fix imemo entry description.
    
    * ext/objspace/objspace.c (count_imemo_objects): `imemo_type_ids`
      should be match with `enum imemo_type` in internal.h and this
      patch fix mismatch.
    
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67058 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit b2f424150909a4441e906161d729d871b899101e
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-02-12 21:31:55 +0900

    Update dependencies, internal.h includes ruby.h
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67057 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit da1f593acabd1d95b4567170ed886c1cd5f33b9a
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-02-12 21:31:01 +0900

    Skip erb files, idirect prerequisites
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67056 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 29c9f4a590e8ad415fb88e4309ec5df8bcc868e3
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-02-12 21:15:30 +0900

    Replace versioned Unicode header paths with UNICODE_HDR_DIR
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67055 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 91cb5c1a70b2f659b6ee1dad4ca7c658fe1e00f9
Author: ko1 <ko1@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-02-12 12:45:15 +0900

    fix empty Hash memsize.
    
    * gc.c (obj_memsize_of): ar_table ptr can be NULL (size == 0).
    
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67054 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 9653f770ae359800dcd53b037fad5c07988717c2
Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-02-12 06:57:13 +0900

    * 2019-02-12
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67053 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 2f1bf4fae3206c9fb02b9966d546d4c96b3343cd
Author: eregon <eregon@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-02-12 06:57:10 +0900

    Accept a third value for NaNs, as produced by the Sun Studio C Compiler
    
    * See http://rubyci.s3.amazonaws.com/solaris11s-sunc/ruby-trunk/log/20190211T142523Z.fail.html.gz
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67052 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 63f990674bdf474f0ce88a23f0bc06b4443d3a94
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-02-11 22:43:14 +0900

    Use $(hdrdir) for include/ruby.h, as well as r67033
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67051 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 43a45b3fedcfc0b00ac6a0bafbcc49d8ab592671
Author: glass <glass@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-02-11 12:06:10 +0900

    io.c: remove unused variable and fix typo
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67049 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 0f79725a0d20182d749e6ad89785b9acfe5c50dd
Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-02-11 11:13:04 +0900

    * 2019-02-11
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67048 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 2d2a50961207307104ff16a49d07d6d3a91e0b24
Author: glass <glass@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-02-11 11:12:54 +0900

    io.c: check HAVE_FCOPYFILE
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67047 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit c84a25e14882a356bc37647a2acf1b6a9127283b
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-02-10 19:42:50 +0900

    random.c: unify syscall with getrandom
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67046 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 944a158a650a27b3fcbcc17c58605850e89b2b75
Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-02-10 17:21:39 +0900

    * 2019-02-10
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67045 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 61ffc7a0aeaa15a618f61c9df753543fa443df96
Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-02-10 17:21:39 +0900

    * expand tabs.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67044 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 1a8583de72e12e139e9c7fbcfc026c2cbf410519
Author: glass <glass@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-02-10 17:21:33 +0900

    random.c: use getrandom() if available.
    
    getrandom() is supported by glibc 2.25 or later.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67043 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit b1cb15c4a42575eb8ceb1c89256f37c662e20172
Author: akr <akr@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-02-09 23:54:54 +0900

    new constant: Process::CLOCK_TAI.
    
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67042 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 5d490f6ef82062502aa5821cbd9ebe9b09871820
Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-02-09 20:04:11 +0900

    * 2019-02-09
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67041 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit b795f9bd36dcf71fd0495d493b23752b73f4950d
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-02-09 20:04:09 +0900

    make-snapshot: try downloading Unicode files
    
    Remove empty UNICODE_FILES list to update Unicode files like as
    r67025, for 2.6 branch.
    
    [Bug #15593]
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67040 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 5133bfad5df57c3399d1ec13a33e944d90fd613b
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-02-08 18:57:23 +0900

    enum.c: [DOC] tally does not take a block
    
    [Feature #11076]
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67039 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 1616dcb16ef34ebf4ffc2167292f9a779f3e121e
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-02-08 18:49:49 +0900

    make-snapshot: try downloading Unicode files
    
    [Bug #15593]
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67038 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 0deeb1aeb6ab9c35454a64a4da0eeb587a4f2c65
Author: naruse <naruse@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-02-08 17:47:42 +0900

    Call DRb.start_service with setup/teardown
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67037 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 74f94b3e6ebf15b76f3b357e754095412b006e94
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-02-08 16:22:55 +0900

    configure.ac: check finite,isinf,isnan as macros first
    
    [ruby-core:91487] [Bug #15595]
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67036 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 4578181509ffaafb1e872d6f49f551cc887b727d
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-02-08 11:54:21 +0900

    Use assert_syntax_error
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67035 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 81fb05db9a09759e50b9b8004a89fd281d36bf67
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-02-08 11:54:20 +0900

    Suppress warning  [Feature #15575]
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67034 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 3d1c86a26f0c96a9c1d0247b968aa96e6f3c30bb
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-02-08 11:46:22 +0900

    Removed moving toplevel header since r12501
    
    Moving public headers was 12-years ago, no depend files would
    expect ruby.h in the top source directory now.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67033 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit e6f8382a766a4e27e008d8cf753c6589a3eb6f85
Author: headius <headius@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-02-08 02:29:16 +0900

    Replace outdated blockless proc call with block argument syntax
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67032 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 713279550ad33836e5d7bbbb5b801aa13def24dc
Author: eregon <eregon@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-02-08 01:40:27 +0900

    Fix specs for yield in singleton class being deprecated
    
    * Use eval to trigger warning only when the method is called.
    * Suppress warnings and clarify this will be removed in 3.0.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67031 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 75334db3c6479ea3cd7462d36ca5464d386f9c72
Author: eregon <eregon@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-02-08 01:35:33 +0900

    Update to ruby/spec@6cf8ebe
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67030 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 5c7c6763f6cf7b4face107735071c5470e835476
Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-02-08 01:35:05 +0900

    * 2019-02-08
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67029 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 820f99791eb813bd72ddce2f5b5c4173d3b69b7b
Author: eregon <eregon@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-02-08 01:35:03 +0900

    Update to ruby/mspec@231e2ce
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67028 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 6c574d4be4fa5bca86b0afb3a675ace3a8e29de6
Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-02-07 23:58:37 +0900

    appveyor.yml: retry zlib downloads
    
    https://ci.appveyor.com/project/ruby/ruby/builds/22196846/job/53xvhv265f8eogl4
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67027 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 8ca727d80f9b25046f85d6cd2e1f68d2fa001760
Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-02-07 22:57:27 +0900

    test_rinda.rb: give up stabilizing this test
    
    on --jit-wait. It's randomly failing and it's unlikely to be detecting
    any MJIT's bug.
    
    https://app.wercker.com/ruby/ruby/runs/mjit-test2/5c5c2339940b5200f01a0822?step=5c5c2b9fcfa0fc000741d940
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67026 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 910b13fe51891cd6a7e2c391e9d9278f0a5b013a
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-02-07 21:23:02 +0900

    Update Unicode files
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67025 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit a67788b2f365d993c879ad0754f41bc64389459c
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-02-07 17:53:13 +0900

    Split procstat_vm.c
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67024 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 18365f9e83ef8f8402426024de4777f1f831ba37
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-02-07 17:53:12 +0900

    Split mt19937.c
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67023 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 867338c36ea8094b6c45ed3e081315c654fd3617
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-02-07 17:53:11 +0900

    Split dtoa.c
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67022 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 7199685dc6741c08324adb31462657161499399f
Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-02-07 17:14:12 +0900

    * expand tabs.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67021 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 673dc51c251588be3c9f4b5b5486cd80d46dfeee
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-02-07 17:14:10 +0900

    enum.c: Enumerable#tally
    
    * enum.c (enum_tally): new methods Enumerable#tally, which group
      and count elements of the collection.  [Feature #11076]
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67020 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit e0f1b514d2f78fe5ea17ddf240307cafbf47fccf
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-02-07 17:14:09 +0900

    enum.c: hosited out enum_hashify
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67019 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit fb84b86be0f2758bacfb6d04c13e5946f4179fa4
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-02-07 16:39:47 +0900

    * string.c (chopped_length): early return for empty strings
    
    [Bug #11391]
    
    From: Franck Verrot <franck@verrot.fr>
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67018 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit f27643e5eb464a6bd2c3b3ff3f2f7f165b14e1fb
Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-02-07 15:56:15 +0900

    * 2019-02-07
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67017 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 58a415343963f0d1fe50b1f645463068dff6182b
Author: kazu <kazu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-02-07 15:56:13 +0900

    tool/test/test_jisx0208.rb: Use `require_relative`
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67016 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 3104de4e16652b07ef818e09cfd4fc5874a66d20
Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-02-06 09:11:08 +0900

    * 2019-02-06
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67015 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 4c0e21add7c87b70df27fbff81d8f192a467556d
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-02-06 09:11:04 +0900

    common.mk: allow brace expansion for benchmark targets
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67014 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 173ad5202b29f350b61c5f64d952ff96bbf7c98d
Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-02-05 20:45:52 +0900

    test_rinda.rb: extend timeout of wait_for as well
    
    https://app.wercker.com/ruby/ruby/runs/mjit-test2/5c5961adb18ed400951edeeb?step=5c596fd563e946000717df91
    
    see also: r67003
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67012 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit c1f0daeb6ac5c5414c9a4a58bb778a118006ae1f
Author: eregon <eregon@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-02-05 19:19:29 +0900

    Make sure to wait with IO.select before using Socket#accept_nonblock and recvfrom_nonblock
    
    * On all platforms, as this is the recommended code pattern.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67011 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 920b924e5652884064a9529ffbd80d458a46fbc6
Author: eregon <eregon@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-02-05 18:58:50 +0900

    Make sure to wait with IO.select before using Socket#recvfrom_nonblock
    
    * On all platforms, as this is the recommended code pattern.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67010 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 8552ee87b663e10d6c2265748f57a7d041face2c
Author: eregon <eregon@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-02-05 18:50:11 +0900

    Pass the Array from select() to Socket.udp_server_recv
    
    * As mentioned in the documentation.
    * Use Array#size instead of #count, it's more common.
    * Use :unset, it clarifies things if the specs fails.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67009 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit af479d54dcd1ce4a02a1f73b3bcab9d30f164f2b
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-02-05 15:00:25 +0900

    README.win32: [DOC] added modeline [ci skip]
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67008 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 9d0b921a41ae3901f16750c2fb725885128379c1
Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-02-05 13:58:47 +0900

    * properties.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67007 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 0fadb48498b3fee85aa02406b2119f9512c04ae3
Author: hsbt <hsbt@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-02-05 13:58:46 +0900

    Ignore to add bundler lib direcotry if it is same as rubylibdir.
    
      [Bug #15469][ruby-core:90742]
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67006 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 883d2d01335ead7fc0cb002543be587105b8d034
Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-02-05 11:19:54 +0900

    * 2019-02-05
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67005 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit c7628071b009e64a0c743e4a4edbed6b454e71fb
Author: samuel <samuel@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-02-05 11:19:51 +0900

    Make sure to wait for socket to be readable.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67004 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 190a61e3a506c7d5fa145d6bfc8faa94b71953ef
Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-02-04 17:20:05 +0900

    test_rinda.rb: increase timeout for --jit-wait CI
    
    https://app.wercker.com/ruby/ruby/runs/mjit-test2/5c57dbb6b18ed400951e3c74?step=5c57e8b963e94600070a5d61
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67003 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit cc7dedfb4de1f47b2a1713cb7068f9d6ffc33152
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-02-04 17:17:44 +0900

    configure.ac: separate -std=gnu99 condition
    
    Also necessary on mingw, cygwin, darwin and netbsd.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67002 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit df2b8c05bac6414d5dae001310a09a2842910dcf
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-02-04 17:13:37 +0900

    Show proper location for warning [Feature #15575]
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67001 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 9acd2b20c8fa85fe2ca827dbba195f5f12a16df0
Author: usa <usa@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-02-04 17:10:24 +0900

    Update requirements
    
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67000 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 0fc597f29c663bd785d3a7868a95340eecc7dc03
Author: ko1 <ko1@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-02-04 16:10:05 +0900

    check and show a warning for incorrect yield.
    
    * compile.c (check_yield_place): this function check the yield location.
      * show a warning if yield in `class` syntax. [Feature #15575]
    
      * do strict check for toplevel `yield`. Without this patch,
        `1.times{ yield }` in toplevel is valid-syntax (raise LocalJumpError
        at runtime) although toplevel simple `yield` is not valid syntax.
        This patch make them syntax error.
    
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66999 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 8bda94f78c959fbbcc17a99553b0c22396cabb96
Author: ko1 <ko1@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-02-04 15:28:57 +0900

    For this may be a syntax error (instead of LocalJumpError) in Ruby 2.7
    [Fix GH-2078]
    
    This patch is from Yutaka HARA <yutaka.hara+github@gmail.com>.
    
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66998 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 0c18a3d9826d59c3d02fbd49f84c9d69a706b670
Author: ko1 <ko1@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-02-04 15:12:27 +0900

    add debug code
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66997 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit cc1dbb61e0c3344fc6e17fccf2b53e57ce844b9c
Author: glass <glass@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-02-04 08:30:56 +0900

    io.c: get src_size from stp. Fix r66995.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66996 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 3f0c966603c6ee1ccf4b37071dd586a1b0147433
Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-02-04 06:04:12 +0900

    * 2019-02-04
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66995 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit e3fd9fa40364386174695856fe1bb2b6634eaa3c
Author: glass <glass@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-02-04 06:04:04 +0900

    io.c: reuse results of fstat(2) in copy functions
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66994 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 8cca079d3be8d07c261baea72529628469938245
Author: hsbt <hsbt@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-02-02 19:41:22 +0900

    Fixup r66984. Update the location of bundler gemspec.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66993 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 8f8b51c6ac54f476854e355a633dcfb49d9e4459
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-02-02 16:25:07 +0900

    README.win32: mention GIT as well as SVN
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66992 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit c2781525ec517909b5441d392b139f95865ae3c1
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-02-02 16:18:50 +0900

    README.win32: update required commands and platform names
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66991 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 33d026034e68fefcc8a6615907e864d39da6a3fb
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-02-02 15:54:55 +0900

    rdoc.css: make label-list compact
    
    "Labeled Lists" section in lib/rdoc/markup.rb states labeled-list
    will be formatted in same lines.
    
    ```
    Notice that blank lines right after the label are ignored in labeled lists:
    
      [one]
    
          definition 1
    
      [two]
    
          definition 2
    
    produces the same output as
    
      [one]  definition 1
      [two]  definition 2
    ```
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66990 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit fc7e1baf5184a362377f303821eb6dacd369b006
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-02-02 15:38:10 +0900

    COPYING: reformat as RDoc
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66989 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 009144e8efd84ad0223c96a172929a8816266809
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-02-02 15:38:09 +0900

    NEWS: use note-list
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66988 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 3f78209cd15f3e4532689e3fe1acce6938859dde
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-02-02 15:38:08 +0900

    README.win32: use label-list
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66987 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit b01a7a3edcd05166d8ff1040fdf3d3c0c36cf919
Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-02-02 15:17:35 +0900

    * 2019-02-02
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66986 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 3dd0b616243aa5e46df2d8362aa86675d338655c
Author: seki <seki@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-02-02 15:17:34 +0900

    fix: https://twitter.com/_ko1/status/1086167481922646016
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66985 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 7c9771be02ddc707fea8ec96089c8a100c59f806
Author: hsbt <hsbt@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-02-01 22:41:56 +0900

    Fixed gemspec location of bundler.
    
      FileCollector of rbinstall.rb requires location of gemspec under
      the sub-direcotry with the same name as default gems.
    
      I forgot to fix it with r66867.
    
      [Bug #15582][ruby-core:91374]
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66984 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit adbdbff2df25865e8ba0453749097d960a2384b5
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-02-01 22:40:10 +0900

    README.win32: reformat as RDoc
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66983 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 1f34da3709673a926483fe056185c41766a637da
Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-02-01 20:52:06 +0900

    insns.def: opt_regexpmatch1 is not a leaf insn
    
    Given `str`, if `str_coderange(str)` is `ENC_CODERANGE_BROKEN`,
    it calls `rb_raise`. And it calls `rb_funcallv` from `rb_exc_new3`.
    
    http://ci.rvm.jp/results/trunk-vm-asserts@silicon-docker/1673244
    
    Maybe we can have a function to directly call `exc_initialize` for this
    purpose, but it may not be worth having such a function for keeping the
    instruction leaf. We may even want to delete the insn
    https://github.com/ruby/ruby/pull/1959.
    
    I'm not sure whether compile.c could generate opt_regexpmatch2 for
    invalid coderange string. Let's monitor that for a while.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66982 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 232f31ca12a94eb9f51182955285a4474f876af7
Author: shyouhei <shyouhei@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-02-01 16:26:39 +0900

    on-smash canary detection
    
    In addition to detect dead canary, we try to detect the very moment
    when we smash the stack top.  Requested by k0kubun:
    https://twitter.com/k0kubun/status/1085180749899194368
    
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66981 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 8a098051c58446db8be3dcaea3447ce83e16df99
Author: shyouhei <shyouhei@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-02-01 15:29:02 +0900

    insns.def: mark exception-raising instructions non-leaf
    
    These instructions were missed before.  The stack canary mechanism
    (see r64677) can not detect rb_raise() because exceptions jump over
    the canary liveness check.
    
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66980 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 3c8ff424c63b6f581c64461bc4b5e13b8b0a710f
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-02-01 14:20:07 +0900

    vm_trace.c: trick rdoc for TracePoint#enable
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66979 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 8555c53e74f6862086bde429a18dbe775f661395
Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-02-01 14:11:14 +0900

    * expand tabs.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66978 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 1bc6c3f40777ca10d8e7df38b775b0bb81a25881
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-02-01 14:11:08 +0900

    Revert r63383, r63248 "compile.c: copy a short insn with leave"
    
    When copying `leave` insn, TRACE also should be copied if it is
    present, but this optimization is trivial and not worth the
    complexity.  [ruby-core:91366] [Bug #15578]
    
    4cae5353c03009beb1e0a1619422072773580609
    5afd479de63b6609ddcd1510da94d2c1ac384f7f
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66977 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit e826b7d39e0e1a58caa8554d8fe8426f919f726a
Author: shyouhei <shyouhei@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-02-01 13:39:47 +0900

    _leaf_helpers.erb: some functions are not leaf
    
    If a function has rb_warning() that is not a leaf because warning
    ultimately is a method call of Warning#warn.
    
    If a function has rb_name_error() that is not a leaf because
    NameError is allocated, then initialized.  This of course
    involves calling NameError#initialize.
    
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66976 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 5d5427cb0720772c60e4d61511a7a723e0553fdf
Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-02-01 10:31:36 +0900

    * 2019-02-01
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66974 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit af83a85f75389f646b753807c1136a7e591dec6a
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-02-01 10:31:34 +0900

    Run r66972 assertion only when a sticky-bit makes sense
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66973 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit cb5a32981404e1bd691978ad9e7ce6a824315995
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-01-31 23:02:30 +0900

    Fix exception namespace
    
    * lib/fileutils.rb (remove_entry_secure): EISDIR is under the
      Errno namespace.  [ruby-core:91362] [Bug #15577]
    
    From: Tietew (Toru Iwase) <tietew@tietew.net>
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66972 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 1f64192494e896277a8c72a9d0d53ebc93abe312
Author: naruse <naruse@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-01-31 21:58:33 +0900

    Use _NSGetMachExecuteHeader() instead of _mh_execute_header
    
    _mh_execute_header is not accessible from a dylib unless libruby.dylib is
    built with -undefined dynamic_lookup. And using -undefined
    dynamic_lookup is not good style.
    
    Reported by Jeremy Huddleston Sequoia <jeremyhu@apple.com>
    Reviewed-by: Jeremy Huddleston Sequoia <jeremyhu@apple.com>
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66971 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 857bbfd02c8c57b99c1f40311c507ca3bc2f16a6
Author: shyouhei <shyouhei@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-01-31 14:36:17 +0900

    _insn_type_chars.erb: use C99
    
    Now that comma at the end of enum is allowed, we can write this much
    more straight-forward.
    
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66960 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit e20714062bf57efcbff0dd3162b148dd35312865
Author: shyouhei <shyouhei@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-01-31 14:22:58 +0900

    _insn_operand_info.erb: use C99
    
    Same as r66957.
    
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66959 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 971f965da9a9f8f7cea9bead6c883e79dfc5b715
Author: shyouhei <shyouhei@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-01-31 14:00:41 +0900

    _insn_len_info.erb: add ASSERT_VM_INSTRUCTION_SIZE
    
    Also previous rb_vm_insn_len_info is now a function static variable.
    It seems nobody else is using it.
    
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66958 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 72e318f118d5cfde0e66a41acd3a2070fcaf4348
Author: shyouhei <shyouhei@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-01-31 13:46:03 +0900

    _insn_name_info.erb: use C99
    
    C99 allows string literals of at least 4095 characters (cf: ISO/IEC
    9899:1999 section 5.2.4.1) so the previous complex struct layout is no
    longer necessary.  Just dump the verbatim memory contents we want.
    
    
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66957 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 69431818f4166e0f2c35b8cec142e83bad603e13
Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-01-31 13:35:15 +0900

    * 2019-01-31
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66956 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 03dc91facf4688398fac33d90766642a4e14742c
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-01-31 13:35:14 +0900

    test_iseq.rb: update expected error message
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66955 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit ba4d6ae75f3b4aa26c07046671edabb92359f300
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-01-31 13:35:13 +0900

    test_iseq.rb: enabled
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66954 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 15f8fb34fa82ecb4c20c7dde3d10ca4a3206c408
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-01-30 20:58:07 +0900

    Show the code in syntax assertions
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66951 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit ea88f7ddf914a85b82f4c228a2e1278c55dff962
Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-01-30 15:06:02 +0900

    * expand tabs.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66948 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 6f6cf042d2e348e73504258fe36f4bd27694a640
Author: mrkn <mrkn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-01-30 15:05:57 +0900

    enumerator.c: fix arith_seq_first for Infinity
    
    * enumerator.c (arith_seq_first): fix for Float::INFINITY.
    
    * test/ruby/test_arithmetic_sequence.rb: add tests.
    
    * numeric.c (ruby_float_step_size): export for internal use.
    
    * internal.h: add prototype declaration of ruby_float_step_size.
    
    [ruby-core:90937][Bug #15518]
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66947 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit e1e3d642bfaf8f8c1a94687442cf51c897f8abdf
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-01-30 14:08:36 +0900

    hash.c: hoisted out st_index_hash
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66946 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit a94b78e41833d0f6b4e9b566dca234dde4628230
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-01-30 13:54:01 +0900

    hash.c: hoisted out dbl_to_index
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66945 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 15530088b66031228b55715bfafb7957da747e9b
Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-01-30 12:36:10 +0900

    * 2019-01-30
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66944 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit ef17936bc526652d7f3e9dc681a850d58da30242
Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-01-30 12:36:09 +0900

    * expand tabs.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66943 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit d07d192881920b2b46899fec55bf18199bd71d31
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-01-30 12:36:06 +0900

    hash.c: remove repeated rb_hash_start
    
    * hash.c (rb_dbl_long_hash): remove repeated rb_hash_start as
      rb_objid_hash includes rb_hash_start,
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66942 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 7fa16fd9624ca38f2d82c121a9af5f22c87e2697
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-01-28 22:32:32 +0900

    Fix `Module#const_defined?` on inherited constants
    
    [Fix GH-2061]
    
    From: manga_osyo <manga.osyo@gmail.com>
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66938 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit dd4fdb32bdbb68810fa77468157945a481bd85cc
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-01-28 20:53:54 +0900

    added assertion with method ref operator
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66937 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit b5f906136d821bf015583abdf3b01352805da290
Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-01-28 20:45:24 +0900

    * expand tabs.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66936 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 2a4c87dc31b3774b8f8f2ab7b74f6d864f41a804
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-01-28 20:45:21 +0900

    Add refinements support to method/instance_method.
    
    [Fix GH-2034]
    
    From: manga_osyo <manga.osyo@gmail.com>
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66935 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 2210709b79222ecd2d9758f7316fdbd7c068ea84
Author: glass <glass@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-01-28 14:04:17 +0900

    io.c: use fcopyfile(3) in IO.copy_stream if available
    
    fixed r66930.
    
    * io.c (nogvl_copy_stream_func): use fcopyfile(3) in IO.copy_stream if available
    
    * configure.ac: check copyfile.h and fcopyfile(3)
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66934 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 774c60955a725e378caded5e074863ceddb27ca8
Author: glass <glass@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-01-28 06:46:06 +0900

    Revert "io.c: use fcopyfile(3) in IO.copy_stream if available"
    
    This reverts commit bd670062c4e3a3c9fdfaaaf7bd3c232442a26a4c.
    It fails on rubyspec.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66933 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 0c7768e63f8859ea996c99142eb0424e2255d91b
Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-01-28 05:55:39 +0900

    * 2019-01-28
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66932 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit f1a3be3565a04bbb1bb5658b340613585a871370
Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-01-28 05:55:38 +0900

    * expand tabs.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66931 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit bd670062c4e3a3c9fdfaaaf7bd3c232442a26a4c
Author: glass <glass@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-01-28 05:55:26 +0900

    io.c: use fcopyfile(3) in IO.copy_stream if available
    
    * io.c (nogvl_copy_stream_func): use fcopyfile(3) in IO.copy_stream if available
    
    * configure.ac: check copyfile.h and fcopyfile(3)
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66930 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 42921458ff7eacd1ef614c3e67596c75ccd0a1d4
Author: eregon <eregon@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-01-27 22:12:39 +0900

    Update to ruby/spec@e57f49c
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66929 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit a53ee2136ff59ebc54ae6c98a500765bc3d13d44
Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-01-26 22:43:42 +0900

    * 2019-01-26
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66928 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 60023cf4521ce86803b9d328982e679962d448cc
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-01-26 22:43:32 +0900

    parse.y: trim newline in erred code
    
    * parse.y (parser_yyerror): trim a newline at the end of the erred
      code which was replaced with an extra space in the succeeding
      cursor line.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66927 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 0a5b4c13ad16bacfa5659f7ac92eb7abf9416261
Author: shyouhei <shyouhei@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-01-25 23:09:10 +0900

    vm.inc now in C99
    
    This changeset modifies the VM generator so that vm.inc is written in
    C99.  Also added some comments in _insn_entry.erb so that the
    intention of each parts to be made more clear.  I think this improves
    overall readability of the generated VM.
    
    Confirmed that the exact same binary is generated before/after this
    changeset.
    
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66923 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 24b57b102c1992b679f8f8c0fd1a0239289a129b
Author: kou <kou@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-01-25 15:49:59 +0900

    Upgrade CSV to 3.0.4
    
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66922 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit cdca14e75e98e2657daa40589f18a0ad46846020
Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-01-25 15:35:08 +0900

    * 2019-01-25
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66921 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit cee0c36a0890dd44efacf4ea0d37872fb3e903c6
Author: kou <kou@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-01-25 15:35:04 +0900

    Upgrade RSS to 0.2.8
    
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66920 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 6375c68f8851e1e0fee8a95afba91c4555097127
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-01-24 21:36:04 +0900

    parse.y: function parser_mixed_error & parser_mixed_escape
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66919 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 7e68efbc9599550eadf5aa9a50bdc9a36796db49
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-01-24 20:43:11 +0900

    parse.y: remove an extra error message
    
    * parse.y (parse_string): bail out when word-list meets end of
      input not to show an extra "unexpected" error message after the
      preceding error.
    
          $ ruby -e "%w["
          -e:1: unterminated string meets end of file
          -e:1: syntax error, unexpected terminator, expecting ' '
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66918 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit c6fb7c1f33e128618bcd7799a2de52874c7ebdd8
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-01-24 19:10:18 +0900

    eval_error.c: should not escapce newline and tab
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66917 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit e608402019642719dd994728c15c8ef45f163d4d
Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-01-24 14:30:45 +0900

    * 2019-01-24
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66916 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 4bcfccddca1f2ffb72f435ef2e5eb393448a2dea
Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-01-24 14:30:45 +0900

    * expand tabs.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66915 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 161ece479598629f4ace4fa23bfea7bc1331a8a0
Author: mrkn <mrkn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-01-24 14:30:42 +0900

    numeric.c: Fix negative step with float components
    
    * numeric.c (ruby_float_step): fix negative step with float components.
    
    * test/ruby/test_numeric.c (test_step_bug15537): add tests.
    
    * test/ruby/test_range.c (test_step_bug15537): add tests.
    
    [Bug #15537] [ruby-core:91101]
    
    From: shuujii (Shuji KOBAYASHI) <shuujii@gmail.com>
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66914 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit c56f61161a7baefb3d1ed3f815e5dc544b3accd6
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-01-23 18:39:45 +0900

    parse.y: token name of tSTRING_DEND
    
    * parse.y (rb_yytnamerr): show single-quoted single char as-is, to
      show a quoted closing brace as tSTRING_DEND.  e.g.:
    
          $ ./ruby -e '"#{true'
          -e:1: syntax error, unexpected end-of-input, expecting '}'
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66911 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 71342a46ac4244adb27a514f412aecd012e9ed40
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-01-23 18:08:22 +0900

    parse.y: token names
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66910 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 1fae154c07b957278fd336b54256d5c57f21e0d5
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-01-23 15:06:47 +0900

    tmpdir.rb: permission of user given directory
    
    * lib/tmpdir.rb (Dir.mktmpdir): check if the permission of the
      parent directory only when using the default temporary
      directory, and no check against user given directory.  the
      security is the user's responsibility in that case.
      [ruby-core:91216] [Bug #15555]
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66909 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 05c3256b2883000aab033737ef121a96b8009b81
Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-01-23 08:22:10 +0900

    * 2019-01-23
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66908 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit bcf85587b186bf92537ee5b456d2312a5dce9c9d
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-01-23 08:21:58 +0900

    parse.y: literal add_mark_object
    
    * parse.y (set_yylval_str, set_yylval_literal): always imply
      add_mark_object.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66907 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit bdbc8a8f1214b601ca409f66f2fe00ac06f2e99a
Author: kazu <kazu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-01-22 21:43:57 +0900

    Add more example of `String#dump`
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66906 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 4e64c54728d0d1db94f229feb59fd1bf2d60f686
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-01-22 16:25:08 +0900

    ripper.y: get rid of compile error
    
    yystpcpy is always used by yysyntax_error in bison 2.3, but may
    not used by other than yytnamerr in newer bison.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66905 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 3dc6efbe9ca582d6930f25754a16043dedecfa6f
Author: hsbt <hsbt@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-01-22 15:28:04 +0900

    Merge rubygems master targeted RubyGems 3.1.0.
    
      https://github.com/rubygems/rubygems/commit/1172320540c8c33c59fc1db5191b021c3b2db487
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66904 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 59a6215af65b3bfade13836681cbacc3294e6e78
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-01-22 15:24:59 +0900

    parse.y: enclose keyword token names by quotes
    
    * parse.y (rb_yytnamerr): strip enclosing double-quotes, same as
      the default yytnamerr except for that single-quotes matching
      back-quotes do not stop stripping.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66903 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 5e7d03531e109269e3aff7d9865bdf11f3308e67
Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-01-22 10:56:35 +0900

    * 2019-01-22
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66902 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit bac705529d358e512b6ce8b9ead6d776ab28486b
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-01-22 10:56:26 +0900

    fix typo in r66836, missing '/'s
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66901 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit f2d63385744da413cba482384d3bdbce288816a5
Author: eregon <eregon@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-01-21 21:31:29 +0900

    benchmark/app_aobench.rb: complete commented code to write the image to a file
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66900 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 32e259f097a8dbae065d55c4d7b299e697a25f84
Author: eregon <eregon@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-01-21 21:31:20 +0900

    benchmark/app_aobench.rb: remove extra printf arguments
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66899 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit dfe69186042b2b28e32cb66240ecae820724e430
Author: eregon <eregon@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-01-21 21:31:10 +0900

    benchmark/app_aobench.rb: move `srand(0)` at the top
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66898 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 502f159421cf3e35b9a62ade2a7e0fa2c53a7f21
Author: samuel <samuel@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-01-21 19:56:29 +0900

    Improvements to documentation.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66897 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 62ec5eb01874472e2df9d871ef329d5a76b9c853
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-01-21 19:24:56 +0900

    parse.y: more token names
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66896 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 12afc11fcda570118c03e88cbb72521e33c38f78
Author: glass <glass@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-01-21 19:11:04 +0900

    * io.c: use copy_file_range() if defined
    
    * configure.ac: check copy_file_range()
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66895 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 6891a1cd5ddd9e5e07d537060a257abaa6833648
Author: mame <mame@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-01-21 17:51:51 +0900

    string.c (rb_str_dump): Fix the rdoc
    
    * Officially states that String#dump is intended for round-trip.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66894 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 8a294e0f20b0bf4df6528944aa4a4d5ea76b88de
Author: mame <mame@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-01-21 16:29:00 +0900

    benchmark/app_aobench.rb: add `srand(0)`
    
    To prevent noise for benchmark result.  Just for the case.
    [Bug #15552]
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66893 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit be3a0c7042583922befae8a11f08159607b28df9
Author: mame <mame@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-01-21 16:13:32 +0900

    benchmark/app_aobench.rb: add a magic comment
    
    To support the change of default encoding.
    It had not worked correctly since 2.0 :-)
    [Bug #15552]
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66892 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 90653369097d4942cb0d397d77cf9106c839cbfc
Author: glass <glass@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-01-21 15:23:55 +0900

    * lib/net/http.rb: handle Errno::ETIMEDOUT in Net::HTTP#transport_request
      A patch from casperisfine (Jean byroot Boussier).
      [Fix GH-2012]
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66891 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 954d0815e9fea323c5c6b6ba072c0aded845a9b1
Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-01-21 10:11:57 +0900

    test_io.rb: skip test on MJIT to prevent random failure
    
    like this:
    http://ci.rvm.jp/results/trunk-mjit-wait@silicon-docker/1636642
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66890 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 4487562da19a50eceedad8956a652a173c96aff6
Author: eregon <eregon@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-01-21 06:25:08 +0900

    Update to ruby/spec@e2fbd4d
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66889 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 6204e0804b24f1675b49d5880da014411bcfb831
Author: eregon <eregon@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-01-21 05:38:57 +0900

    Update to ruby/spec@35a9fba
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66888 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 58573c33e4720315ed27491e31dcc22892e1ce95
Author: eregon <eregon@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-01-21 05:38:27 +0900

    Update to ruby/mspec@e9a482d
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66887 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 1c53f86bd9701abd6c6d3a787541e5c408f5aef9
Author: stomar <stomar@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-01-21 00:07:17 +0900

    process.c: [DOC] small improvements
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66886 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit f284eb3d54df6d1bb754986f9f5272136ff73466
Author: stomar <stomar@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-01-21 00:06:11 +0900

    lib/securerandom.rb: [DOC] small grammar fixes
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66885 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 6833fbcfafdf80908e75aa1d13b9aff70646294c
Author: stomar <stomar@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-01-21 00:04:41 +0900

    time.c: [DOC] small improvement
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66884 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 8fe427c1124601861cea4c00adfe625314b44f4b
Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-01-21 00:02:08 +0900

    * 2019-01-21
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66883 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit f9b298fe71614a8ceecba9eb78203a78e9fefb28
Author: stomar <stomar@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-01-21 00:02:07 +0900

    vm.c: [DOC] small fix
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66882 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit afd68cd87114fb49158462f1594cacfd2b765e9b
Author: kazu <kazu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-01-20 13:44:25 +0900

    raise FrozenError instead of RuntimeError
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66875 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 27f51081d3b0a4bfb94df1153c005c9bc2c748ba
Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-01-20 13:38:55 +0900

    * 2019-01-20
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66874 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 141ed2f6409184412b57461de3f759db2520b9c6
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-01-20 13:38:52 +0900

    [DOC] Refactors documentation for `Forwardable`
    
    [ruby-core:71281] [Misc #11639]
    
    From: Sam Morgan <s_morgan@me.com>
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66873 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 46549d6b11eb88d02bd2ac4561ab3c7b775cd241
Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-01-19 18:08:10 +0900

    Revert "mjit_worker.c: try to simplify CC_DLDFLAGS_ARGS"
    
    This reverts commit 405940234eb7876a063eb7129ca61fcc318a633c.
    
    Not working on MinGW
    https://ci.appveyor.com/project/ruby/ruby/builds/21737578/job/09a2tr94vof6fstt
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66872 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit e90d826de7d661ef091761bf7d13c9fc70a9d956
Author: naruse <naruse@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-01-19 16:49:47 +0900

    Indented here document (<<~) is Ruby 2.3 feature
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66871 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 405940234eb7876a063eb7129ca61fcc318a633c
Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-01-19 16:35:30 +0900

    mjit_worker.c: try to simplify CC_DLDFLAGS_ARGS
    
    assuming that -nostartfiles is just optional for mingw, cygwin, and AIX.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66870 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit a5de8d1ccb98c3d1ea50159f5937b3429ff91c42
Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-01-19 16:26:59 +0900

    mjit_worker.c: do not use GCC_NOSTDLIB_FLAGS for OpenBSD
    
    OpenBSD's GCC compiler has local extensions that break when
    `-nostartfiles -nodefaultlibs -nostdlib` is used.
    
    From: Jeremy Evans <merch-redmine@jeremyevans.net>
    
    [Bug #15548]
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66869 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 31c862a775c8ca05c4f2f8001d32690e9e7f8e28
Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-01-19 12:36:25 +0900

    * 2019-01-19
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66868 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit c52ca1f2ffcc8beeec043a9fa44004de59e1bb4c
Author: hsbt <hsbt@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-01-19 12:36:22 +0900

    Revert r58345 and r58371.
    
      These changes break the behavior of default gems. Bug #13428 says
      r58345 is reasonable because gemspec file is installed by `to_ruby_for_cache`
      method. But I revert `to_ruby_for_cache` in rbinstall.rb at r58403.
      There is no reason that we apply r58345 now.
    
      But I'm not sure about gemspec of default gems affects standalone gems.
      I'm going to investigate it on rubygems/rubygems.
    
      [Bug #15500][ruby-core:90867]
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66867 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit c20aae965e2e79fcf4c443b266f7012157d5b23b
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-01-18 18:52:50 +0900

    Prefer block_given? to iterator?
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66866 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 17aeff3e77e6fe0d37a9943dd93bcb16c4bb9f66
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-01-18 18:31:32 +0900

    make-snapshot: get rid of circular dependency
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66865 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit c4e832bf6fa605234afee1fa91f0df93bc1a31c8
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-01-18 15:13:10 +0900

    configure.ac: fix build_os name
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66864 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 3859b77be1141fef50688da3aa70502d1864504c
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-01-18 14:14:59 +0900

    configure.ac: use MINIRUBY as BOOTSTRAPRUBY on msys
    
    Msys shell may not be able to run a command with a drive letter?
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66863 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 7a86165d43829ed4a464dc9b14e48ffb0d1a6798
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-01-18 11:36:14 +0900

    [DOC] mention rb_str_modify
    
    [ruby-core:91134] [Bug #15543]
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66861 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit b4ab9c0e3214c619f2025fb19ff8e010d99112eb
Author: ko1 <ko1@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-01-18 11:04:41 +0900

    support older BASERUBY for btest.
    
    * bootstraptest/test_insns.rb: check RbConfig::LIMITS to support
      older BASERUBY.
    
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66860 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 3c55a0b942be7c2f9e76cfd71f320ce1432c39aa
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-01-18 10:55:25 +0900

    configure.ac: use BASERUBY as BOOTSTRAPRUBY if available
    
    MINIRUBY may not be stable enough to run btest, in developing.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66859 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 6b5695fef9a99421a61c236c2118f793f6e4559b
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-01-18 08:52:58 +0900

    make-snapshot: make permissions uniform
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66858 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit dabbdcfd6d10e6853554b6224d962adfade53adf
Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-01-18 08:23:19 +0900

    * 2019-01-18
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66857 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 92c6072ef4183021b57ccbd3fbd7fefc17952866
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-01-18 08:23:14 +0900

    rbinstall.rb: add --exclude option for install-nodoc
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66856 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit f550da512cefbe0283106ca839c4836a98efaf3a
Author: hsbt <hsbt@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-01-17 22:45:48 +0900

    Removed old gemspecs of default gems for the Ruby committers.
    
      [Bug #12764][ruby-core:77284]
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66844 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 367fdd1aee07bd856612e9d796f301e1f1d5a30b
Author: ko1 <ko1@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-01-17 16:52:47 +0900

    reset bound if the size is 0.
    
    * hash.c (RHASH_AR_TABLE_SIZE_DEC): generally, we need to check all
      entries to calculate exact "bound" in ar_table, but if size == 0,
      we can clear bound because there are no active entries.
    
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66843 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 07298ea2094bca6f847e7b0c82e3c7059ff745e3
Author: ko1 <ko1@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-01-17 10:36:21 +0900

    support btest on older ruby.
    
    * bootstraptest/runner.rb (assert_normal_exit): check MJIT first
      to support btest with ruby ~2.5. btest (bootstraptest) should be
      enable to run with stable ruby interpreter because modified ruby
      may not able to run runner.rb and we need to know why (this is why
      we introduce btest).
    
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66842 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 0280bef3417350a0932c084c8dc7a3db86ec93c2
Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-01-17 09:36:10 +0900

    * 2019-01-17
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66841 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit d25a27abba89ade8039cc8baabce19e34865ee89
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-01-17 09:36:08 +0900

    call rb_str_modify to make a copy unshared
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66840 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit d1417ff8fabe8a99dc6c21830b7b3169bb03aa64
Author: shirosaki <shirosaki@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-01-16 23:06:37 +0900

    dir.c: fix Dir.glob with braces and matching dir
    
    * dir.c (join_path_from_pattern): add the last slash for directory
      matching.
    
    * test/ruby/test_dir.rb (test_glob_recursive_directory): add a test
      for above.
      [ruby-core:91110] [Bug #15540]
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66838 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 74477ec2b3904a0f39f11294d2bb336fb73586df
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-01-16 11:09:48 +0900

    Strip warnflags
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66836 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit d0318b8cfdc9dfd357b30b4394e5af9831de215d
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-01-16 10:35:28 +0900

    Revert r65800
    
    "Makefile.in: reconfig with the original warnflags"
    It would be unnecessary since r65803 and r65805.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66835 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 98e218b69a51fe20926d86dc1b02f4b8ca2ee601
Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-01-16 09:48:46 +0900

    * 2019-01-16
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66834 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 923d03e10cd1446e53e56c7659c1b8c35eb155b1
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-01-16 09:48:42 +0900

    Fixed a typo, missing `$`
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66833 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit ab2547d786572f4c14e0d849f5f64f006425c5ba
Author: mame <mame@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-01-15 23:19:19 +0900

    st.c (rb_hash_bulk_insert_into_st_table): avoid out-of-bounds write
    
    "hash_bulk_insert" first expands the table, but the target size was
    wrong: it was calculated by "num_entries + (size to buld insert)", but
    it was wrong when "num_entries < entries_bound", i.e., it has a deleted
    entry.  "hash_bulk_insert" adds the given entries from entries_bound,
    which led to out-of-bounds write access.  [Bug #15536]
    
    As a simple fix, this commit changes the calculation to "entries_bound +
    size".  I'm afraid if this might be inefficient, but I think it is safe
    anyway.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66832 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 10d85b19da5a9c94c5e7af16c53679981aee963b
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-01-15 22:52:38 +0900

    Clarify Array#- and Array#difference documentation
    
    Currently we are not explicit enough regarding the potentially confusing
    behavior of `Array#-` and `Array#difference` when it comes to duplicate items
    within receiver arrays.
    
    Although the original documentation for these methods does use an array with
    multiple instance of the same integers, the explanation for the behavior is
    actually imprecise.
    
    > removing any items that also appear in +other_ary+
    
    Not only does `Array#-` remove any items that also appear in `other_ary` but
    it also remove any instance of any item in `other_ary`.
    
    One may expect `Array#-` to behave like mathematical subtraction or difference
    when it doesn't. One could be forgiven to expect the following behavior:
    
    ```ruby
    [1,1,2,2,3,3,4,4] - [1,2,3,4]
    => [1,2,3,4]
    ```
    
    In reality this is the result:
    
    ```ruby
    [1,1,2,2,3,3,4,4] - [1,2,3,4]
    => []
    ```
    
    I hope that I've prevented this potential confusion with the clarifications
    in this change. I can offer this as evidence of likeliness for confusion:
    https://twitter.com/olivierlacan/status/1084930269533085696
    
    I'll freely admit I was surprised by this behavior myself since I needed to
    obtain an Array with only one instance of each item in the argument array
    removed.
    
    [Fix GH-2068] [ci skip]
    
    From: Olivier Lacan <hi@olivierlacan.com>
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66831 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit d7976d145193379d8c43f33e9a5714292a40d994
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-01-15 21:05:46 +0900

    Use `&` instead of `modulo`
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66830 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit d154bec0d5f0dd32e0d30559ab8a0a7ed8be98d2
Author: shyouhei <shyouhei@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-01-15 15:41:58 +0900

    setbyte / ungetbyte allow out-of-range integers
    
    * string.c: String#setbyte to accept arbitrary integers [Bug #15460]
    
    * io.c: ditto for IO#ungetbyte
    
    * ext/strringio/stringio.c: ditto for StringIO#ungetbyte
    
    
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66824 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 5e84537d32c3e2f21071384e2c967fe0308d408d
Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-01-15 13:02:53 +0900

    Revert "mjit_worker.c: try passing -nostdlib to AIX"
    
    This reverts commit b32fb23083912c37a2601c66531ed786a7c9f3e5.
    
    This didn't work on AIX.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66823 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit a01f2f0abd2691270e71cf2374607c2ca4bbce5f
Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-01-15 12:43:47 +0900

    * 2019-01-15
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66822 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 01d63239e40902bcdc2effa91a9707132290f3ed
Author: naruse <naruse@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-01-15 12:43:44 +0900

    Suppress warning: ambiguous first argument; put parentheses or a space even after `/' operator
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66821 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit ad10418eab9c70f188d8735ccd1e6f2e160c64e2
Author: nagachika <nagachika@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-01-14 20:04:52 +0900

    update redmine-backporter to catch up Redmine 4.0. [ci skip]
    
    tool/redmine-backporter.rb: change revision resource URL.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66820 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 4d727639b45a43e73ec8588e837f74315dafa619
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-01-14 19:16:54 +0900

    ast.c: fix missing head part in dynamic literal
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66819 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit ec3cdb34ce6f19be7a6d887357fd1763f97992d1
Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-01-14 16:28:34 +0900

    mjit_worker.c: pass -nostdlib when making pch as well
    
    [Bug #15513]
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66817 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit b32fb23083912c37a2601c66531ed786a7c9f3e5
Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-01-14 15:45:24 +0900

    mjit_worker.c: try passing -nostdlib to AIX
    
    r66812 might have allowed this. Testing.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66816 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit d14089fb3cef922a0c3a61661fd1c92bd083e991
Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-01-14 15:18:53 +0900

    mjit_worker.c: pass -lgcc to GCC platforms
    
    using `-nodefaultlibs -nostdlib`.
    
    I assume libgcc is needed when we use -nostdlib, and it's linked on some
    platforms but not linked on some platforms (like aarch64, and possibly
    AIX as well) as said in https://wiki.osdev.org/Libgcc :
    
    > You can link with libgcc by passing -lgcc when linking your kernel
    with your compiler. You don't need to do this unless you pass the
    -nodefaultlibs option (implied by -nostdlib)
    
    Also note that -nostdlib is not strictly needed (rather implied
    -nodefaultlibs is problematic for Gentoo like Bug#15513, which will be
    approached later) but helpful for performance. So I want to keep it for
    now.
    
    [Bug #15522]
    
    I'm not trying to add `-nodefaultlibs -nostdlib` for AIX in this commit
    because AIX RubyCI is dead right now, but I'll try to add them again
    once RubyCI is fixed.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66812 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit d89d1d468779ccea52d9b8da4f9d967543d28723
Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-01-14 14:50:13 +0900

    mjit_worker.c: untangle CC_LIBS nesting
    
    This should have no impact.
    The CC_LIBS was too hard to read for human.
    
    I don't remember whether the order of -lmsvcrt and -lgcc matters or not,
    but I kept that for the best safety.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66811 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit b4bc6ccb4ebf8be89ae0a7fa5f7e764a1cefac86
Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-01-14 13:49:32 +0900

    * 2019-01-14
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66810 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 4840771afb158c544d583384404d33dcb4405afe
Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-01-14 13:49:28 +0900

    vm_insnhelper.c: make VM helpers inline
    
    In r66597, both VM and JIT seem to be made slower:
    
    ```
    $ benchmark-driver benchmark.yml --rbenv 'r66596::before --disable-gems;r66597::after --disable-gems;r66596+JIT::before --disable-gems --jit;r66597+JIT::after --disable-gems --jit' -v --repeat-count 24
    r66596: ruby 2.7.0dev (2018-12-28 trunk 66596) [x86_64-linux]
    r66597: ruby 2.7.0dev (2018-12-28 trunk 66597) [x86_64-linux]
    r66596+JIT: ruby 2.7.0dev (2018-12-28 trunk 66596) +JIT [x86_64-linux]
    r66597+JIT: ruby 2.7.0dev (2018-12-28 trunk 66597) +JIT [x86_64-linux]
    Calculating -------------------------------------
                                 r66596      r66597  r66596+JIT  r66597+JIT
    Optcarrot Lan_Master.nes     55.174      54.620      88.011      85.326 fps
    
    Comparison:
                 Optcarrot Lan_Master.nes
                  r66596+JIT:        88.0 fps
                  r66597+JIT:        85.3 fps - 1.03x  slower
                      r66596:        55.2 fps - 1.60x  slower
                      r66597:        54.6 fps - 1.61x  slower
    ```
    
    This commit makes JIT's situation a little better. But in 2.7 we seem to
    have some other regressions after that, and this can't still resurrect the
    2.6.0's performance.
    
    ```
    $ benchmark-driver benchmark.yml --rbenv 'before::before --disable-gems;after::after --disable-gems;before+JIT::before --disable-gems --jit;after+JIT::after --disable-gems --jit' -v --repeat-count 24
    before: ruby 2.7.0dev (2019-01-13 trunk 66808) [x86_64-linux]
    after: ruby 2.7.0dev (2019-01-13 trunk 66808) [x86_64-linux]
    last_commit=vm_insnhelper.c: make VM helpers inline
    before+JIT: ruby 2.7.0dev (2019-01-13 trunk 66808) +JIT [x86_64-linux]
    after+JIT: ruby 2.7.0dev (2019-01-13 trunk 66808) +JIT [x86_64-linux]
    last_commit=vm_insnhelper.c: make VM helpers inline
    Calculating -------------------------------------
                                 before       after  before+JIT   after+JIT
    Optcarrot Lan_Master.nes     51.710      51.535      83.629      85.486 fps
    
    Comparison:
                 Optcarrot Lan_Master.nes
                   after+JIT:        85.5 fps
                  before+JIT:        83.6 fps - 1.02x  slower
                      before:        51.7 fps - 1.65x  slower
                       after:        51.5 fps - 1.66x  slower
    ```
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66809 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit edb65a6254a1e06bb2155678676d6798acd7a51e
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-01-13 22:49:25 +0900

    rdoc: ignore gemspec files
    
    [ruby-core:91067] [Bug #15531]
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66808 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 71d2695d1725270caa1301ab39689c5a6e7e7072
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-01-13 22:41:36 +0900

    rdoc: fixup the test for r66806
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66807 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 0fb782ea28b61035d56a8fb1f32754a18f2cee60
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-01-13 22:16:56 +0900

    rdoc: ignore garbage files
    
    * lib/rdoc/options.rb (RDoc::Options#init_ivars): exclude backup
      files by default.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66806 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 6feee125b96cd03794fd670ad02ba16ce7120b0d
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-01-13 22:16:55 +0900

    common.mk: common rdoc variables
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66805 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 665d9a4331059687e87a6e9c6c1ce9d39b48c35a
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-01-13 13:36:45 +0900

    time.c: separate sign argument
    
    * time.c (vtm_add_offset): separate sign argument to get rid of
      repeated negations.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66804 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 019c891508334d0437140ac12badbceab86827bd
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-01-13 12:31:01 +0900

    time.c: do not set utc_offset in vtm_add_offset
    
    * time.c (vtm_add_offset): just add offset to other components
      only.  removed subtraction of utc_offset as it is overwritten
      always immediately in callers.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66803 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 128b6577b337e240f6e5141b9fbf380cd4d4d11a
Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-01-13 12:27:18 +0900

    * 2019-01-13
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66802 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 6d18187371c0b90eae41cea18f829363bd61e5f1
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-01-13 12:27:16 +0900

    Fix remaining syntax errors in Binding#irb docs
    
    Apologies for catching those so late.
    
    [Fix GH-2067] [ci skip]
    
    From: Olivier Lacan <hi@olivierlacan.com>
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66801 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit ad0ba0dc2739ebf54dd6df3e0f1d7bbe4712449f
Author: kazu <kazu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-01-12 21:39:41 +0900

    trivial fix r66778 [ci skip]
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66798 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 4e28fdf417fcd2d9492277b46a556264ab9ba0de
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-01-12 18:36:52 +0900

    No FloatDomainError at non-finitive number if exception: false
    
    [ruby-core:91021] [Bug #15525]
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66797 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 62c17a2f21b47243071075cbef37fe72b6ecd0ff
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-01-12 14:02:58 +0900

    No TypeError at nil if exception: false
    
    [ruby-core:91021] [Bug #15525]
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66796 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 52a97e36d09ae15800c2a52094759c18e7be4ee0
Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-01-12 13:53:13 +0900

    * 2019-01-12
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66795 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 056c24d3987e8608ebdddba864f112241ec21992
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-01-12 13:53:09 +0900

    RbConfig::CONFIG never had "exeext"
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66794 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 0a5655a5be8a7447ca895a6e15a17fb2076d3f34
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-01-11 18:36:49 +0900

    Drop whole examples
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66793 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 8197abf9aada88fd46bd6898bee21449ace9efaf
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-01-11 17:44:41 +0900

    Fix r66791
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66792 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit d03771d85a77fb85d17bb072618e78a910beb594
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-01-11 16:50:23 +0900

    Fix r66772
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66791 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit e4f46eabab70bfcde67f0032a902433d11afc166
Author: kazu <kazu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-01-11 13:58:33 +0900

    Fix make-snapshot for trunk
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66790 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit bdc36b360ea093e51cae4f983752bf077982fde0
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-01-11 10:18:59 +0900

    Ensure to terminate the child
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66789 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit d95b13ead18a22cf7328064f9a29c7de72bf8103
Author: tenderlove <tenderlove@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-01-11 02:28:13 +0900

    Update refinements docs
    
    Co-Authored-By: Vladimir Dementyev <dementiev.vm@gmail.com>
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66788 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit dd67af4892d7e498357e0e5fbb58512a26367080
Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-01-11 00:42:44 +0900

    addr2line.c: fix -Wextra-semi
    
    and ignore only -Wgnu-empty-initializer.
    https://travis-ci.org/ruby/ruby/jobs/477867392
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66787 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit d74fc1b17548cc98b8a545b6c655f06e493a806e
Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-01-11 00:02:35 +0900

    addr2line.c: do not suppress -Wpedantic
    
    because it was for "-assi -Wpedantic" on Travis, but we changed the
    Travis build to "-std=c99 -Wpedantic".
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66786 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 1e19973d98e24768506cc5d2198f92c12e03476b
Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-01-11 00:00:42 +0900

    * 2019-01-11
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66783 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 299e9cd91a97fb298632d4c9a91723cffb5fd6ac
Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-01-11 00:00:40 +0900

    revert r66768 for Ruby 2.7 due to Misc#15347
    
    It's safer to backport r66768 to 2.6 branch, but for 2.7 it's not
    needed anymore.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66782 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit d31cbd4ff99c609f5a1b6b0ccf890c603db02e86
Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-01-10 23:55:24 +0900

    test_jit.rb: change format of test error output
    
    to avoid breaking redmine quote like
    https://bugs.ruby-lang.org/issues/15522
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66781 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit bb44d9ecf035f2dac47606c50f7e797c79a5a367
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-01-10 23:44:11 +0900

    configure: refuse to build with jemalloc when header is missing
    
    [ruby-core:90964] [Bug #15520]
    
    Freom: Misty De Meo <mistydemeo@github.com>
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66779 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 56bf732aaf5a109964b0297b2158372de2e3ae97
Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-01-10 23:31:18 +0900

    mjit.c: use boolean type for boolean variables
    
    and functions to clarify the intention and make sure it's not used in a
    surprising way (like using 2, 3, ... other than 0, 1 even while it seems
    to be a boolean).
    
    This is a retry of r66775. It included some typos...
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66778 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit efd99b533177d429dbc64ababfe342ebbd3f6502
Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-01-10 22:29:29 +0900

    Revert "mjit.c: use boolean type for boolean variables"
    
    This reverts commit bb1a1aeab0f2a5fe437c89b841a887ba56653453.
    
    We hit something on ci.rvm.jp, reverting until investigation is done.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66776 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit bb1a1aeab0f2a5fe437c89b841a887ba56653453
Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-01-10 22:21:58 +0900

    mjit.c: use boolean type for boolean variables
    
    and functions to clarify the intention and make sure it's not used in a
    surprising way (like using 2, 3, ... other than 0, 1 even while it seems
    to be a boolean).
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66775 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 5da9bd0ee5b9a4faf503942b803b8b54b70c98ee
Author: kazu <kazu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-01-10 21:41:06 +0900

    test/ruby/test_method.rb: Remove unreachable call
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66774 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit bfb684c0295e4527ba6b494834d783d878c2ca93
Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-01-10 17:22:23 +0900

    NEWS: announce C99 requirement [ci skip]
    
    [Misc #15347]
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66773 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 9f1fb0a17febc59356d58cef5e98db61a3c03550
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-01-10 17:19:14 +0900

    proc.c: proc without block
    
    * proc.c (proc_new): promoted lambda/proc/Proc.new with no block
      in a method called with a block to a warning/error.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66772 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit ec336fb40e4df0c8615e584fbefb5e9e572cb9ec
Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-01-10 17:04:35 +0900

    configure.ac: Require C99
    
    We already added AC_PROG_CC_C99 in r66605.
    This commit stops warning C99 features.
    
    [Misc #15347] [close https://github.com/ruby/ruby/pull/2064]
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66771 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit dfdd0e1d08fce51c563d69f15067bf2495158a2b
Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-01-10 16:59:18 +0900

    .travis.yml: allow C99 on pedanticism buid
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66770 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 33a75edd3cf6062796043ae75747b4b191db3789
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-01-10 15:01:32 +0900

    proc.c: check if callable
    
    * proc.c: check the argument at composition, expect a Proc,
      Method, or callable object.  [ruby-core:90591] [Bug #15428]
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66769 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 671ef4e9e3d8cb3c397547934902a6a4fd312816
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-01-10 09:36:28 +0900

    Get rid of C99 feature for now [ruby-core:90949] [Bug #15519]
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66768 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 5577a8776ebcd801122f52d612285faee1dde0f2
Author: tenderlove <tenderlove@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-01-10 08:04:00 +0900

    insns.def (duparray, duphash): add dtrace hooks
    
    They are considered Array and Hash creation events, so
    allow dtrace (and systemtap) to track those creations.
    
    Co-Authored-By: Eric Wong <e@80x24.org>
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66767 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 5f17fa6c1935cfa145c41844f8d1faa47f532689
Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-01-10 04:11:35 +0900

    * 2019-01-10
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66766 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit e3dbe84e12b3ebe95187edc3a5e9fe2f373a0388
Author: ko1 <ko1@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-01-10 04:11:32 +0900

    add setter of iter_lev.
    
    * hash.c: add special setter function (inc and dec).
    
    * internal.h: constify RHash::iter_leve.
    
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66765 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 140f8b94ced86966fc6979e8cfc5ef3bfa68da5d
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-01-09 23:04:21 +0900

    class.c: refactor class_instance_method_list
    
    * class.c (class_instance_method_list): gather singleton and
      extended methods first separately from ancestors.
      [ruby-core:90872] [Bug #15501]
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66764 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 347f3f30d6743e8b7cd133ae298c0290f2ef3a1d
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-01-09 22:58:51 +0900

    time.c: update error message for invalid utc_offset
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66763 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 78d6e3370238c47d5933703fb55d5ab9e8bc4692
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-01-09 22:58:49 +0900

    Fix styles [ci skip]
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66762 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit df0faba1ff958590a02fd668afbf2b525e845b54
Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-01-09 21:55:21 +0900

    * expand tabs.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66761 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 730f2886b535709832494ebe8c98f88ba0a29cea
Author: kazu <kazu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-01-09 21:55:20 +0900

    Follow behaviour of IO#ungetbyte
    
    see r65802 and [Bug #14359]
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66760 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit bc27f87889934099f1b8b17512c634b615062e22
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-01-09 17:43:50 +0900

    Remove duplicate macro definition
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66759 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit fc9e0302ea6756e0ea95dbc11216a3a776ad16a6
Author: mrkn <mrkn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-01-09 16:05:37 +0900

    complex.c: optimize zero check for Float
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66758 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit f7c0abeaeaba157b6535b397a4fd551e204608d3
Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-01-09 04:22:11 +0900

    * 2019-01-09
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66757 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 79c150f8a5af9ad555262646fb9631ac40f0c23f
Author: tenderlove <tenderlove@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-01-09 04:22:05 +0900

    Mark array as "going to be modified" in `Array#reject!`
    
    Before this patch, if `reject!` is called on a shared array it can
    mutate the shared array rather than a copy.  This patch marks the array
    as "going to be modified" so that the shared source array isn't
    mutated.
    
    [Bug #15479] [ruby-core:90781]
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66756 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit e9dc6f6076207f84a93ae917ca682d7d2c973f86
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-01-08 19:53:43 +0900

    Check by #name [ruby-core:90853] [Bug #15497]
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66755 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 497075b3a1b2021f882f13b86b1e96dc87513d6f
Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-01-08 18:08:37 +0900

    * expand tabs.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66754 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 50784a0a4412df551d96dd01067473cd4226481b
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-01-08 18:08:31 +0900

    Defer escaping control char in error messages
    
    * eval_error.c (print_errinfo): defer escaping control char in
      error messages until writing to stderr, instead of quoting at
      building the message.  [ruby-core:90853] [Bug #15497]
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66753 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit e52b102c36dc1dd609a97149e99edc7d1f96b7a4
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-01-08 16:45:04 +0900

    Test for "%p" in Time.strptime
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66752 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit bbd1e83e5aa15f2f5fd3afa569de04bbd9c21eec
Author: mrkn <mrkn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-01-08 13:53:06 +0900

    complex.c: replace misused UNLIKELY with LIKELY
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66751 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 1e87935958c0afc9e953079e99eb628865e55820
Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-01-08 13:37:44 +0900

    * 2019-01-08
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66750 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 2b9c6e1a8a1aa94ed8d300368abb4247cfb24d87
Author: mrkn <mrkn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-01-08 13:37:40 +0900

    range.c (range_last): disable optimization when each is redefined
    
    Do not use the optimized version of Range#last when Range#each is
    redefined.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66749 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 8371a9a4ceea32f8e76f3d867722b42e5477fba1
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-01-07 16:03:23 +0900

    time.c: support military time zone names
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66747 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 4f9ab3a01a475f5236632575fa4d3a6b6aef7d15
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-01-07 15:59:46 +0900

    time.c: UTC and Z timezones should be utc
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66746 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit da1f9199bd659f6277d53cc41f6007911fb3a9c5
Author: hsbt <hsbt@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-01-07 15:01:49 +0900

    Bump version to date-2.0.0.
    
      I forgot to change it when Ruby 2.6.0 was released.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66745 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit a288ff502ed5267898fd8e38d291c611befe7f0b
Author: mrkn <mrkn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-01-07 13:49:34 +0900

    complex.c (f_divide): canonicalize a quotient
    
    Cannonicalize resultant real and imaginary parts when complex number
    divided by non-complex number.
    
    [Fix GH-2065] [Bug #15505] [ruby-core:90891]
    
    From: Joe Peric <peric.joe@gmail.com>
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66744 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 72ad092960c413b6a5687c552747b20a5ed78b22
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-01-07 11:05:21 +0900

    Time.strptime benchmarks
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66743 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 9e3ffd41f5aa697bcfd2adac29498755f095d4a3
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-01-07 10:58:05 +0900

    Select ruby to run benchmarks with BENCH_RUBY
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66742 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 26ea03c04fdcd282d499b762017d78d8c06e68e5
Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-01-07 00:46:22 +0900

    * 2019-01-07
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66741 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit d41fb6ce0b35e197b98ca441b05011d28577ddc2
Author: mrkn <mrkn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-01-07 00:46:21 +0900

    benchmark/range_last.yml: remove needless prelude
    
    [ci skip]
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66740 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit d8931259d0bfd8f4d97402250488a590be2a4453
Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-01-06 23:53:43 +0900

    internal.h: unify our own stdtbool.h implementation
    
    because we had another one in missing/stdbool.h as well.
    Assuming that _Bool does not exist when stdbool.h is absent, I'm in
    favor of r57462 implementation rather than r61326.
    
    Note that Visual Studio 2013 has stdbool.h and thus r57462's commit
    message is somewhat misleading. This missing/stdbool.h is for Visual
    Studio 2012 or older, and for Oracle Solaris Studio 12.2 or older because
    it's added in 12.3 https://docs.oracle.com/cd/E24457_01/html/E21987/gkeza.html.
    
    missing/stdbool.h: ditto.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66739 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit d9699fadf8b7031fb92854106d7703b8370eb95f
Author: duerst <duerst@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-01-06 20:41:12 +0900

    simplify filename-related code
    
    (Thanks to Nobuyoshi Nakada for the hint!)
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66738 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit b991ccc2103eb468cc663a1263750fb86d0745ae
Author: duerst <duerst@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-01-06 16:50:18 +0900

    add logic to handle Unicode beta period file names
    
    In downloader.rb, add logic to handle file names of the form
    UnicodeData-12.0.0d6.txt. To find the right file, we download
    the index of the directory. Then we download the files by finding
    the file names from the index. Files are always checked for changes,
    because changes might be frequent during the beta period.
    We also check whether any index.html files are left when we are not
    in the beta period. This would indicate that we might have stale
    data from the beta period rather than the actual release data.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66737 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit dd3ed41cd03f37da856e0af764d8cc8aec952531
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-01-06 14:07:10 +0900

    ast.c: argument must be a string
    
    [ruby-core:90904] [Bug #15511]
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66736 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 6629588aa555a21a6849f3b093c21fedf9880c23
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-01-06 13:36:56 +0900

    Fix mday overflow
    
    [ruby-core:90897] [Bug #15506]
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66735 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 6e1d498ac7cd6fcd18352a22d8a3e3ed19df9c6b
Author: mrkn <mrkn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-01-06 09:46:36 +0900

    range.c: optimize rb_range_last for int renage
    
    This change improves the performance of Range#last method for a range
    of integer.  This optimization directly computes only required values
    only in a range instead of converting all values in the range to an
    array.  The optimized implementation is 129-16.7k times faster than
    the previous one in the benchmark result given below.
    
    === Benchmark Result ===
    
    ```
    $ make benchmark ITEM=range_last COMPARE_RUBY=/Users/mrkn/.rbenv/versions/2.6.0/bin/ruby
    generating known_errors.inc
    known_errors.inc unchanged
    /Users/mrkn/src/github.com/ruby/ruby/revision.h unchanged
    /Users/mrkn/.rbenv/shims/ruby --disable=gems -rrubygems -I/Users/mrkn/src/github.com/ruby/ruby/benchmark/lib /Users/mrkn/src/github.com/ruby/ruby/benchmark/benchmark-driver/exe/benchmark-driver \
                        --executables="compare-ruby::/Users/mrkn/.rbenv/versions/2.6.0/bin/ruby -I.ext/common --disable-gem" \
                        --executables="built-ruby::./miniruby -I/Users/mrkn/src/github.com/ruby/ruby/lib -I. -I.ext/common  -r/Users/mrkn/src/github.com/ruby/ruby/prelude --disable-gem" \
                        $(find /Users/mrkn/src/github.com/ruby/ruby/benchmark -maxdepth 1 -name '*range_last*.yml' -o -name '*range_last*.rb' | sort)
    Warming up --------------------------------------
      (1..1_000_000).last(100)       35.600 i/s -      36.000 times in 1.011239s (28.09ms/i)
     (1..1_000_000).last(1000)       36.204 i/s -      39.000 times in 1.077240s (27.62ms/i)
    (1..1_000_000).last(10000)       36.470 i/s -      39.000 times in 1.069386s (27.42ms/i)
    Calculating -------------------------------------
                               compare-ruby  built-ruby
      (1..1_000_000).last(100)       36.477    609.196k i/s -     106.000 times in 2.905950s 0.000174s
     (1..1_000_000).last(1000)       35.936     50.350k i/s -     108.000 times in 3.005321s 0.002145s
    (1..1_000_000).last(10000)       35.641      4.602k i/s -     109.000 times in 3.058233s 0.023685s
    
    Comparison:
                   (1..1_000_000).last(100)
                    built-ruby:    609195.7 i/s
                  compare-ruby:        36.5 i/s - 16700.87x  slower
    
                  (1..1_000_000).last(1000)
                    built-ruby:     50349.7 i/s
                  compare-ruby:        35.9 i/s - 1401.08x  slower
    
                 (1..1_000_000).last(10000)
                    built-ruby:      4602.1 i/s
                  compare-ruby:        35.6 i/s - 129.12x  slower
    ```
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66734 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit bf6584b5d0f88377ed448612e1170716f6f7dc83
Author: mrkn <mrkn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-01-06 09:46:35 +0900

    benchmark/range_last.yml: add benchmark cases
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66733 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit fc7f99066608286f70fabcdec221e1502d40695b
Author: ko1 <ko1@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-01-06 07:41:59 +0900

    fix last commit.
    
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66732 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 93583166c8cc9b28d36d8f4f8e23fe968849498c
Author: ko1 <ko1@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-01-06 07:40:32 +0900

    refactoring.
    
    * hash.c (EQUAL, PTR_EQUAL): make corresponding inline functions
      ar_equal() and ar_ptr_equal().
    
    * hash.c (SET_*): removed. set fields directly.
    
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66731 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 70caae18f26fb305b73ca33e71c46f370c3e0d20
Author: ko1 <ko1@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-01-06 07:23:54 +0900

    add ar_ prefix for ar_table functions.
    
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66730 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 89cbf307b5c354f04b84b405bbd297c21c34ec03
Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-01-06 00:09:45 +0900

    * 2019-01-06
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66727 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 6ce2ef33b562deaa4b4e3d94269fe64c93d3f985
Author: mrkn <mrkn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-01-06 00:09:44 +0900

    test/ruby/test_range.rb: add assertions
    
    Add assertions of Range#first and Range#last to examine the type
    conversion of the arguments and the negative value check.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66726 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit b6b4c7cbb4581b8ce505e775a46531d33a6b3df6
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-01-05 23:31:12 +0900

    compile.c: initialize to suppress false warning.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66725 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 9cbb4dde74f854b0cfcdb48b1ce0604894c83665
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-01-05 22:15:07 +0900

    parse.y: refactored symbol rules
    
    * parse.y (symbol): turned into a node, as well as `numeric`, for
      a symbol literal, and includes `dsym` now.
    
    * parse.y (ssym): previous `symbol`.  renamed as the counterpart
      of `dsym`.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66724 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 47834932368f9af3a57e50f606d9990c1cd54c46
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-01-05 21:13:39 +0900

    parse.y: hoisted out qcall_branch_start and qcall_branch_end
    
    * compile.c (qcall_branch_start, qcall_branch_end): hoisted out
      branch coverage traces generation for qcall.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66723 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 59f59f82d42e32980694ae7b8cd2b55384eb5918
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-01-05 20:35:24 +0900

    parse.y: refine error messages
    
    * parse.y: refine error messages for tSYMBEG and tSTRING_BEG, which
      can appear at invalid places.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66722 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 56a6dd66d4deff3edc2af09271c50619a05cf1ea
Author: mrkn <mrkn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-01-05 19:07:40 +0900

    benchmark/range_last.yml: add a benchmark of Range#last
    
    [ci skip]
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66721 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 89e3d2f8d3db4ae43ee1f3a922136f30595f8467
Author: duerst <duerst@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-01-05 18:47:55 +0900

    separate downloading of Unicode property files and auxiliary files
    
    Separate downloading of Unicode property files in ucd and in ucd/auxiliary.
    This is needed because we need information from separate index.html files
    to discover the exact file names of property files during a beta period.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66720 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 0c0d181e0fc9947b4d64b9bb3fcafcc65c3ec8bb
Author: ko1 <ko1@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-01-05 09:31:54 +0900

    fix trivial indentation.
    
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66719 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 23801110085a691095fc9a8eb164880418b2215d
Author: ko1 <ko1@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-01-05 09:06:09 +0900

    call functions directly.
    
    * hash.c: ar_table only supports `objhash` so we can call compare/hash
      functions directly.
    
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66718 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 3a144485fc450465ba370cdf0d5501813d5962d7
Author: ko1 <ko1@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-01-05 08:48:33 +0900

    refactoring usage of ar_lookup().
    
    * hash.c (hash_stlike_lookup): introduce inline a function and use it
      instead of using ar_lookup()/st_lookup() directly.
    
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66717 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit eca91625b2ec367902a41a8a302bc802132ec02e
Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-01-05 00:41:32 +0900

    * 2019-01-05
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66716 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 6c1ed519ef51fe8afb7e0ed7f0df2cd2fc0db13d
Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-01-05 00:41:29 +0900

    win32/Makefile.sub: try to use __restrict on Visual Studio 2013
    
    as well. Follows up r66598.
    
    https://bugs.ruby-lang.org/issues/15347#note-7 is saying __restrict
    is supported on Visual Studio 2013.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66715 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit a2eb04f52dccb9b42404f8b133acb36b577e3b54
Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-01-04 22:14:18 +0900

    * properties.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66714 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 6304c0c4d1f2d582ccd2af15407bec3c5c647c8e
Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-01-04 22:14:18 +0900

    * expand tabs.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66713 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 23444302d9200bcc41ce279a529f73cad63c3f05
Author: normal <normal@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-01-04 22:14:11 +0900

    introduce rb_nogvl C-API to mark ubf as async-signal-safe
    
    zlib and bignum both contain unblocking functions which are
    async-signal-safe and do not require spawning additional
    threads.
    
    We can execute those functions directly in signal handlers
    without incurring overhead of extra threads, so provide C-API
    users the ability to deal with that.  Other C-API users may
    have similar need.
    
    This flexible API can supercede existing uses of
    rb_thread_call_without_gvl and rb_thread_call_without_gvl2 by
    introducing a flags argument to control behavior.
    
    Note: this API is NOT finalized.  It needs approval from other
    committers.  I prefer shorter name than previous
    rb_thread_call_without_gvl* functions because my eyes requires
    big fonts.
    
    [Bug #15499]
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66712 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 16cfd26a57c30e17bc3c116c83134420693ba5c4
Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-01-04 22:11:02 +0900

    * properties.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66711 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit e97741e12a22d78825a3a9dfcb7382adb0e27855
Author: hsbt <hsbt@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-01-04 22:10:58 +0900

    Merge Bundler 2.0.1 from upstream.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66710 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 4bbbbb6a3f5bd242f740041a644311f97c4a0052
Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-01-04 21:53:10 +0900

    * expand tabs.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66709 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 9e66910b3bd85de32e95cf019ed285a36aecfd9e
Author: normal <normal@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-01-04 21:53:06 +0900

    thread.c (call_without_gvl): spawn thread for UBF iff single-threaded
    
    We need another native thread to call some unblocking functions
    which aren't RUBY_UBF_IO or RUBY_UBF_PROCESS.  Instead of a
    permanent thread in <= 2.5, we can now rely on the thread cache
    feature to perform interrupts.
    
    [ruby-core:90865] [Bug #15499]
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66708 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 79aef1272e877b67b15b00a9cded806845556a0f
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-01-04 18:49:32 +0900

    [DOC] escape descriptions [ci skip]
    
    Escape descriptions not to get parsed as directives.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66707 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 9035e73a14087c1d3d6e015758ec467e47fc2d19
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-01-04 18:41:13 +0900

    [DOC] mark function names [ci skip]
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66706 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 8513c20370d2416632f36858edd076e099836a99
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-01-04 18:25:32 +0900

    [DOC] split a tag for each function name [ci skip]
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66705 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 44aaff6d310f8cf88d89af4437d678a64bd89aa4
Author: kazu <kazu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-01-04 18:10:10 +0900

    [DOC] Fix close tags [ci skip]
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66704 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 74c462a90047ca25be8c7cc922dfa2118fc06bfd
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-01-04 17:22:27 +0900

    class.c: [DOC] fix close tag [ci skip]
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66703 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 87e628d66b7bf98f276dbd38b810f0197f821081
Author: ko1 <ko1@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-01-04 16:49:00 +0900

    skip to calculate hash value on empty Hash ar_table lookup.
    
    * hash.c (ar_lookup): don't calculate hash_value if ar_table is empty.
    
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66702 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 784df9e6fd41a73cbdfc22222c5917991aa0825e
Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-01-04 10:59:54 +0900

    * 2019-01-04
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66701 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit ba4672c2cb90c85bfeb7cac3295c68b116c7c6f5
Author: ko1 <ko1@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-01-04 10:59:49 +0900

    ar_table_entry::hash should be `st_hash_t`.
    
    * hash.c: the type of `ar_table_entry::hash` is not a `VALUE`,
      but a `st_hash_t`.
      Also `st_hash_t` is not a `st_data_t`, but `st_index_t` (same as st.c).
    
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66700 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit b2a7a289e046cbbfc7f439f312a7204c174c3869
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-01-03 20:42:24 +0900

    Fix Random.urandom in a chroot on OpenBSD
    
    [ruby-core:90850] [Bug #15494]
    
    From: jeremyevans0 (Jeremy Evans) <merch-redmine@jeremyevans.net>
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66699 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit d0045da598f13c32606b1bf04f2eac5c3759761a
Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-01-03 15:27:35 +0900

    .travis.yml: propagate -w properly
    
    r66692's `export RUBYOPT="-w"` does not seem to work.
    Passing `RUBYOPT="-w"` to `make test-all`'s argument works.
    
    Let's try having this for all environments.
    
    (see r66690 for motivation)
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66698 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 673ff731c17bbbae4d672c8514d4991382179981
Author: mrkn <mrkn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-01-03 15:19:17 +0900

    complex.c: Optimize Complex#* and Complex#**
    
    Optimize f_mul for the core numeric class components.
    This change improves the computation time of Complex#* and Complex#**.
    
    ```
    $ make benchmark ITEM=complex_float_ COMPARE_RUBY=/Users/mrkn/.rbenv/versions/2.6.0/bin/ruby
    generating known_errors.inc
    known_errors.inc unchanged
    /Users/mrkn/src/github.com/ruby/ruby/revision.h unchanged
    /Users/mrkn/.rbenv/shims/ruby --disable=gems -rrubygems -I/Users/mrkn/src/github.com/ruby/ruby/benchmark/lib /Users/mrkn/src/github.com/ruby/ruby/benchmark/benchmark-driver/exe/benchmark-driver \
                        --executables="compare-ruby::/Users/mrkn/.rbenv/versions/2.6.0/bin/ruby -I.ext/common --disable-gem" \
                        --executables="built-ruby::./miniruby -I/Users/mrkn/src/github.com/ruby/ruby/lib -I. -I.ext/common  -r/Users/mrkn/src/github.com/ruby/ruby/prelude --disable-gem" \
                        $(find /Users/mrkn/src/github.com/ruby/ruby/benchmark -maxdepth 1 -name '*complex_float_*.yml' -o -name '*complex_float_*.rb' | sort)
    Calculating -------------------------------------
                         compare-ruby  built-ruby
       complex_float_add       6.558M     13.012M i/s -      1.000M times in 0.152480s 0.076850s
       complex_float_div     576.821k    567.969k i/s -      1.000M times in 1.733640s 1.760660s
       complex_float_mul       1.690M      2.628M i/s -      1.000M times in 0.591786s 0.380579s
       complex_float_new       1.350M      1.268M i/s -      1.000M times in 0.740669s 0.788762s
     complex_float_power       1.571M      1.835M i/s -      1.000M times in 0.636507s 0.544909s
       complex_float_sub       8.635M      8.779M i/s -      1.000M times in 0.115814s 0.113906s
    
    Comparison:
                    complex_float_add
              built-ruby:  13012361.7 i/s
            compare-ruby:   6558237.1 i/s - 1.98x  slower
    
                    complex_float_div
            compare-ruby:    576821.0 i/s
              built-ruby:    567968.8 i/s - 1.02x  slower
    
                    complex_float_mul
              built-ruby:   2627575.4 i/s
            compare-ruby:   1689800.0 i/s - 1.55x  slower
    
                    complex_float_new
            compare-ruby:   1350130.8 i/s
              built-ruby:   1267809.6 i/s - 1.06x  slower
    
                  complex_float_power
              built-ruby:   1835168.8 i/s
            compare-ruby:   1571074.6 i/s - 1.17x  slower
    
                    complex_float_sub
              built-ruby:   8779168.8 i/s
            compare-ruby:   8634534.7 i/s - 1.02x  slower
    ```
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66697 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 670725b08784e7467ffbd4b40c9a7c3cd9ca813e
Author: kazu <kazu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-01-03 14:51:19 +0900

    [DOC] Complex() default behaviour is `exception: true` [ci skip]
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66696 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit bace0d4cdcfaec75e76145349f0b3c0b989a0b6d
Author: kazu <kazu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-01-03 14:51:18 +0900

    [DOC] Add `or nil` to call-seq [ci skip]
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66695 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 55cb93efc539cbc71de486aaba300457cf21e9b5
Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-01-03 14:24:05 +0900

    test_complex.rb: use the same approach to fix failures
    
    as r66682.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66694 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 2fd6ed62b4826c03bd6d41ae99a5bd7fecafec40
Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-01-03 14:19:05 +0900

    test_complex.rb: fix tests for RUBYOPT="-w"
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66693 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 3bc28f49330cc3114d39552399bf38aa31c19aa4
Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-01-03 14:15:54 +0900

    .travis.yml: enforce -w in invoke_ruby as well
    
    actually current test-all does not fail with RUN_OPTS="-w".
    
    and chkbuild seems to use RUBYOPT="-w"
    https://github.com/ruby/chkbuild/blob/bad4681c30e71f132cdd80f324d4b8f132f6582c/chkbuild/ruby.rb#L605
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66692 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 5e1e60c3462b38d01f385a3fd2018f576a6e2722
Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-01-03 14:08:46 +0900

    * 2019-01-03
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66691 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 5743c9e85897333c4e8e4bb59d2377f1780bc19b
Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-01-03 14:08:43 +0900

    .travis.yml: add a test matrix with -w
    
    currently Travis and AppVeyor does not run tests with test-all,
    but RubyCI uses -w and currently all RubyCIs are failing.
    
    It might be better to fail at least one CI in Travis to notice it
    earlier.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66690 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit ee2ddf5411f51ea89a1569ea5d70b41cd4c6c7f2
Author: mrkn <mrkn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-01-02 13:25:11 +0900

    complex.c: fix against redefining component methods
    
    This fixes the incompatibility (maybe unintentionally) introduced by
    removal of `#ifndef PRESERVE_SIGNEDZERO` guards in f_add, f_mul, and
    f_sub functions in r62701.  [Bug #15491] [ruby-core:90843]
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66688 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 888ddda157a3253eac9e2b8962826f55e2b8fb85
Author: mrkn <mrkn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-01-02 13:18:34 +0900

    test/net/fixtures/Makefile: moved from test/net/imap
    
    This Makefile can be used to update test certificates.  It should have been
    moved at which the certificates was moved at r56836.
    
    [ci skip]
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66687 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 1e0b49a293d3792826c67b7e05c5fcbd09c9ea6e
Author: kazu <kazu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-01-02 12:29:01 +0900

    Try to update cert (2nd try)
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66686 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit f234e6c3d3170f37508e214cdaef78d4b2584e5a
Author: kazu <kazu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-01-02 12:08:20 +0900

    Try to update cert
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66685 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 6d957b2f1198514243b62abb381a876184d0a684
Author: mrkn <mrkn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-01-02 10:36:39 +0900

    complex.c: fix indentation
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66684 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit f43b38abad6282809b2573d0bf8d364dbdd77869
Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-01-02 07:49:58 +0900

    * 2019-01-02
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66683 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 8b70a215ebb59961dff17a646831ae8801b1cca1
Author: naruse <naruse@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-01-02 07:49:55 +0900

    suppress warning: method redefined; discarding old + introduced at r66681
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66682 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 5f90845420bd65be6926976a8a0dfd7a1b3173cf
Author: mrkn <mrkn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-01-01 21:20:05 +0900

    complex.c: Optimize Complex#+ for some conditions
    
    Optimize f_add defined in complex.c for some specific conditions.
    It makes Complex#+ about 1.4x faster than r66678.
    
    Compared to r66678:
    
    ```
    mrkn-mbp15-late2016:complex-optim-o3 mrkn$ make benchmark ITEM=complex_float_ COMPARE_RUBY=/Users/mrkn/.rbenv/versions/trunk-o3/bin/ruby
    /Users/mrkn/src/github.com/ruby/ruby/revision.h unchanged
    /Users/mrkn/.rbenv/shims/ruby --disable=gems -rrubygems -I/Users/mrkn/src/github.com/ruby/ruby/benchmark/lib /Users/mrkn/src/github.com/ruby/ruby/benchmark/benchmark-driver/exe/benchmark-driver \
                        --executables="compare-ruby::/Users/mrkn/.rbenv/versions/trunk-o3/bin/ruby -I.ext/common --disable-gem" \
                        --executables="built-ruby::./miniruby -I/Users/mrkn/src/github.com/ruby/ruby/lib -I. -I.ext/common  -r/Users/mrkn/src/github.com/ruby/ruby/prelude --disable-gem" \
                        $(find /Users/mrkn/src/github.com/ruby/ruby/benchmark -maxdepth 1 -name '*complex_float_*.yml' -o -name '*complex_float_*.rb' | sort)
    Calculating -------------------------------------
                         compare-ruby  built-ruby
       complex_float_add       9.132M     12.864M i/s -      1.000M times in 0.109511s 0.077734s
       complex_float_div     600.723k    627.878k i/s -      1.000M times in 1.664662s 1.592666s
       complex_float_mul       2.320M      2.347M i/s -      1.000M times in 0.431039s 0.426113s
       complex_float_new       1.473M      1.489M i/s -      1.000M times in 0.678791s 0.671750s
     complex_float_power       1.690M      1.722M i/s -      1.000M times in 0.591863s 0.580775s
       complex_float_sub       8.870M      9.516M i/s -      1.000M times in 0.112740s 0.105091s
    
    Comparison:
                    complex_float_add
              built-ruby:  12864383.7 i/s
            compare-ruby:   9131502.8 i/s - 1.41x  slower
    
                    complex_float_div
              built-ruby:    627878.0 i/s
            compare-ruby:    600722.5 i/s - 1.05x  slower
    
                    complex_float_mul
              built-ruby:   2346795.3 i/s
            compare-ruby:   2319975.7 i/s - 1.01x  slower
    
                    complex_float_new
              built-ruby:   1488649.1 i/s
            compare-ruby:   1473207.5 i/s - 1.01x  slower
    
                  complex_float_power
              built-ruby:   1721837.2 i/s
            compare-ruby:   1689580.2 i/s - 1.02x  slower
    
                    complex_float_sub
              built-ruby:   9515562.7 i/s
            compare-ruby:   8869966.3 i/s - 1.07x  slower
    ```
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66681 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 8d473272dbd9f5c6adc518b780eafee3d1f0d6bc
Author: mrkn <mrkn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-01-01 21:20:04 +0900

    benchmark/complex_float_*.yml: New benchmarks
    
    Add new benchmark scripts for binary operations of Complex with float
    components.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66680 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 11ba186c4725ef7acecbf99243083bc909b7c960
Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-01-01 18:52:15 +0900

    test_jit.rb: test methodref insn
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66679 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 6e7213f427c8030396c2de6cc488cae5d8dd5ff9
Author: hsbt <hsbt@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-01-01 13:53:52 +0900

    Merge rubygems-3.0.2.
    
      https://blog.rubygems.org/2019/01/01/3.0.2-released.html
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66678 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit f77d381159419434b3c1f1a63839706967f348f9
Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-01-01 12:03:20 +0900

    * expand tabs.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66677 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 9613af6f34e46bc70528593b345824ccada18102
Author: mame <mame@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-01-01 12:03:17 +0900

    compile.c (iseq_set_sequence): fix branch coverage table
    
    Not only TRACE_ELEMENT but also INSN_ELEMENT may have events.
    The old pc2branchindex was created using only events of TRACE_ELEMENTs.
    This change uses events of INSN_ELEMENTs too for pc2branchindex table.
    
    [Bug #15476]
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66676 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 99d363184765ef6b11e739299a805c366171fd26
Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-01-01 10:51:01 +0900

    * expand tabs.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66675 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit d58bada6cc35187d61315eb881674ae37cbbfce6
Author: mame <mame@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-01-01 10:50:57 +0900

    compile.c: support branch coverage for `a&.foo = 1`
    
    [Bug #15475]
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66674 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 7e035dcda7f8d2ce23d769424fdbf7d149c0b894
Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-01-01 10:47:17 +0900

    * expand tabs.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66673 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 4130969ea19835d0a69a69ee6ffc7fa3dfedb675
Author: mame <mame@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-01-01 10:47:14 +0900

    Revert r66670 because of wrong ticket number
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66672 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 04dec2df733a7ca1cf895be3e82ad3b0cf374741
Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-01-01 10:41:26 +0900

    * expand tabs.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66671 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 67a257cac091e44cd49a5c1a8c00cee59e284cff
Author: mame <mame@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-01-01 10:41:23 +0900

    compile.c: support branch coverage for `a&.foo = 1`
    
    [Bug #15476]
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66670 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 8423533c25db3d5e427accfa8e66895777c36df6
Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-01-01 00:00:52 +0900

    * 2019-01-01
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66669 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit d935a0ab951510241450694c73361a03656ad15b
Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-01-01 00:00:52 +0900

    * expand tabs.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66668 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 67c574736912003c377218153f9d3b9c0c96a17b
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2019-01-01 00:00:37 +0900

    Method reference operator
    
    Introduce the new operator for method reference, `.:`.
    [Feature #12125] [Feature #13581]
    [EXPERIMENTAL]
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66667 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 4a6f7633303f2d6eb5ec164dc656cf5d47531960
Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2018-12-31 23:59:32 +0900

    * expand tabs.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66666 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 1bdd422b9360c886c02c2216a230a6c95fe475a0
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2018-12-31 23:59:29 +0900

    Fix indents [ci skip]
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66665 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 705941a4925e6721fe300d263de11179010d02d5
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2018-12-31 23:59:27 +0900

    use a local variable
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66664 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 271c8f5d06bc92d3d3382fbddae616019555ed91
Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2018-12-31 21:54:40 +0900

    test_io_wait.rb: try to stabilize test_wait_readable
    
    that randomly fails
    https://rubyci.org/logs/mswinci.japaneast.cloudapp.azure.com/vc12-x64/ruby-trunk/log/20181231T103312Z.fail.html.gz
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66663 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit d7c7382f7afcba2d74454b24f9d1b9bb761c7242
Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2018-12-31 10:14:52 +0900

    * expand tabs.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66662 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 58508e8b558e1ae83d2f15617cb09f1cee8e222e
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2018-12-31 10:14:51 +0900

    load.c: resolve_feature_path
    
    * load.c (rb_resolve_feature_path): search the path for already
      loaded feature.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66661 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit c5e8627f658c88b2403e7b20637cf25e31feff88
Author: glass <glass@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2018-12-31 10:09:30 +0900

    Revert "lib/net/http.rb: use connect_timeout instead of Timeout"
    
    This reverts commit 69a1db96fe63ff3071cb3d272675a1d0470aab01.
    getaddrinfo(3) doesn't support timeout.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66660 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 69a1db96fe63ff3071cb3d272675a1d0470aab01
Author: glass <glass@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2018-12-31 09:46:07 +0900

    lib/net/http.rb: use connect_timeout instead of Timeout
    
    lib/net/pop.rb: ditto
    
    lib/net/ftp.rb: ditto
    
    lib/net/smtp.rb: ditto
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66659 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit f964fd3fa5070b95cb412cb529b47e168c0af25a
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2018-12-31 06:42:52 +0900

    vm_args.c: search symbol proc in super classes
    
    * vm_args.c (refine_sym_proc_call): traverse ancestors to search
      inherited methods for symbol proc.
      [ruby-dev:50741] [Bug #15489]
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66658 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 7e4e641c009fede540a9e307ac1d3bb9dcf00f7a
Author: eregon <eregon@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2018-12-31 02:48:11 +0900

    Exclude Solaris in Process.clock_gettime specs
    
    * It declares clocks which are invalid for clock_gettime(), which I consider OS bug.
    * I want to keep testing all declared clocks on other platforms.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66657 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 8b8e5246e79971457489cf4bd37309c2945c33e1
Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2018-12-31 02:47:57 +0900

    * 2018-12-31
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66656 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit eeedf7d57a4648fcfb75a54023c889fca3e78a3d
Author: eregon <eregon@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2018-12-31 02:47:56 +0900

    Revert "clock_gettime_spec.rb: exclude invalid clocks for Solaris"
    
    * This reverts commit a7edd05f7dca44f56fd72d7bcc232e1b27df0eb3.
    * I prefer to exclude Solaris, I want to keep testing these clocks on Linux/macOS.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66655 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit a46ce26870d8a758c596b95695429e177069f011
Author: kazu <kazu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2018-12-30 23:09:09 +0900

    [DOC] Update basename [ci skip]
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66654 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit c6915042aba8525ab40a27342a04a2accf865955
Author: mame <mame@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2018-12-30 22:21:30 +0900

    vm.c: Move the rdoc of RubyVM.resolve_feature_path [Bug #15482]
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66653 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 695cc19be963e35dabd85ea824a02f698bc260c0
Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2018-12-30 16:36:27 +0900

    accept_nonblock_spec.rb: wait before calling #accept_nonblock
    
    fixes r66593 in a better way like r66646.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66652 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 6f0e4c755f7d5921dfa3263ac25cab6a012e99ce
Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2018-12-30 15:19:10 +0900

    test_array.rb: increase timeout for RubyCI
    
    https://rubyci.org/logs/mswinci.japaneast.cloudapp.azure.com/vc12-x64/ruby-trunk/log/20181230T041101Z.fail.html.gz
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66651 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit a7edd05f7dca44f56fd72d7bcc232e1b27df0eb3
Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2018-12-30 15:17:16 +0900

    clock_gettime_spec.rb: exclude invalid clocks for Solaris
    
    https://rubyci.org/logs/rubyci.s3.amazonaws.com/unstable10x/ruby-trunk/log/20181230T041806Z.fail.html.gz
    https://rubyci.org/logs/rubyci.s3.amazonaws.com/unstable11x/ruby-trunk/log/20181230T042407Z.fail.html.gz
    https://rubyci.org/logs/rubyci.s3.amazonaws.com/unstable11s/ruby-trunk/log/20181230T032505Z.fail.html.gz
    https://rubyci.org/logs/rubyci.s3.amazonaws.com/solaris11s-sunc/ruby-trunk/log/20181230T022505Z.fail.html.gz
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66650 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit f110ebfd141710e65e230b9e79855e9ded91258e
Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2018-12-30 15:09:38 +0900

    test_optimization.rb: increase timeout for RubyCI
    
    https://rubyci.org/logs/rubyci.s3.amazonaws.com/opensuseleap/ruby-trunk/log/20181230T040002Z.fail.html.gz
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66649 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 6b861342b9ef41daf3a4c55d5a50a09f023a2180
Author: sorah <sorah@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2018-12-30 12:15:58 +0900

    Unset SOURCE_DATE_EPOCH on Rubygems test cases
    
    Relates to r66554. When test suites run with SOURCE_DATE_EPOCH, several
    tests would fail.  Environment Variables are already kept with this
    setup & teardown phase.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66648 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit e8d3fb6cdacd87a3f4d377ea13d8b47878d3006d
Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2018-12-30 10:00:29 +0900

    test_refinement.rb: increase timeout for RubyCI
    
    https://rubyci.org/logs/rubyci.s3.amazonaws.com/amazon/ruby-trunk/log/20181229T153003Z.fail.html.gz
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66647 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 230fe41825b45c92cf73e7c8d62f4941dae7beb9
Author: normal <normal@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2018-12-30 09:46:02 +0900

    accept_nonblock_spec: IO.select instead of sleep
    
    Waiting on socket I/O using IO.select should work on all platforms.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66646 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 7f54f1b5543b4a3267a64c47cff9127cbcafcc42
Author: eregon <eregon@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2018-12-30 09:05:56 +0900

    Update to ruby/spec@2d89e48
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66645 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 2eee74ef54a2e23eb870680a83dcf74c5d9d9d01
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2018-12-30 08:40:15 +0900

    Update NoMethodError/NameError docs [ci skip]
    
    [ruby-core:90796] [Bug #15481]
    
    From: zverok (Victor Shepelev) <zverok.offline@gmail.com>
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66644 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 65b1cf0e82255db68262dfb8fdb001268981e223
Author: eregon <eregon@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2018-12-30 06:55:12 +0900

    Skip specs on AIX as it doesn't have /dev/fd
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66643 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit c608af0f1eef89581b1222793e8497d302fb6701
Author: eregon <eregon@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2018-12-30 06:54:59 +0900

    Reenable spec on Solaris to find out which clocks fail on Solaris
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66642 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit be8d3ed1fd2f8eb8ec5918c0a7ec30afc4fb34d4
Author: eregon <eregon@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2018-12-30 06:54:45 +0900

    Exclude CLOCKs which require special permissions in Process.clock_gettime specs
    
    * https://rubyci.org/logs/rubyci.s3.amazonaws.com/scw-ad7f67/ruby-trunk/log/20181229T135406Z.fail.html.gz
    * https://rubyci.org/logs/rubyci.s3.amazonaws.com/rhel_zlinux/ruby-trunk/log/20181229T143303Z.fail.html.gz
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66641 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 94f4a0e91ee7077bcb4391a6f754c6ec58e78a15
Author: ko1 <ko1@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2018-12-30 01:44:09 +0900

    `TracePoint#enable(target_thraed:)` [Feature #15473]
    
    * vm_trace.c (tracepoint_enable_m): `TracePoint#enable` supports
      `target_thread:` keyword to filter a target thread.
      [Feature #15473]
    
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66640 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit fd7d4a871cd3ae035a4a48eb728f9d3fcb37e669
Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2018-12-30 01:29:52 +0900

    * 2018-12-30
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66639 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 8ee0a8e91a2dfcde0381949348268961b0f81393
Author: ko1 <ko1@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2018-12-30 01:29:44 +0900

    hide ar_table internals from internal.h.
    
    * internal.h: move ar_table def to hash.c because other files
      don't need to know implementation of ar_table.
    
    * hash.c (rb_hash_ar_table_size): added because gc.c needs to know
      the size_of(ar_table).
    
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66638 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 9f3585afad86f7683fec377a0eb4bb53b8165529
Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2018-12-29 20:04:42 +0900

    process.c: document system(..., exception: true) [ci skip]
    
    From: Victor Shepelev <zverok.offline@gmail.com>
    
    [Bug #15480]
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66637 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 31a60184f4a91424419b13171c3b04780ac064e4
Author: eregon <eregon@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2018-12-29 19:54:37 +0900

    Reenable spec on Linux to find out which clocks fail on RHEL
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66636 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 21f4795e80c244f0931dc0509b3bf6b3d650e7bd
Author: eregon <eregon@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2018-12-29 19:54:22 +0900

    Refactor Process.clock_gettime spec to give more information when it fails
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66635 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 5049e4c5e8608848029710d441b5426766573a1c
Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2018-12-29 19:50:31 +0900

    test_jit.rb: suppress random test failure
    
    on mswin RubyCI by Permission Denied.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66634 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit d8008fc29dd0551c7fa5625c91b7eae923d62939
Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2018-12-29 16:41:20 +0900

    clock_gettime_spec.rb: add more platform guards for RubyCI
    
    `Errno::EINVAL: Invalid argument - clock_gettime` could occur even on Linux.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66633 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 1ae3e6f3ce9f16c49d0584e0ad3dc3e709cc4a81
Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2018-12-29 16:26:22 +0900

    erb.rb: increase warn level only when non-zero safe_level
    
    is given.
    
    This is merging Eric's patch in [Bug #15479] to Ruby 2.6's behavior in r66631.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66632 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit c02f03609036ba4e815c2ed67fa002492b39dda9
Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2018-12-29 16:11:38 +0900

    Revert "erb.rb: print deprecation warning with warn level 1"
    
    This reverts commit b5569b9ab2ad5e0e4a997df7eb73e97ecbacc9dd.
    
    The deprecation is indefinitely postponed.
    
    [Bug #15478]
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66631 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit a403cd3598932b3349b8ff5a786b8fe4abbc3f91
Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2018-12-29 15:49:54 +0900

    test_gc.rb: increase timeout for RubyCI
    
    https://rubyci.org/logs/rubyci.s3.amazonaws.com/amazon/ruby-trunk/log/20181229T033003Z.fail.html.gz
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66630 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 7a859b6ae3000e47a36cff5603c414bb55a4a08f
Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2018-12-29 15:48:34 +0900

    test_jit.rb: prevent mixing outputs by race condition
    
    to avoid random failures like
    https://rubyci.org/logs/rubyci.s3.amazonaws.com/unstable11s/ruby-trunk/log/20181229T032506Z.fail.html.gz
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66629 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 63aaee923bdaab7b85fbbafa199b767e15523646
Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2018-12-29 13:48:23 +0900

    test_notimp.rb: loosen timeout
    
    to prevent random failures like
    https://rubyci.org/logs/rubyci.s3.amazonaws.com/debian8/ruby-trunk/log/20181229T033003Z.fail.html.gz
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66628 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 952b218ffe78b7319c5e02887e7dd30d46dbc40e
Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2018-12-29 12:57:15 +0900

    spawn_spec.rb: add missing platform guard
    
    this exists for `context "when passed close_others: false" do`, but this
    seems to be missing for `context "when passed close_others: true"`.
    And this seems to hang forever on Windows since r66622.
    https://ci.appveyor.com/project/ruby/ruby/builds/21277729
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66627 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit f9dc0fb649e66cc0791d1b9c265644ed0fea82fa
Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2018-12-29 10:53:10 +0900

    test_iseq_load.rb: increase timeout for stressful roundtrip
    
    Even 60s is short for our CI environments:
    https://rubyci.org/logs/rubyci.s3.amazonaws.com/amazon/ruby-trunk/log/20181228T153002Z.fail.html.gz
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66626 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit bfd1980db2f482670430577e04f0add5960313ee
Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2018-12-29 10:51:35 +0900

    * properties.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66625 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 40b689c71a04d2033c5b2924bbaa21efaf395ea4
Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2018-12-29 10:51:34 +0900

    clock_gettime_spec.rb: skip a new spec broken on solaris
    
    introduced in r66622, but this does not succeed on Solaris
    
    https://rubyci.org/logs/rubyci.s3.amazonaws.com/unstable11x/ruby-trunk/log/20181229T002409Z.fail.html.gz
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66624 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit c027f224431fe47ab5ea9ad2070a445244586fc4
Author: eregon <eregon@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2018-12-29 09:54:10 +0900

    Update to ruby/spec@c8b36c4
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66623 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 2076c2c3c401d9ab9324468818bbc46d4e4b870a
Author: eregon <eregon@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2018-12-29 09:22:52 +0900

    Update to ruby/spec@944ea57
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66622 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 548defb608847973e78462a38c8418f90dce9911
Author: eregon <eregon@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2018-12-29 09:22:31 +0900

    Update to ruby/mspec@2bd2ead
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66621 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 2ceebcc37b8ef5a9ca55d1fe3c3b000ccb9eaeb1
Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2018-12-29 00:19:13 +0900

    * 2018-12-29
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66620 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 1317fefe53b95d763a281d8bf13e8bd023069068
Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2018-12-29 00:19:11 +0900

    .travis.yml: increase timeout for test-all
    
    we reached 30min timeout on osx build
    https://travis-ci.org/ruby/ruby/jobs/473019623
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66619 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 26572d228d3ba804d275aa55dc4f06adbcefb4af
Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2018-12-28 23:30:16 +0900

    test_io.rb: increase timeout for RubyCI
    
    to stabilize AIX powerpc CI
    
    https://rubyci.org/logs/rubyci.s3.amazonaws.com/aix71_ppc/ruby-trunk/log/20181227T113302Z.fail.html.gz
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66618 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 0bbf1eb7542a56cc00a6c77e3f8bfd89a7b5bdd5
Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2018-12-28 23:24:46 +0900

    test_readline.rb: skip readline test for new solaris11s-sunc
    
    for now. This should be fixed, but let me make this new CI green
    first to introduce Solaris-related changes later.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66617 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit b0b0ded5aa2cf7c4574b057d8326ed4e1c172c12
Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2018-12-28 23:18:05 +0900

    webrick/test_utils.rb: loosen timeout severity
    
    to stabilize CI failure like:
    https://rubyci.org/logs/rubyci.s3.amazonaws.com/osx1013/ruby-trunk/log/20181228T114501Z.fail.html.gz
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66616 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit fa3fda1c620b14872dadc81b8b790e9dce80a619
Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2018-12-28 23:12:42 +0900

    jit_support.rb: deal with -std=c99 flag
    
    CC is changed from "icc" to "icc -std=c99" by r66605.
    
    https://rubyci.org/logs/rubyci.s3.amazonaws.com/icc-x64/ruby-trunk/log/20181228T130003Z.fail.html.gz
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66615 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit c42a872e5b960696f7ae4377ab80cbeb4b1d837b
Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2018-12-28 23:05:45 +0900

    test_array.rb: increase timeout for RubyCI
    
    to prevent random failures.
    
    test/ruby/test_autoload.rb: ditto
    test/ruby/test_optimization.rb: ditto
    
    https://rubyci.org/logs/rubyci.s3.amazonaws.com/scw-9d6766/ruby-trunk/log/20181228T101706Z.fail.html.gz
    https://rubyci.org/logs/mswinci.japaneast.cloudapp.azure.com/vc12-x64/ruby-trunk/log/20181228T114549Z.fail.html.gz
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66614 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 6e85a0ea7ee55e693148d82935da0c9b08e98974
Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2018-12-28 22:20:38 +0900

    test_iseq_load.rb: increase timeout for RubyCI
    
    https://rubyci.org/logs/rubyci.s3.amazonaws.com/arch/ruby-trunk/log/20181228T090001Z.fail.html.gz
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66613 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 78e3cd2bb1827eba1367b1ec9f4a58bce146d26b
Author: samuel <samuel@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2018-12-28 22:03:18 +0900

    Fix #endif annotation.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66612 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 9ee79b658123a2a4af65c80484d1f91ce73354e2
Author: samuel <samuel@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2018-12-28 22:03:14 +0900

    Don't allow rb_fiber_resume to raise exception on unborn fiber.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66611 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 5fb9d1e11fc50df359a1f9d2537a11f13cdb6d33
Author: samuel <samuel@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2018-12-28 22:03:09 +0900

    Implement Fiber#raise. Fixes #10344.
    
    This allows raising exceptions in another fiber, similarly to
    Thread#raise.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66610 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit b0d24baf8ab4fda0c24e15f9207984971cac8e07
Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2018-12-28 19:33:04 +0900

    * expand tabs.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66609 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit d54a86d49dfea10cfcd46fbde5046bdf13a479d1
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2018-12-28 19:33:02 +0900

    Hoisted out undefined_constant
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66608 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit f826cde5a9030e3ffb42bef2c09ee669b13d1465
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2018-12-28 18:44:32 +0900

    Add RUBY_API_VERSION to rbconfig.rb on mswin too
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66607 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 041b61e3407d317a0bff3bf4b85fe7b13833874f
Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2018-12-28 18:34:51 +0900

    test_jit.rb: suppress random failure on RubyCI
    
    This failure is a known issue that exists mainly on CI environments.
    We should address this at some moment, but making CI red by this would
    be just a false-positive alarm for now.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66606 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 61885c9b7ca8ccdaf53d7c365fbb86bad3294d88
Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2018-12-28 18:23:27 +0900

    configure.ac: try to fix addr2line build failure
    
    https://rubyci.org/logs/rubyci.s3.amazonaws.com/debian8/ruby-trunk/log/20181228T063002Z.fail.html.gz
    https://rubyci.org/logs/rubyci.s3.amazonaws.com/scw-9d6766/ruby-trunk/log/20181228T081706Z.fail.html.gz
    https://rubyci.org/logs/rubyci.s3.amazonaws.com/gentoo/ruby-trunk/log/20181228T063002Z.fail.html.gz
    https://rubyci.org/logs/rubyci.s3.amazonaws.com/centos6/ruby-trunk/log/20181228T063003Z.fail.html.gz
    https://rubyci.org/logs/rubyci.s3.amazonaws.com/centos7/ruby-trunk/log/20181228T080003Z.fail.html.gz
    https://rubyci.org/logs/rubyci.s3.amazonaws.com/opensuseleap/ruby-trunk/log/20181228T080002Z.fail.html.gz
    https://rubyci.org/logs/rubyci.s3.amazonaws.com/rhel_zlinux/ruby-trunk/log/20181228T063303Z.fail.html.gz
    https://rubyci.org/logs/rubyci.s3.amazonaws.com/icc-x64/ruby-trunk/log/20181228T090003Z.fail.html.gz
    
    I suspect r66598 triggered something.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66605 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit e23a166995dc1d671f15e8a8e77d110019f05875
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2018-12-28 13:28:16 +0900

    .travis.yml: ignore non-existent files
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66604 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 971e1aaf635c42498497d38829137af8b949f04a
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2018-12-28 13:23:39 +0900

    .travis.yml: rbconfig.rb is not needed to setup sources
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66603 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 9417d10fe18f2f51e80ecf415496e78fcdb3b64e
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2018-12-28 12:55:28 +0900

    RUBY_PROGRAM_VERSION for MJIT_PRECOMPILED_HEADER
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66602 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 91dfdf840ba3f1b26ca26e75ac5e3c8166c7d5cc
Author: shyouhei <shyouhei@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2018-12-28 12:42:11 +0900

    vm_insnhelper.c: USE_FLONUM is always defined
    
    This changeset should fix the 32bit failures.
    See also: https://travis-ci.org/ruby/ruby/jobs/472855470
    
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66601 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit da8830e3de84717ca5dbb659b60dc94557f7258c
Author: ko1 <ko1@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2018-12-28 12:09:29 +0900

    fix r66599 to sucess install. please refix this patch @nobu
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66600 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 842272540886ff1da58e690907b08f2811a86607
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2018-12-28 11:12:34 +0900

    Moved version numbers
    
    * Define major and minor version numbers only in the public
      include/ruby/version.h header, as the API version numbers.
    
    * Define only teeny version number in the private version.h
      header.
    
    * RUBY_VERSION moved to version.c.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66599 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 1095705c4218f8f752210f1a0b4f78d96ad675ac
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2018-12-28 10:56:20 +0900

    Check if restrict keyword is supported
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66598 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 24b1b433c5abf02e9f9c7eb3851f4417dc5d8751
Author: shyouhei <shyouhei@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2018-12-28 10:06:04 +0900

    vm_insnhelper.c: delete unused macros
    
    - FIXNUM_2_P: moved to vm_insnhelper.c because that is the only
      place this macro is used.
    
    - FLONUM_2_P: ditto.
    
    - FLOAT_HEAP_P: not used anywhere.
    
    - FLOAT_INSTANCE_P: ditto.
    
    - GET_TOS: ditto.
    
    - USE_IC_FOR_SPECIALIZED_METHOD: ditto.
    
    - rb_obj_hidden_p: ditto.
    
    - REG_A: ditto.
    
    - REG_B: ditto.
    
    - GET_CONST_INLINE_CACHE: ditto.
    
    - vm_regan_regtype: moved inside of VM_COLLECT_USAGE_DETAILS
      because that os the only place this enum is used.
    
    - vm_regan_acttype: ditto.
    
    - GET_GLOBAL: used only once.  Removed with replacing that usage.
    
    - SET_GLOBAL: ditto.
    
    - rb_method_definition_create: declaration moved to
      vm_insnhelper.c because that is the only place this declaration
      makes sense.
    
    - rb_method_definition_set: ditto.
    
    - rb_method_definition_eq: ditto.
    
    - rb_make_no_method_exception: ditto.
    
    
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66597 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit d3c0b20949916aa7b432a0498a8016d67a7822ad
Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2018-12-28 02:39:21 +0900

    * remove trailing spaces.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66596 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 496267023c490e717ad0598bf1e3364835b734a4
Author: ko1 <ko1@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2018-12-28 02:39:17 +0900

    fix missed script_compiled events. [Bug #15471]
    
    * ruby.c (process_options): script_compiled events are missed on
      command line -e or specified file. this commit fix it.
      [Bug #15471]
    
      This patch should be backport to Ruby 2.6 branch.
    
    * vm_core.h (rb_exec_event_hook_script_compiled): introduce utility
      function to invoke a script_compiled event.
    
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66595 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit fcc5a19e2f9801217691a842250db937de3ea5ee
Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2018-12-28 01:42:41 +0900

    test_method.rb: do not kill RubyCI openSUSE machine
    
    with NoMemoryError on TestMethod#test_splat_long_array.
    
    https://rubyci.org/logs/rubyci.s3.amazonaws.com/opensuseleap/ruby-trunk/log/20181227T080002Z.log.html.gz
    
    Maybe better to check /proc/meminfo instead of /etc/os-release.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66594 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 006afb858d77efe9f63d056cf54c3bb578cd39da
Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2018-12-28 01:28:40 +0900

    accept_nonblock_spec.rb: skip spurious failure
    
    on solaris until it gets stable.
    https://rubyci.org/logs/rubyci.s3.amazonaws.com/unstable11x/ruby-trunk/log/20181227T142405Z.fail.html.gz
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66593 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 3e3b8df5f95418d68af6bae659bd16b8c80a3830
Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2018-12-28 01:24:47 +0900

    * 2018-12-28
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66592 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit e1930666c76953ad8bcc3d4b95a5b94c553f525f
Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2018-12-28 01:24:46 +0900

    test/mkmf/test_flags.rb: try to suppress random CI failure
    
    on AIX ppc
    https://rubyci.org/logs/rubyci.s3.amazonaws.com/aix71_ppc/ruby-trunk/log/20181226T113305Z.fail.html.gz
    
    test/lib/test/unit/assertions.rb: ditto, for TestIO#test_copy_stream_no_busy_wait
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66591 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 45918161a831c0ada6eecd79ba9500d50e308f72
Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2018-12-27 23:53:02 +0900

    jit_support.rb: skip testing MJIT on oracle developer studio
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66590 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 1922e6ad65b7a458eeeb84da9f07724b0f1c1145
Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2018-12-27 23:32:29 +0900

    common.mk: pass CFLAGS to transform_mjit_header.rb
    
    so that flags like -msse4.1 are passed when checking compilation status
    in transform_mjit_header.rb. It matters for checking __builtin_xxx things.
    
    [Fix GH-2059] [Bug #14964]
    
    From: pavel <pavel.rosicky@easy.cz>
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66589 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit d9cce0814db58a506d549fea0f316a679335e22d
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2018-12-27 23:18:16 +0900

    Fix restoration
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66588 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 71987f3f09ba51c34a002370ec5dd3202e9beae4
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2018-12-27 23:15:36 +0900

    Suppress warnings
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66587 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit b7c2ca7a3225efcc79a72ee3798abc3320f5c304
Author: akr <akr@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2018-12-27 21:42:45 +0900

    [DOC] SecureRandom is extended by Random::Formatter.
    
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66586 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit e3e09806a227acb9d1d4ced37c808d97f4eeb3cf
Author: kazu <kazu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2018-12-27 18:09:42 +0900

    Arrange as same as comment and return statement
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66585 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit bc64df876ebe96fa5da2b98d6227a8ef4163b911
Author: shyouhei <shyouhei@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2018-12-27 15:12:09 +0900

    delete emacs mode lines [ci skip]
    
    These settings are now covered by .dir-locals.el.
    
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66584 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 070a4aa0f00bd466fe52c526a0e862092cdcfa81
Author: shyouhei <shyouhei@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2018-12-27 15:11:09 +0900

    add .dir-locals.el [ci skip]
    
    Recent Emacs (23 and up?)  has this feature called .dir-locals.el.
    See also: https://www.gnu.org/software/emacs/manual/html_node/emacs/Directory-Variables.html
    
    
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66583 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 1680a13a926b17661329beec1ded6b32aad16c1b
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2018-12-27 13:49:12 +0900

    Fix Net::Protocol::BufferedIO#write when sending large multi-byte string
    
    This commit should fix Net::Protocol::BufferedIO#write when sending
    large multi-byte string like following example.
    
    ```
    $ ruby -rnet/http -rjson -v -e "Net::HTTP.post(URI('http://httpbin.org/post'), { text: 'あ'*100_000 }.to_json, 'Content-Type' => 'application/json')"
    ruby 2.6.0p0 (2018-12-25 revision 66547) [x86_64-linux]
    Traceback (most recent call last):
            19: from -e:1:in `<main>'
            18: from lib/ruby/2.6.0/net/http.rb:500:in `post'
            17: from lib/ruby/2.6.0/net/http.rb:605:in `start'
            16: from lib/ruby/2.6.0/net/http.rb:920:in `start'
            15: from lib/ruby/2.6.0/net/http.rb:502:in `block in post'
            14: from lib/ruby/2.6.0/net/http.rb:1281:in `post'
            13: from lib/ruby/2.6.0/net/http.rb:1493:in `send_entity'
            12: from lib/ruby/2.6.0/net/http.rb:1479:in `request'
            11: from lib/ruby/2.6.0/net/http.rb:1506:in `transport_request'
            10: from lib/ruby/2.6.0/net/http.rb:1506:in `catch'
             9: from lib/ruby/2.6.0/net/http.rb:1507:in `block in transport_request'
             8: from lib/ruby/2.6.0/net/http/generic_request.rb:123:in `exec'
             7: from lib/ruby/2.6.0/net/http/generic_request.rb:189:in `send_request_with_body'
             6: from lib/ruby/2.6.0/net/protocol.rb:247:in `write'
             5: from lib/ruby/2.6.0/net/protocol.rb:265:in `writing'
             4: from lib/ruby/2.6.0/net/protocol.rb:248:in `block in write'
             3: from lib/ruby/2.6.0/net/protocol.rb:275:in `write0'
             2: from lib/ruby/2.6.0/net/protocol.rb:275:in `each_with_index'
             1: from lib/ruby/2.6.0/net/protocol.rb:275:in `each'
    lib/ruby/2.6.0/net/protocol.rb:280:in `block in write0': undefined method `bytesize' for nil:NilClass (NoMethodError)
    ```
    
    [Fix GH-2058]
    
    From: Eito Katagiri <eitoball@gmail.com>
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66582 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 1f866ddc1473588541f6b18761b43625857f7a37
Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2018-12-27 13:21:56 +0900

    * 2018-12-27
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66581 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 384ca22a7a8d9ccaea86ea336e349bcbd536335d
Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2018-12-27 13:21:53 +0900

    io-console.gemspec: update
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66580 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 94bdc4edf0583109ce97e244f6423d840b11c092
Author: mame <mame@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2018-12-26 23:43:25 +0900

    string.c: remove the deprecation warnings of `String#bytes` with block
    
    And its friends: lines, chars, grapheme_clusters, and codepoints.
    [Feature #6670] [ruby-core:90728]
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66579 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 0df1de8b32f98793f596fd8d3b608fc6f3104e01
Author: mame <mame@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2018-12-26 23:42:07 +0900

    Revert "string.c: remove the deprecation warnings of `String#bytes` with block"
    
    Forgot to write the ticket number in the commit log...
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66578 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 5281a0047f6f32103569372ae1a39cfadda4866c
Author: kazu <kazu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2018-12-26 18:14:28 +0900

    Fix typos [ci skip]
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66577 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit e030e9f0b8be42dd8c5eb43e3f390106f3b6a48e
Author: mame <mame@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2018-12-26 18:04:12 +0900

    object.c (rb_obj_match): use rb_warn for deprecation warning
    
    Now the warning is printed even without -w option.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66576 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 2b21744efa34a685d0b3d3b333622989a7615cda
Author: mame <mame@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2018-12-26 17:52:19 +0900

    string.c: remove the deprecation warnings of `String#bytes` with block
    
    And its friends: lines, chars, grapheme_clusters, and codepoints.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66575 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 35b7af7503d380f220b5730d47b542ba295be37b
Author: mrkn <mrkn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2018-12-26 17:17:30 +0900

    Import bigdecimal 1.4.2
    
    * https://github.com/ruby/bigdecimal/compare/v1.4.1..v1.4.2
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66574 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 9b817107ce0fea9e4dcde6edf5664c734a2faa2b
Author: naruse <naruse@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2018-12-26 17:01:51 +0900

    fix typo
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66573 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 9edb32dae72c2b45b524e9ca98650cd2b974fe22
Author: shyouhei <shyouhei@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2018-12-26 16:23:35 +0900

    add #line [ci skip]
    
    These erb files are in fact erb comments + plain C.  Adding #line
    help us debug in case we have trouble there.
    
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66572 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 2914522ffc39c22dfdccf5ad68162232c5cd0d35
Author: mame <mame@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2018-12-26 16:04:31 +0900

    spec/ruby/library/socket/socket/bind_spec.rb: allow to run under docker
    
    A root user runs the spec without Errno::EACCES
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66571 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 7453cdba1b62d6f6533f8c7bfdf6011524e11853
Author: mame <mame@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2018-12-26 16:02:31 +0900

    spec/ruby/core/process/setpriority_spec.rb: allow to run under docker
    
    Docker container is not always able to lower the nice value even if the
    euid is a root.  It depends upon the configuration of docker which
    cannot check from the container itself.
    
    This change does check it by actually trying to lower the value first.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66570 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 925a722ae2c453c351d6e9fff9776bb0a2061642
Author: mame <mame@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2018-12-26 15:01:18 +0900

    test/rdoc: skip some tests when euid is root
    
    root user can access a file whose permission is 0000.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66569 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 1df30008b2461c930a3fb8a8d887f54e403f8379
Author: mame <mame@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2018-12-26 14:31:22 +0900

    test/ruby/test_process.rb (test_execopts_uid): rescue Errno::EACCES
    
    The tests fail under the following condition:
    
        * executed as a root
        * the code is in a directory that uid:30000 user cannot access
          (e.g., /root)
    
    So, this change rescues Errno::EACCES explicitly.
    Also, this change adds `exception: true` to `Kernel#system` calls.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66568 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit b8d28b33b4df47f53d78b2f5587a72429cda3d91
Author: normal <normal@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2018-12-26 13:04:01 +0900

    doc/extension.ja.rdoc (rb_gc_register_mark_object): fix prototype
    
    It takes VALUE, not a pointer to a VALUE.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66567 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 70398311d06e48016ce944db69fce23bb361460c
Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2018-12-26 09:59:40 +0900

    * expand tabs.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66566 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit d46ab953765e2114b6f2f58792be9a7a974e5f27
Author: shyouhei <shyouhei@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2018-12-26 09:59:37 +0900

    insns.def: refactor to avoid CALL_METHOD macro
    
    These send and its variant instructions are the most frequently called
    paths in the entire process.  Reducing macro expansions to make them
    dedicated function called vm_sendish() is the main goal of this
    changeset.  It reduces the size of vm_exec_coref from 25,552 bytes to
    23,728 bytes on my machine.
    
    I see no significant slowdown.
    
    Fix: [GH-2056]
    
    vanilla: ruby 2.6.0dev (2018-12-19 trunk 66449) [x86_64-darwin15]
    ours: ruby 2.6.0dev (2018-12-19 refactor-send 66449) [x86_64-darwin15]
    last_commit=insns.def: refactor to avoid CALL_METHOD macro
    Calculating -------------------------------------
                             vanilla        ours
       vm2_defined_method     2.645M      2.823M i/s -      6.000M times in 5.109888s 4.783254s
               vm2_method     8.553M      8.873M i/s -      6.000M times in 1.579892s 1.524026s
       vm2_method_missing     3.772M      3.858M i/s -      6.000M times in 3.579482s 3.499220s
    vm2_method_with_block     8.494M      8.944M i/s -      6.000M times in 1.589774s 1.509463s
          vm2_poly_method      0.571       0.607 i/s -       1.000 times in 3.947570s 3.733528s
       vm2_poly_method_ov      5.514       5.168 i/s -       1.000 times in 0.408156s 0.436169s
     vm3_clearmethodcache      2.875       2.837 i/s -       1.000 times in 0.783018s 0.793493s
    
    Comparison:
                    vm2_defined_method
                     ours:   2822555.4 i/s
                  vanilla:   2644878.1 i/s - 1.07x  slower
    
                            vm2_method
                     ours:   8872947.8 i/s
                  vanilla:   8553433.1 i/s - 1.04x  slower
    
                    vm2_method_missing
                     ours:   3858192.3 i/s
                  vanilla:   3772296.3 i/s - 1.02x  slower
    
                 vm2_method_with_block
                     ours:   8943825.1 i/s
                  vanilla:   8493955.0 i/s - 1.05x  slower
    
                       vm2_poly_method
                     ours:         0.6 i/s
                  vanilla:         0.6 i/s - 1.06x  slower
    
                    vm2_poly_method_ov
                  vanilla:         5.5 i/s
                     ours:         5.2 i/s - 1.07x  slower
    
                  vm3_clearmethodcache
                  vanilla:         2.9 i/s
                     ours:         2.8 i/s - 1.01x  slower
    
    
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66565 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 686881d383cfe44c67875aada64207c5e0abaa8d
Author: shyouhei <shyouhei@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2018-12-26 09:58:26 +0900

    add _sp_inc_helpers.erb [ci skip]
    
    Just add more room for comments.  This is a pure refactoring that does
    not change anything but readability.
    
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66564 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 756b200ad6623fdad76c30f19aaf25fb75a24f08
Author: kazu <kazu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2018-12-26 01:11:18 +0900

    [DOC] Remove heading with no content [ci skip]
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66561 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 1859c79190bd7f926d26b1f919e038c182080f2e
Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2018-12-26 01:09:40 +0900

    * properties.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66560 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit d16509f1f009e06a1a9ff3bf9ab3f28aef415e87
Author: kazu <kazu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2018-12-26 01:09:39 +0900

    [DOC] Add doc/NEWS-2.6.0 [ci skip]
    
    fix previous commit miss
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66559 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 848a53d2b538d74730928737ec65325725f617f5
Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2018-12-26 00:58:51 +0900

    * 2018-12-26
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66558 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit c14b9f9b638bc966923ae6fffa629ed171aea827
Author: kazu <kazu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2018-12-26 00:58:49 +0900

    [DOC] Move from NEWS to doc/NEWS-2.6.0 [ci skip]
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66557 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit b5569b9ab2ad5e0e4a997df7eb73e97ecbacc9dd
Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2018-12-25 22:57:28 +0900

    erb.rb: print deprecation warning with warn level 1
    
    This was planned to be removed in Ruby 2.7 at first, but I changed my
    mind to just keep warning it in Ruby 2.7.
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66556 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 3a0471faa0d383392ba05b3a6409b973b7b009d1
Author: matz <matz@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
Date:   2018-12-25 22:45:17 +0900

    version.h (RUBY_VERSION): 2.7.0 development has started.
    
    
    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66555 b2dd03c8-39d4-4d8f-98ff-823fe69b080e
