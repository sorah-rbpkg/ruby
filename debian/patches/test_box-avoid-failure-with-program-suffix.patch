From: Sorah Fukumori <her@sorah.jp>
Date: Thu, 25 Dec 2025 21:03:55 +0900
Subject: test_box: avoid failure with --program-suffix

---
 test/ruby/test_box.rb | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

diff --git a/test/ruby/test_box.rb b/test/ruby/test_box.rb
index a531afa..28c9dd0 100644
--- a/test/ruby/test_box.rb
+++ b/test/ruby/test_box.rb
@@ -1,10 +1,11 @@
 # frozen_string_literal: true
 
 require 'test/unit'
+require 'rbconfig'
 
 class TestBox < Test::Unit::TestCase
   EXPERIMENTAL_WARNING_LINE_PATTERNS = [
-    /ruby(\.exe)?: warning: Ruby::Box is experimental, and the behavior may change in the future!/,
+    /#{RbConfig::CONFIG["ruby_install_name"] || "ruby"}(\.exe)?: warning: Ruby::Box is experimental, and the behavior may change in the future!/,
     %r{See https://docs.ruby-lang.org/en/(master|\d\.\d)/Ruby/Box.html for known issues, etc.}
   ]
   ENV_ENABLE_BOX = {'RUBY_BOX' => '1', 'TEST_DIR' => __dir__}
