From: Lucas Kanashiro <kanashiro@debian.org>
Date: Tue, 3 Oct 2023 18:41:55 -0300
Subject: Fix FTBS on hurd

Closes: #896509

Signed-off-by: Antonio Terceiro <terceiro@debian.org>
Signed-off-by: Samuel Thibault <samuel.thibault@ens-lyon.org>

--- a/io.c
+++ b/io.c
@@ -2207,7 +2207,11 @@
 
     for (i = 0; i < argc; i += cnt) {
 #ifdef HAVE_WRITEV
-        if ((fptr->mode & (FMODE_SYNC|FMODE_TTY)) && iovcnt_ok(cnt = argc - i)) {
+        if ((fptr->mode & (FMODE_SYNC|FMODE_TTY))
+# ifdef IOV_MAX
+		&& ((cnt = argc - i) < IOV_MAX)
+# endif
+	   	) {
             n = io_fwritev(cnt, &argv[i], fptr);
         }
         else
